import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as ge,ax as a,g as e,f as ve,r as n,b as xe,e as i,n as Y,t as g,c as k,aL as Ie,s as he,i as Le}from"../chunks/CVkC3v6g.js";import{t as v,c as Pe,a as r,b as Q}from"../chunks/CXa2DXXa.js";import{i as Se}from"../chunks/B3G23GpA.js";import{s as Ve,a as me}from"../chunks/B71MWTBs.js";import{p as we}from"../chunks/BlTZtavH.js";import{P as Be}from"../chunks/CzIAgOFi.js";import{s as x}from"../chunks/DUPvQxLd.js";import{i as y}from"../chunks/DpQPgcBL.js";import{k as Ce}from"../chunks/DLaUIK3W.js";import{e as _e,i as be}from"../chunks/ojfNN_0P.js";import{p as Fe}from"../chunks/CEC5gFID.js";import{L as ye}from"../chunks/LH3G9Yqj.js";import{t as o}from"../chunks/D2OY9xdY.js";import{f as ue,r as We,t as Ae}from"../chunks/BogN5CJj.js";import{g as ke}from"../chunks/CT3a8W8Y.js";import{g as Ee,m as Me}from"../chunks/dAqOlFj6.js";import{D as fe}from"../chunks/ClpKw9mK.js";import{A as je}from"../chunks/Bao8vGeu.js";import{B as qe}from"../chunks/svNy4rTM.js";import{E as ze}from"../chunks/B4jGSy-b.js";import{A as Ne}from"../chunks/CNClEvGf.js";import{f as Qe}from"../chunks/BOlhVyMO.js";var Re=v('<td class="py-1 text-left"><!></td>'),Ge=v('<div class="flex items-center gap-2"> <!></div>'),He=v('<div class="flex items-center gap-2"> <!></div>'),Je=v('<td class="whitespace-pre-line break-words py-1 text-left"><div class="flex flex-col gap-1"><!> <!> <div class="flex items-center gap-2"> <!></div></div></td>'),Ke=v("<p> </p>"),Oe=v("<p> </p>"),Ue=v('<td class="truncate py-1 text-left"><div class="flex flex-col gap-1"><!> <!> <p><!></p></div></td>'),Xe=v('<td class="w-24 truncate py-1"><!></td>'),Ye=v("<tr></tr>");function Ze(Z,t){ge(t,!0);const[P,R]=Ve(),G=()=>me(we,"$page",P),D=()=>me(Ae,"$timeFormat",P),T=()=>me(We,"$relativeTime",P);var I,$,L,S,ee,te,re,oe,ae,f;const h=a(()=>($=(I=t.deployment===null||t.deployment===void 0?void 0:t.deployment.latestVersionSummary)===null||I===void 0?void 0:I.deploymentVersion)===null||$===void 0?void 0:$.buildId),s=a(()=>((S=(L=t.deployment===null||t.deployment===void 0?void 0:t.deployment.rampingVersionSummary)===null||L===void 0?void 0:L.deploymentVersion)===null||S===void 0?void 0:S.buildId)||ke((ee=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||ee===void 0?void 0:ee.rampingVersion)),c=a(()=>((te=t.deployment===null||t.deployment===void 0?void 0:t.deployment.rampingVersionSummary)===null||te===void 0?void 0:te.createTime)||((re=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||re===void 0?void 0:re.rampingVersionChangedTime)),u=a(()=>((ae=(oe=t.deployment===null||t.deployment===void 0?void 0:t.deployment.currentVersionSummary)===null||oe===void 0?void 0:oe.deploymentVersion)===null||ae===void 0?void 0:ae.buildId)||ke((f=t.deployment===null||t.deployment===void 0?void 0:t.deployment.routingConfig)===null||f===void 0?void 0:f.currentVersion)),b=a(()=>e(h)!==e(s)&&e(h)!==e(u)),p=a(()=>e(u)!=="__unversioned__"),B=a(()=>e(p)?e(u):o("deployments.unversioned"));var H=Ye();_e(H,21,()=>t.columns,({label:M})=>M,(M,j)=>{let q=()=>e(j).label;var ne=Pe(),ie=ve(ne);{var De=J=>{var se=Re(),pe=i(se);const ce=a(()=>Ee({namespace:G().params.namespace,deployment:t.deployment.name}));ye(pe,{get href(){return e(ce)},children:(F,K)=>{Y();var z=Q();g(()=>x(z,t.deployment.name)),r(F,z)},$$slots:{default:!0}}),n(se),r(J,se)},Te=(J,se)=>{{var pe=F=>{var K=Je(),z=i(K),de=i(z);{var W=m=>{var _=Ge(),V=i(_),N=k(V);const d=a(()=>o("deployments.latest"));fe(N,{status:"Latest",get label(){return e(d)}}),n(_),g(()=>x(V,`${e(h)??""} `)),r(m,_)};y(de,m=>{e(h)&&e(b)&&m(W)})}var A=k(de,2);{var O=m=>{var _=He(),V=i(_),N=k(V);{var d=l=>{const w=a(()=>o("deployments.ramping-percentage",{percentage:t.deployment.routingConfig.rampingVersionPercentage}));fe(l,{status:"Ramping",get label(){return e(w)}})};y(N,l=>{var w,X;(X=(w=t.deployment)==null?void 0:w.routingConfig)!=null&&X.rampingVersionPercentage&&l(d)})}n(_),g(()=>x(V,`${e(s)??""} `)),r(m,_)};y(A,m=>{e(s)&&m(O)})}var C=k(A,2),E=i(C),U=k(E);{var le=m=>{const _=a(()=>o("deployments.current"));fe(m,{status:"Current",get label(){return e(_)}})};y(U,m=>{e(p)&&m(le)})}n(C),n(z),n(K),g(()=>x(E,`${e(B)??""} `)),r(F,K)},ce=(F,K)=>{{var z=W=>{var A=Ue(),O=i(A),C=i(O);{var E=d=>{var l=Ke(),w=i(l,!0);n(l),g(X=>x(w,X),[()=>ue(t.deployment.latestVersionSummary.createTime,D(),{relative:T()})]),r(d,l)};y(C,d=>{var l;e(h)&&e(b)&&((l=t.deployment.latestVersionSummary)!=null&&l.createTime)&&d(E)})}var U=k(C,2);{var le=d=>{var l=Oe(),w=i(l,!0);n(l),g(X=>x(w,X),[()=>ue(e(c),D(),{relative:T()})]),r(d,l)};y(U,d=>{e(s)&&e(c)&&d(le)})}var m=k(U,2),_=i(m);{var V=d=>{var l=Q();g(w=>x(l,w),[()=>ue(t.deployment.createTime,D(),{relative:T()})]),r(d,l)},N=d=>{var l=Q("-");r(d,l)};y(_,d=>{e(p)?d(V):d(N,!1)})}n(m),n(O),n(A),r(W,A)},de=(W,A)=>{{var O=C=>{var E=Xe(),U=i(E);const le=a(()=>Me({namespace:G().params.namespace,query:`TemporalWorkerDeployment="${t.deployment.name}"`}));ye(U,{icon:"external-link",get href(){return e(le)},children:(m,_)=>{Y();var V=Q();g(N=>x(V,N),[()=>o("deployments.go-to-workflows")]),r(m,V)},$$slots:{default:!0}}),n(E),r(C,E)};y(W,C=>{q()===o("deployments.actions")&&C(O)},A)}};y(F,W=>{q()===o("deployments.deployed")?W(z):W(de,!1)},K)}};y(J,F=>{q()===o("deployments.build-id")?F(pe):F(ce,!1)},se)}};y(ie,J=>{q()===o("deployments.name")?J(De):J(Te,!1)})}r(M,ne)}),n(H),r(Z,H),xe(),R()}var $e=v('<caption class="sr-only" slot="caption"> </caption>'),et=v('<div class="flex flex-col gap-4" slot="header"><div class="flex flex-wrap items-center gap-2"><h1> </h1> <!></div></div>'),tt=v("<th> </th>"),rt=v('<tr slot="headers" class="text-left"></tr>'),ot=v('<p class="text-center">Enable Worker Deployments to manage your workers more effectively. <!>.</p> <!>',1),at=v('<div class="flex flex-col gap-4"><!></div>');function nt(Z,t){ge(t,!0);let P=Ie("");const R=a(()=>Fe.params.namespace),G=a(()=>()=>(he(P,""),Qe(e(R),"",D))),D=L=>{var S;he(P,((S=L==null?void 0:L.body)===null||S===void 0?void 0:S.message)||o("deployments.error-message-fetching"),!0)},T=[{label:o("deployments.name")},{label:o("deployments.build-id")},{label:o("deployments.deployed")},{label:o("deployments.actions")}];var I=at(),$=i(I);Ce($,()=>[e(R)],L=>{const S=a(()=>o("deployments.deployments")),ee=a(()=>o("common.per-page")),te=a(()=>o("common.next")),re=a(()=>o("common.previous")),oe=a(()=>o("deployments.empty-state-title")),ae=a(()=>o("deployments.error-message-fetching"));Ne(L,{get onFetch(){return e(G)},onError:D,get"aria-label"(){return e(S)},get pageSizeSelectLabel(){return e(ee)},get nextButtonLabel(){return e(te)},get previousButtonLabel(){return e(re)},get emptyStateMessage(){return e(oe)},get errorMessage(){return e(ae)},children:Le,$$slots:{default:(f,h)=>{const s=a(()=>h.visibleItems);var c=Pe(),u=ve(c);_e(u,17,()=>e(s),be,(b,p)=>{Ze(b,{get deployment(){return e(p)},columns:T})}),r(f,c)},caption:(f,h)=>{var s=$e(),c=i(s,!0);n(s),g(u=>x(c,u),[()=>o("deployments.deployments")]),r(f,s)},header:(f,h)=>{var s=et(),c=i(s),u=i(c),b=i(u,!0);n(u);var p=k(u,2);qe(p,{class:"shrink-0",children:(B,H)=>{Y();var M=Q("Public Preview");r(B,M)},$$slots:{default:!0}}),n(c),n(s),g(B=>x(b,B),[()=>o("deployments.worker-deployments")]),r(f,s)},headers:(f,h)=>{var s=rt();_e(s,21,()=>T,be,(c,u)=>{let b=()=>e(u).label;var p=tt(),B=i(p,!0);n(p),g(()=>x(B,b())),r(c,p)}),n(s),r(f,s)},empty:(f,h)=>{const s=a(()=>o("deployments.empty-state-title"));ze(f,{get title(){return e(s)},class:"px-4",children:(c,u)=>{var b=ot(),p=ve(b),B=k(i(p));ye(B,{href:"https://docs.temporal.io/worker-deployments",newTab:!0,children:(j,q)=>{Y();var ne=Q("Learn more");r(j,ne)},$$slots:{default:!0}}),Y(),n(p);var H=k(p,2);{var M=j=>{je(j,{intent:"warning",icon:"warning",class:"px-12",children:(q,ne)=>{Y();var ie=Q();g(()=>x(ie,e(P))),r(q,ie)},$$slots:{default:!0}})};y(H,j=>{e(P)&&j(M)})}r(c,b)},$$slots:{default:!0}})}}})}),n(I),r(Z,I),xe()}var st=v("<!> <!>",1);function Bt(Z,t){ge(t,!1);const[P,R]=Ve(),G=()=>me(we,"$page",P);Se();var D=st(),T=ve(D);Be(T,{title:"Deployments",get url(){return G().url.href}});var I=k(T,2);nt(I,{}),r(Z,D),xe(),R()}export{Bt as component};
