import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as _e,e as We,f as re,d as s,b as xe,i as M,j as r,g as e,t as q,h as k,c,r as w,ad as lr,l as W,a as Se,s as g,m as x,aE as ae,ac as se,n as fe,k as de,af as Re,aQ as cr,o as It,az as be,A as dr}from"../chunks/DSxqszTl.js";import{i as he}from"../chunks/BcaHj5WR.js";import{s as Ee,a as Y,b as pe,m as vr}from"../chunks/CZBNCVvj.js";import{p as Qe}from"../chunks/Df7rYi0q.js";import{P as ur}from"../chunks/DTWo_ajL.js";import{t as b}from"../chunks/D2OY9xdY.js";import{e as lt,s as O}from"../chunks/CXaSvchK.js";import{i as Z}from"../chunks/BAt4aHTa.js";import{b as fr,C as gr,s as Be,a as ue,d as mr}from"../chunks/DyEeuWnl.js";import{b as pr}from"../chunks/CgoMTCEH.js";import{l as rt,p as H}from"../chunks/Bp73-jql.js";import{E as _r,C as ct,L as qe,T as tt,D as _t,t as xr,g as wr}from"../chunks/DVr4VF12.js";import{a as kr,s as Me}from"../chunks/Qdkaj6Y8.js";import{e as hr}from"../chunks/DZoWmpS-.js";import{b as $r}from"../chunks/13eOOzQn.js";import{I as De}from"../chunks/Dc8cZy7F.js";import{g as yr,T as br,a as vt}from"../chunks/Xn5SEgK-.js";import{T as Vt}from"../chunks/CFAn1g9i.js";import{t as Tr}from"../chunks/Ds6tgvmq.js";import{W as Er}from"../chunks/CzZTq8g3.js";import{T as Pr}from"../chunks/AlSAaE1i.js";import{b as Bt,d as St,a as Ar,e as st,f as xt,j as et,k as Ne,c as Ue,p as it,l as Ir,n as Ct,m as Ft,i as Hr}from"../chunks/BmE4MWfy.js";import{w as wt}from"../chunks/B0rcaDAb.js";import{e as nt,i as kt}from"../chunks/B5GJuRxG.js";import{w as Wr,a as Sr,o as Cr,g as zt}from"../chunks/Cb3VdkNs.js";import{C as ut}from"../chunks/BKbjjHdT.js";import{M as Fr}from"../chunks/D_1rmv9F.js";import{c as zr,d as jr,b as ft}from"../chunks/BpCgdzWs.js";import{M as Rr}from"../chunks/O3lg-vfE.js";import{Z as jt,k as bt,Q as Rt,v as Lt,n as Lr,_ as qt,$ as Or}from"../chunks/DPZf26_M.js";import{a as Mr,b as Qt,d as Jt,f as Gr,c as Tt}from"../chunks/noJmP8x9.js";import{t as Dr}from"../chunks/Run92fdS.js";import{i as Nr}from"../chunks/BMDvjHJ9.js";import{k as Ht}from"../chunks/CvtqSEth.js";import{b as Xt}from"../chunks/BUdEKvIy.js";import{f as Ve,t as ht,r as Ur}from"../chunks/ClMMmMYg.js";import{i as Yt}from"../chunks/Dzb719w0.js";import{q as mt,l as Zt}from"../chunks/CeMbHz9m.js";import{b as Vr,g as Br,d as qr,c as gt}from"../chunks/GDMUXwJG.js";import{W as Qr}from"../chunks/BxuYcH-y.js";import{B as Jr}from"../chunks/rRbRIrsH.js";import{a as Xr}from"../chunks/VoR_jEzk.js";import{g as Kt}from"../chunks/BXQGly1Z.js";import{f as Yr,b as Zr}from"../chunks/iBtLWQB4.js";import{A as Kr}from"../chunks/p1pef5nX.js";import{p as Ot}from"../chunks/DHg5zIOy.js";import{M as en}from"../chunks/BY4yl27F.js";import{a as er}from"../chunks/DlMariDq.js";import{b as tn}from"../chunks/K6Afqa47.js";import{A as Wt}from"../chunks/DlVC6YhT.js";import{L as tr}from"../chunks/BlzQnGKV.js";import{s as rn}from"../chunks/ByTIZu23.js";import{g as nn,a as on}from"../chunks/KkS3NPXy.js";import{A as rr}from"../chunks/D7osC8Y4.js";import{C as pt}from"../chunks/RtoCH-cV.js";import{B as Oe}from"../chunks/BRUU8Mhh.js";import{M as an}from"../chunks/CDr2yTI0.js";import{R as sn,a as Et}from"../chunks/Cml8SAiC.js";import{c as ln,d as cn}from"../chunks/ejHFY8RK.js";import{g as dn,b as vn,a as un}from"../chunks/ClCElSOH.js";import{s as At}from"../chunks/byHaz_JD.js";import{i as fn}from"../chunks/DUsho_C4.js";import{c as Mt,a as Gt}from"../chunks/BdSHaNVs.js";import{I as Dt}from"../chunks/D2WwRSQy.js";import{t as gn,a as mn}from"../chunks/LeF0uBFk.js";import{v as pn}from"../chunks/Dz_GI0CC.js";import{s as _n}from"../chunks/Nsxp-0jx.js";var xn=q('<span class="hidden md:block"><!></span>'),wn=q('<div class="flex items-center gap-2"><!> <!></div>');function Pt($,t){const o=kr(t),A=rt(t,["children","$$slots","$$events","$$legacy"]),v=rt(A,["class","icon","group","href","base","active","tooltip"]);_e(t,!1);const[i,a]=Ee(),n=()=>Y(Qe,"$page",i);let f=H(t,"class",8,""),_=H(t,"icon",8,null),m=H(t,"group",24,()=>yr("group")),E=H(t,"href",8,""),h=H(t,"base",24,E),l=H(t,"active",8,!1),d=H(t,"tooltip",8,"");he();var T=We(),S=re(T);hr(S,()=>E()?"a":"button",!1,(P,y)=>{let u;M((G,V)=>u=fr(P,u,{class:G,href:E()?E()+n().url.search:null,"data-track-name":"tab-button","data-track-intent":"select","data-track-text":"*textContent*",role:"button",tabindex:"0",...v,[gr]:V},"svelte-s3kcun"),[()=>Tr("toggle-button",f()),()=>({group:m(),active:E()?n().url.pathname.includes(h()):l(),disabled:v.disabled})],r),lt("click",P,function(G){$r.call(this,t,G)});const R=r(()=>!d());Vt(y,{get hide(){return e(R)},get text(){return d()},top:!0,children:(G,V)=>{var j=We(),D=re(j);{var F=p=>{var I=wn(),J=k(I);De(J,{get name(){return _()}});var ie=c(J,2);{var we=B=>{var N=xn(),Q=k(N);Me(Q,t,"default",{},null),w(N),s(B,N)};Z(ie,B=>{o.default&&B(we)})}w(I),s(p,I)},L=p=>{var I=We(),J=re(I);Me(J,t,"default",{},null),s(p,I)};Z(D,p=>{_()?p(F):p(L,!1)})}s(G,j)},$$slots:{default:!0}})}),s($,T),xe(),a()}var kn=q('<div class="flex"><!></div>');function hn($,t){_e(t,!1),lr("group",!0),he();var o=kn(),A=k(o);Me(A,t,"default",{},null),w(o),s($,o),xe()}function $n($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(Bt,"$filteredEventHistory",o),i=()=>Y(St,"$decodeEventHistory",o);he(),Er($,{get events(){return v()},decode:n=>{const f=r(()=>b("events.decode-event-history"));Pr(n,{get label(){return e(f)},id:"decode-event-history","data-testid":"decode-event-history-toggle",get checked(){return vr(),i()},set checked(_){pe(St,_)},$$legacy:!0})},$$slots:{decode:!0}}),xe(),A()}var yn=q("<!> <!> <!>",1),bn=q('<div class="border-t border-subtle px-4"><!></div>'),Tn=q('<div data-testid="event-summary-table"><!></div>'),En=q('<div class="flex items-center justify-end gap-4 pt-4 lg:pt-8"><div class="flex items-center gap-2 px-4"><!></div></div> <!>',1);function Pn($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(wt,"$workflowRun",o),i=()=>Y(st,"$eventFilterSort",o),a=()=>Y(xt,"$fullEventHistory",o),n=()=>Y(et,"$eventViewType",o),f=()=>Y(Qe,"$page",o),_=x(),m=x(),E=x(),h=x(),l=x(),d=x(),T=x();var S=x(),P=x(),y=x(),u=x();let R=H(t,"history",8),G=H(t,"groups",8),V=H(t,"minimized",8,!0);const j=()=>{pe(et,"feed")},D=()=>{pe(et,"compact")},F=()=>{pe(et,"json")};W(()=>(e(_),v()),()=>{(N=>g(_,N.workflow))(v())}),W(()=>i(),()=>{g(m,i()==="descending")}),W(()=>a(),()=>{g(E,!a().length)}),W(()=>n(),()=>{g(h,n()==="compact")}),W(()=>(ae(P),ae(S),f(),ae(u),ae(y)),()=>{pe(Ar,!(g(P,g(S,f().url)===null||ae(S)===void 0?void 0:ae(S).searchParams)===null||ae(P)===void 0)&&ae(P).get("category")?g(u,g(y,f().url)===null||ae(y)===void 0?void 0:ae(y).searchParams)===null||ae(u)===void 0?void 0:ae(u).get("category").split(","):void 0)}),W(()=>e(_),()=>{g(l,e(_).pendingActivities)}),W(()=>e(_),()=>{g(d,e(_).pendingNexusOperations)}),W(()=>(e(h),se(G()),e(m),e(d),e(l),se(R())),()=>{g(T,e(h)?G():e(m)?[...e(d),...e(l),...R()]:[...R(),...e(l),...e(d)])}),Se(),he();var L=En(),p=re(L),I=k(p),J=k(I);hn(J,{children:(N,Q)=>{var ne=yn(),U=re(ne);const C=r(()=>n()==="feed");Pt(U,{get active(){return e(C)},"data-testid":"feed",icon:"feed",class:"h-10",$$events:{click:j},children:(Te,ze)=>{fe();var ke=de("All");s(Te,ke)},$$slots:{default:!0}});var ee=c(U,2);const oe=r(()=>n()==="compact");Pt(ee,{get active(){return e(oe)},"data-testid":"compact",icon:"compact",class:"h-10",$$events:{click:D},children:(Te,ze)=>{fe();var ke=de("Compact");s(Te,ke)},$$slots:{default:!0}});var le=c(ee,2);const He=r(()=>n()==="json");Pt(le,{get active(){return e(He)},"data-testid":"json",icon:"json",class:"h-10",$$events:{click:F},children:(Te,ze)=>{fe();var ke=de("JSON");s(Te,ke)},$$slots:{default:!0}}),s(N,ne)},$$slots:{default:!0}}),w(I),w(p);var ie=c(p,2);{var we=N=>{var Q=bn(),ne=k(Q);$n(ne,{}),w(Q),s(N,Q)},B=N=>{var Q=Tn(),ne=k(Q);_r(ne,{get updating(){return e(E)},get items(){return e(T)},get groups(){return G()},get compact(){return e(h)},get minimized(){return V()}}),w(Q),s(N,Q)};Z(ie,N=>{n()==="json"?N(we):N(B,!1)})}s($,L),xe(),A()}const An=$=>$==null?void 0:$.nexus;var In=q('<span class="hidden text-sm md:block"> </span>'),Hn=q('<div slot="leading"><!></div>'),Wn=q("<!> <!> <!> <!> <!>",1),Sn=q("<!> <!>",1);function Cn($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(Dr,"$temporalVersion",o),i=()=>Y(Qe,"$page",o),a=()=>Y(Ne,"$eventTypeFilter",o),n=()=>Y(Ue,"$eventStatusFilter",o),f=()=>Y(et,"$eventViewType",o),_=x(),m=x(),E=x();var h=x();let l=H(t,"compact",8,!1),d=H(t,"minimized",8,!0),T=Wr(!1);const S=({value:P})=>{Mr(),pe(Ne,a().some(y=>y===P)?a().filter(y=>y!==P):[...a(),P])};W(()=>(se(l()),bt),()=>{g(_,l()?jt.map(P=>P.value):bt.map(P=>P.value))}),W(()=>(se(l()),ct),()=>{g(m,[...(l()?jt:bt).map(P=>({...P,label:b(P.label),icon:ct[P.value],description:b(P.description)}))])}),W(()=>(v(),e(m)),()=>{Nr("1.21.0",v())&&g(m,e(m).filter(({value:P})=>P!=="update"))}),W(()=>(ae(h),i(),e(m)),()=>{An(g(h,i().data.systemInfo)===null||ae(h)===void 0?void 0:ae(h).capabilities)||g(m,e(m).filter(({value:P})=>P!=="nexus"))}),W(()=>(a(),e(_)),()=>{g(E,a().length<e(_).length)}),Se(),he(),zr($,{open:T,children:(P,y)=>{var u=Sn(),R=re(u);Fr(R,{controls:"status-menu",size:"sm",children:(j,D)=>{var F=In(),L=k(F,!0);w(F),M(p=>O(L,p),[()=>b("common.filter")],r),s(j,F)},$$slots:{default:!0,leading:(j,D)=>{var F=Hn();let L;var p=k(F);const I=r(()=>e(E)&&"pt-0.5 text-white");De(p,{name:"filter",get class(){return e(I)}}),w(F),M(J=>L=Be(F,1,"flex h-6 w-6 flex-col items-center justify-center rounded-full transition-colors duration-200",null,L,J),[()=>({"bg-interactive":e(E)})],r),s(j,F)}}});var G=c(R,2);const V=r(()=>d()?"top-right":"right");jr(G,{id:"event-type-menu",keepOpen:!0,get position(){return e(V)},class:"w-[220px] md:w-[360px]",children:(j,D)=>{var F=Wn(),L=re(F);const p=r(()=>b("common.all"));ft(L,{get"data-testid"(){return e(p)},$$events:{click:()=>{pe(Ne,e(_)),pe(Ue,!1)}},children:(Q,ne)=>{fe();var U=de();M(C=>O(U,C),[()=>b("common.all")],r),s(Q,U)},$$slots:{default:!0,leading:(Q,ne)=>{const U=r(()=>!n()&&a().length===e(_).length),C=r(()=>b("common.all"));ut(Q,{slot:"leading",get checked(){return e(U)},get label(){return e(C)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{pe(Ne,e(_)),pe(Ue,!1)}}})}}});var I=c(L,2);{var J=Q=>{const ne=r(()=>b("common.pending-and-failed")),U=r(()=>b("common.pending-and-failed-description"));ft(Q,{get"data-testid"(){return e(ne)},get description(){return e(U)},class:"items-start",$$events:{click:()=>{pe(Ne,e(_)),pe(Ue,!n())}},children:(C,ee)=>{fe();var oe=de();M(le=>O(oe,le),[()=>b("common.pending-and-failed")],r),s(C,oe)},$$slots:{default:!0,leading:(C,ee)=>{const oe=r(()=>b("common.all"));ut(C,{slot:"leading",get checked(){return n()},get label(){return e(oe)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{pe(Ne,e(_)),pe(Ue,!n())}}})}}})};Z(I,Q=>{f()!=="json"&&Q(J)})}var ie=c(I,2);const we=r(()=>b("common.none"));ft(ie,{get"data-testid"(){return e(we)},$$events:{click:()=>{pe(Ne,[]),pe(Ue,!1)}},children:(Q,ne)=>{fe();var U=de();M(C=>O(U,C),[()=>b("common.none")],r),s(Q,U)},$$slots:{default:!0,leading:(Q,ne)=>{const U=r(()=>!n()&&!a().length),C=r(()=>b("common.none"));ut(Q,{slot:"leading",get checked(){return e(U)},get label(){return e(C)},labelHidden:!0,class:"mt-px",$$events:{change:()=>{pe(Ne,[]),pe(Ue,!1)}}})}}});var B=c(ie,2);Rr(B);var N=c(B,2);nt(N,1,()=>e(m),kt,(Q,ne)=>{ft(Q,{get"data-testid"(){return e(ne).label},get description(){return e(ne).description},class:"items-start",$$events:{click:()=>{S(e(ne))}},children:(U,C)=>{fe();var ee=de();M(()=>O(ee,e(ne).label)),s(U,ee)},$$slots:{default:!0,leading:(U,C)=>{const ee=r(()=>a().some(oe=>oe===e(ne).value));ut(U,{slot:"leading",get checked(){return e(ee)},get label(){return e(ne).label},labelHidden:!0,class:"mt-px",$$events:{click:()=>S(e(ne))}})}}})}),s(j,F)},$$slots:{default:!0}}),s(P,u)},$$slots:{default:!0}}),xe(),A()}function Fn($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(it,"$pauseLiveUpdates",o),i=x(),a=x();let n=H(t,"workflow",8),f=H(t,"startTime",8);const _=()=>{const T=new Date;return T.setSeconds(T.getSeconds()+1),T};let m;const E=T=>{T&&(clearInterval(m),m=null)},h=T=>{T?(clearInterval(m),m=null):!m&&n().isRunning&&(m=setInterval(()=>{g(i,_())},1e3))};Sr(()=>{clearInterval(m),m=null,pe(it,!1)}),W(()=>se(n()),()=>{g(i,(n()===null||n()===void 0?void 0:n().endTime)||_())}),W(()=>(se(f()),e(i)),()=>{g(a,mt({start:f(),end:e(i),onlyUnderSecond:!1}))}),W(()=>se(n()),()=>{E(n().endTime)}),W(()=>v(),()=>{h(v())}),Se(),he();var l=We(),d=re(l);Me(d,t,"default",{get endTime(){return e(i)},get duration(){return e(a)}},null),s($,l),xe(),A()}var zn=q("<div><!></div>");function jn($,t){const o=rt(t,["children","$$slots","$$events","$$legacy"]),A=rt(o,["namespace","workflowId","runId","viewportHeight","onLoad"]);_e(t,!1);let v=H(t,"namespace",8),i=H(t,"workflowId",8),a=H(t,"runId",8,""),n=H(t,"viewportHeight",8,360),f=H(t,"onLoad",8,()=>{});const _=async()=>{const[l,d]=await Promise.all([Kr({namespace:v(),workflowId:i(),runId:a()}),Yr({namespace:v(),workflowId:i(),runId:a()})]);return{workflow:l.workflow,history:d}},m=(l,d)=>{var T;f()();const S=(T=l==null?void 0:l.pendingActivities)!==null&&T!==void 0?T:[];return Kt(d,"ascending",S)};he();var E=We(),h=re(E);Xr(h,_,null,(l,d)=>{var T=r(()=>{var{workflow:G,history:V}=e(d);return{workflow:G,history:V}}),S=r(()=>e(T).workflow),P=r(()=>e(T).history),y=zn(),u=k(y);const R=r(()=>m(e(S),e(P)));nr(u,{get viewportHeight(){return n()},get workflow(){return e(S)},get groups(){return e(R)},readOnly:!0}),w(y),M(()=>Be(y,1,`cursor-pointer overflow-auto ${A.class??""}`)),s(l,y)}),s($,E),xe()}var Rn=q('<div class="flex items-center gap-1"><!> </div>'),Ln=q(" <!>",1),On=q('<div class="surface-primary p-4"><div class="font-medium leading-4 text-secondary">Child Workflow</div> <!></div>'),Mn=Re('<g role="button" tabindex="0" class="relative z-50 svelte-1gmju38"><foreignObject><div class="flex flex-col"><div class="relative flex h-full items-center justify-between bg-slate-50 text-sm dark:bg-slate-800"><div class="flex h-full items-center gap-4 px-2"><!> <!></div> <div class="flex items-center gap-4"><!></div></div> <div class="surface-primary"><!></div> <!></div></foreignObject></g>');function Gn($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(Qe,"$page",o),i=x(),a=x(),n=x(),f=x(),_=x(),m=x(),E=x();var h=x(),l=x();let d=H(t,"group",8),T=H(t,"canvasWidth",8),S=H(t,"x",8,0),P=H(t,"y",8),y=x();const u=C=>{pe(Jt,C)},R=async()=>{await cr(),g(i,e(y))};W(()=>e(y),()=>{g(i,e(y)||0)}),W(()=>e(i),()=>{u(e(i)||0)}),W(()=>se(d()),()=>{g(a,(d()===null||d()===void 0?void 0:d().finalClassification)||(d()===null||d()===void 0?void 0:d().classification))}),W(()=>(e(n),v()),()=>{(C=>g(n,C.namespace))(v().params)}),W(()=>se(T()),()=>{g(f,T())}),W(()=>se(d()),()=>{g(_,d().displayName)}),W(()=>(se(d()),Rt),()=>{g(m,d()&&d().eventList.find(Rt))}),W(()=>(ae(h),se(d()),ae(l)),()=>{g(E,Zt({start:g(h,d()===null||d()===void 0?void 0:d().initialEvent)===null||ae(h)===void 0?void 0:ae(h).eventTime,end:g(l,d()===null||d()===void 0?void 0:d().lastEvent)===null||ae(l)===void 0?void 0:ae(l).eventTime,includeMilliseconds:!0}))}),W(()=>(se(d()),b),()=>{!(d()===null||d()===void 0)&&d().pendingActivity&&(d().pendingActivity.paused?g(a,b("workflows.paused")):d().pendingActivity.attempt>1?g(a,b("events.event-classification.retrying")):g(a,b("events.event-classification.pending")))}),Se(),he();var G=Mn(),V=k(G),j=k(V),D=k(j),F=k(D),L=k(F);{var p=C=>{Qr(C,{get status(){return e(a)}})};Z(L,C=>{e(a)&&C(p)})}var I=c(L),J=c(I);{var ie=C=>{var ee=Rn(),oe=k(ee);De(oe,{name:"clock"});var le=c(oe);w(ee),M(()=>O(le,` ${e(E)??""}`)),s(C,ee)};Z(J,C=>{e(E)&&C(ie)})}w(F);var we=c(F,2),B=k(we);Jr(B,{variant:"ghost",size:"xs",$$events:{click:()=>Qt(d())},children:(C,ee)=>{fe();var oe=Ln(),le=re(oe),He=c(le);De(He,{name:"close"}),M(Te=>O(le,`${Te??""} `),[()=>b("common.close")],r),s(C,oe)},$$slots:{default:!0}}),w(we),w(D);var N=c(D,2),Q=k(N);Vr(Q,{get group(){return d()},get event(){return d().initialEvent}}),w(N);var ne=c(N,2);{var U=C=>{var ee=On(),oe=c(k(ee),2);Ht(oe,()=>d().eventList.length,le=>{jn(le,{get namespace(){return e(n)},get workflowId(){return e(m).attributes.workflowExecution.workflowId},get runId(){return e(m).attributes.workflowExecution.runId},viewportHeight:320,class:"surface-primary overflow-x-hidden border-t border-subtle",onLoad:R})}),w(ee),s(C,ee)};Z(ne,C=>{e(m)&&C(U)})}w(j),w(V),w(G),M(()=>{ue(V,"x",S()),ue(V,"y",P()),ue(V,"width",e(f)),ue(V,"height",e(i)),O(I,` ${e(_)??""} `)}),Xt(j,"offsetHeight",C=>g(y,C)),s($,G),xe(),A()}var Dn=Re('<text fill="#fff" font-size="12" class="svelte-1huxcs7"> </text>'),Nn=Re("<!><!>",1),Un=Re("<!><!>",1);function Vn($,t){_e(t,!1);const o=x(),A=x();let v=H(t,"x1",8,0),i=H(t,"x2",8,1e3),a=H(t,"timelineHeight",8,1e3),n=H(t,"startTime",8),f=H(t,"duration",8);const{radius:_}=tt,m=20;W(()=>(se(i()),se(v())),()=>{g(o,i()-v())}),W(()=>e(o),()=>{g(A,e(o)/m)}),Se(),he();var E=Un(),h=re(E);const l=r(()=>[v(),a()]),d=r(()=>[v()+e(o),a()]);qe(h,{strokeWidth:_/2,get startPoint(){return e(l)},get endPoint(){return e(d)}});var T=c(h);nt(T,1,()=>Array(m),kt,(S,P,y)=>{var u=Nn();const R=r(()=>v()+y*e(A)),G=r(()=>a()+_*2);var V=re(u);{var j=L=>{const p=r(()=>[e(R),0]),I=r(()=>[e(R),a()]);qe(L,{strokeWidth:.5,get startPoint(){return e(p)},get endPoint(){return e(I)}})};Z(V,L=>{y!==0&&L(j)})}var D=c(V);{var F=L=>{var p=Dn(),I=k(p,!0);w(p),M(J=>{ue(p,"transform",`rotate(90, ${e(R)??""}, ${e(G)??""})`),ue(p,"x",e(R)-_),ue(p,"y",e(G)),O(I,J)},[()=>Zt({start:n(),end:new Date(new Date(n().toString()).getTime()+f()/m*y),includeMilliseconds:f()/m<1e3})],r),s(L,p)};Z(D,L=>{y!==0&&L(F)})}s(S,u)}),s($,E),xe()}var Bn=Re("<text><!></text>"),qn=Re("<!><!><!>",1);function Qn($,t){_e(t,!1);const o=x(),A=x(),v=x(),i=x(),a=x(),n=x();var f=x();let _=H(t,"point",24,()=>[0,0]),m=H(t,"category",8,void 0),E=H(t,"status",8,"none"),h=H(t,"fontSize",8,"13px"),l=H(t,"fontWeight",8,"400"),d=H(t,"textAnchor",8,"start"),T=H(t,"backdrop",8,!1),S=H(t,"backdropHeight",8,0),P=H(t,"icon",8,void 0),y=H(t,"config",8,void 0),u=H(t,"label",8,!1),R=x();W(()=>(e(o),e(A),se(_())),()=>{(p=>(g(o,p[0]),g(A,p[1])))(_())}),W(()=>(se(P()),se(y())),()=>{g(v,P()&&y())}),W(()=>(ae(f),e(R)),()=>{g(i,(g(f,e(R)===null||e(R)===void 0?void 0:e(R).getBBox())===null||ae(f)===void 0?void 0:ae(f).width)||0)}),W(()=>(e(v),e(i)),()=>{g(a,e(v)?e(i)+36:e(i)+12)}),W(()=>(e(v),se(d()),e(o),se(y())),()=>{g(n,e(v)&&d()==="start"?e(o)+y().radius*2:e(o))}),Se(),he();var G=qn(),V=re(G);{var j=p=>{const I=r(()=>[e(o)-S(),e(A)]),J=r(()=>[e(o)+e(a),e(A)]);qe(p,{get startPoint(){return e(I)},get endPoint(){return e(J)},get status(){return E()},get strokeWidth(){return S()}})};Z(V,p=>{T()&&p(j)})}var D=c(V);{var F=p=>{const I=r(()=>d()==="end"?e(o)-e(i)-S():e(o)),J=r(()=>e(A)-8),ie=r(()=>T()?"text-white":"text-primary");De(p,{get name(){return P()},get x(){return e(I)},get y(){return e(J)},get class(){return e(ie)}})};Z(D,p=>{e(v)&&p(F)})}var L=c(D);Ht(L,()=>e(n),p=>{var I=Bn();let J;var ie=k(I);Me(ie,t,"default",{},null),w(I),tn(I,we=>g(R,we),()=>e(R)),M(we=>{J=Be(I,0,`cursor-pointer select-none outline-none ${m()??""} text-primary`,"svelte-1kes4n8",J,we),ue(I,"x",e(n)),ue(I,"y",e(A)+1),ue(I,"font-size",h()),ue(I,"font-weight",l()),ue(I,"text-anchor",d())},[()=>({label:u(),backdrop:T()})],r),s(p,I)}),s($,G),xe()}var Jn=Re('<rect fill="transparent" pointer-events="all"></rect>'),Xn=Re("<!><!>",1),Yn=Re("<!><!><!><!>",1),Zn=Re('<g role="button" tabindex="0" class="relative cursor-pointer svelte-1gmju38"><!><!></g>');function Kn($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(er,"$authUser",o),i=x(),a=x(),n=x(),f=x(),_=x(),m=x(),E=x(),h=x(),l=x(),d=x(),T=x();var S=x(),P=x();let y=H(t,"y",8,0),u=H(t,"group",12),R=H(t,"activeGroups",24,()=>[]),G=H(t,"startTime",8),V=H(t,"endTime",8),j=H(t,"canvasWidth",8),D=H(t,"active",12,!0),F=H(t,"readOnly",8,!1);const{height:L,gutter:p,radius:I}=tt;let J=x();Cr(async()=>{const U=Br(u());if(U)try{g(J,await qr(U,{namespace:Ot.params.namespace,settings:Ot.data.settings,accessToken:v().accessToken})),e(J)&&u(u().decodedLocalActivity=e(J),!0)}catch(C){console.warn("Failed to decode local activity:",C)}});const ie=(U,C,ee)=>{const oe=mt({start:G(),end:U,onlyUnderSecond:!1}),le=u().eventList.map(z=>{const K=mt({start:G(),end:z.eventTime,onlyUnderSecond:!1})/oe;return Math.round(K*C)+p});if(e(n)){const X=mt({start:G(),end:e(n),onlyUnderSecond:!1})/oe,K=Math.round(X*C)+p;le.push(K)}const{textAnchor:He,textIndex:Te,textPosition:ze,backdrop:ke}=xr(le,ee,C,u().isPending,tt);return{points:le,textAnchor:He,textIndex:Te,textPosition:ze,backdrop:ke}},we=()=>{F()||Qt(u())};W(()=>se(j()),()=>{g(i,j()-2*p)}),W(()=>(se(R()),se(u())),()=>{D(!R().length||R().includes(u().id))}),W(()=>se(u()),()=>{g(a,u()===null||u()===void 0?void 0:u().pendingActivity)}),W(()=>(e(a),ae(S)),()=>{g(n,e(a)&&(g(S,e(a).pauseInfo)===null||ae(S)===void 0?void 0:ae(S).pauseTime))}),W(()=>(e(f),e(_),e(m),e(E),e(h),se(V()),e(i),se(y())),()=>{(U=>(g(f,U.points),g(_,U.textAnchor),g(m,U.textIndex),g(E,U.textPosition),g(h,U.backdrop)))(ie(V(),e(i),y()))}),W(()=>(se(u()),Lt),()=>{g(l,u().eventList.find(Lt))}),W(()=>(e(l),ae(P)),()=>{g(d,e(l)&&(g(P,e(l).attributes)===null||ae(P)===void 0?void 0:ae(P).attempt)>1)}),W(()=>(se(u()),e(n)),()=>{g(T,u().isPending||!!e(n))}),Se(),he();var B=Zn();ue(B,"height",L);var N=k(B);{var Q=U=>{var C=Jn();const ee=r(()=>e(n)?e(f)[1]-e(f)[0]:j()-2*p);ue(C,"height",L),M(()=>{ue(C,"y",y()-L/2),ue(C,"x",e(f)[0]),ue(C,"width",e(ee))}),s(U,C)};Z(N,U=>{e(T)&&U(Q)})}var ne=c(N);nt(ne,1,()=>e(f),kt,(U,C,ee)=>{var oe=Yn();const le=r(()=>e(f)[ee+1]),He=r(()=>e(m)===ee);var Te=re(oe);{var ze=ge=>{const Pe=r(()=>[e(C),y()]),je=r(()=>[e(le),y()]),Ie=r(()=>!!e(n)),me=r(()=>!!e(n)),$e=r(()=>ee===0&&u().lastEvent.classification==="Completed");qe(ge,{get startPoint(){return e(Pe)},get endPoint(){return e(je)},get category(){return u().category},get classification(){return u().lastEvent.classification},get pending(){return e(Ie)},get paused(){return e(me)},strokeWidth:I*2,get retried(){return e(d)},get scheduling(){return e($e)}})};Z(Te,ge=>{e(le)&&ge(ze)})}var ke=c(Te);{var z=ge=>{var Pe=Xn(),je=re(Pe);const Ie=r(()=>[e(C),y()]),me=r(()=>[j()-p,y()]),$e=r(()=>e(a)?e(a).attempt>1?"retry":"pending":u().category),Ce=r(()=>!!e(n));qe(je,{get startPoint(){return e(Ie)},get endPoint(){return e(me)},get category(){return e($e)},get classification(){return u().lastEvent.classification},pending:!0,get paused(){return e(Ce)},strokeWidth:I*2});var Ae=c(je);const Fe=r(()=>[e(C),y()]);_t(Ae,{get point(){return e(Fe)},get classification(){return u().lastEvent.classification},icon:"retry",r:I}),s(ge,Pe)};Z(ke,ge=>{!e(le)&&u().isPending&&!e(n)&&ge(z)})}var X=c(ke);{var K=ge=>{const Pe=r(()=>{var me,$e;return($e=(me=u())==null?void 0:me.userMetadata)==null?void 0:$e.summary}),je=r(()=>{var me;return Lr(u().initialEvent)?(me=u())==null?void 0:me.displayName:""}),Ie=r(()=>{var me;return e(J)?b("events.category.local-activity"):(me=u())==null?void 0:me.displayName});en(ge,{get value(){return e(Pe)},get prefix(){return e(je)},get fallback(){return e(Ie)},children:It,$$slots:{default:(me,$e)=>{const Ce=r(()=>$e.decodedValue),Ae=r(()=>e(a)&&!e(a).paused||e(d)?"retry":void 0);Qn(me,{get point(){return e(E)},get textAnchor(){return e(_)},get backdrop(){return e(h)},backdropHeight:I*2,config:tt,get icon(){return e(Ae)},children:(Fe,Je)=>{var Xe=We(),$t=re(Xe);{var yt=Le=>{var Ye=de();M(ot=>O(Ye,`${ot??""}
            ${e(a).attempt??""} / ${e(a).maximumAttempts||"∞"}
            • 
            ${e(Ce)??""}`),[()=>b("workflows.attempt")],r),s(Le,Ye)},Ge=(Le,Ye)=>{{var ot=Ze=>{var dt=de();M(()=>O(dt,`${e(l).attributes.attempt??""} • ${e(Ce)??""}`)),s(Ze,dt)},ar=(Ze,dt)=>{{var sr=Ke=>{var at=de();M(()=>O(at,e(J).value)),s(Ke,at)},ir=Ke=>{var at=de();M(()=>O(at,e(Ce))),s(Ke,at)};Z(Ze,Ke=>{e(J)?Ke(sr):Ke(ir,!1)},dt)}};Z(Le,Ze=>{e(d)?Ze(ot):Ze(ar,!1)},Ye)}};Z($t,Le=>{e(a)?Le(yt):Le(Ge,!1)})}s(Fe,Xe)},$$slots:{default:!0}})}}})};Z(X,ge=>{e(He)&&ge(K)})}var ve=c(X);const te=r(()=>[e(C),y()]),ye=r(()=>{var ge;return(ge=u().eventList[ee])==null?void 0:ge.classification}),ce=r(()=>e(n)&&ee!==0?"pause":e(J)?ct["local-activity"]:ct[u().category]);_t(ve,{get point(){return e(te)},get classification(){return e(ye)},get icon(){return e(ce)},r:I}),s(U,oe)}),w(B),lt("click",B,we),lt("keypress",B,we),s($,B),xe(),A()}var eo=Re('<g role="button" tabindex="0" class="relative cursor-pointer svelte-k9v32"><!><!><!><!><!></g>');function to($,t){_e(t,!1);const o=x(),A=x();let v=H(t,"workflow",8),i=H(t,"length",8),a=H(t,"y",8);const{radius:n,height:f,gutter:_}=tt;W(()=>{},()=>{g(o,_)}),W(()=>(e(o),se(i())),()=>{g(A,e(o)+i()-2*_)}),Se(),he();var m=eo();ue(m,"height",f);var E=k(m);const h=r(()=>[e(o),a()]),l=r(()=>[e(A),a()]),d=r(()=>Yt(v()));qe(E,{get startPoint(){return e(h)},get endPoint(){return e(l)},get classification(){return v().status},strokeWidth:n*2,get pending(){return v().isRunning},get delayed(){return e(d)}});var T=c(E);const S=r(()=>[e(o),a()]);_t(T,{get point(){return e(S)},get classification(){return v().status},r:n});var P=c(T);const y=r(()=>e(o)-n/2),u=r(()=>a()-n/2);De(P,{name:"workflow",get x(){return e(y)},get y(){return e(u)},width:n,height:n,strokeWidth:"4",class:"text-black"});var R=c(P);const G=r(()=>[e(A),a()]);_t(R,{get point(){return e(G)},get classification(){return v().status},r:n});var V=c(R);const j=r(()=>e(A)-n/2),D=r(()=>a()-n/2);De(V,{name:"workflow",get x(){return e(j)},get y(){return e(D)},width:n,height:n,strokeWidth:"4",class:"text-black"}),w(m),s($,m),xe()}var ro=Re("<!><!>",1),no=q('<div><div class="flex w-full justify-between text-xs"><p class="w-60 -translate-x-24 rotate-90"> </p> <p class="w-60 translate-x-24 rotate-90"> </p></div></div> <svg><!><!><!><!><!></svg>',1),oo=q('<div class="relative h-auto overflow-auto border border-t-0 border-subtle bg-primary"><!></div>');function nr($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(Jt,"$activeGroupHeight",o),i=()=>Y(Ue,"$eventStatusFilter",o),a=()=>Y(xt,"$fullEventHistory",o),n=()=>Y(Gr,"$activeGroups",o),f=()=>Y(st,"$eventFilterSort",o),_=()=>Y(ht,"$timeFormat",o),m=x(),E=x(),h=x(),l=x(),d=x(),T=x();var S=x();let P=H(t,"x",8,0),y=H(t,"y",8,0),u=H(t,"workflow",8),R=H(t,"groups",8),G=H(t,"viewportHeight",8),V=H(t,"readOnly",8,!1),j=H(t,"workflowTaskFailedError",8,void 0);const{height:D,gutter:F,radius:L}=tt;let p=x(0),I=x(0);const J=B=>{var N;g(I,(N=B==null?void 0:B.target)===null||N===void 0?void 0:N.scrollTop)};W(()=>(se(V()),v()),()=>{g(m,V()?0:v())}),W(()=>(se(R()),i()),()=>{g(E,wr(R(),i()))}),W(()=>(se(u()),ae(S),a()),()=>{g(h,!Yt(u())&&u().executionTime||(g(S,a()[0])===null||ae(S)===void 0?void 0:ae(S).eventTime)||u().startTime)}),W(()=>(e(E),e(m)),()=>{g(l,Math.max(D*(e(E).length+2),120)+e(m))}),W(()=>e(l),()=>{g(d,e(l)+120)}),W(()=>(n(),f(),e(m)),()=>{g(T,B=>{const N=n()===null||n()===void 0?void 0:n().filter(Q=>f()==="ascending"?parseInt(Q)<parseInt(B.id):parseInt(Q)>parseInt(B.id));return N!=null&&N.length?e(m):0})}),Se(),he();var ie=oo(),we=k(ie);Fn(we,{get workflow(){return u()},get startTime(){return e(h)},children:It,$$slots:{default:(B,N)=>{const Q=r(()=>N.endTime),ne=r(()=>N.duration);var U=no(),C=re(U);let ee;var oe=k(C),le=k(oe),He=k(le,!0);w(le);var Te=c(le,2),ze=k(Te,!0);w(Te),w(oe),w(C);var ke=c(C,2);let z;var X=k(ke);const K=r(()=>[F,e(l)]);qe(X,{startPoint:[F,0],get endPoint(){return e(K)},strokeWidth:L/2});var ve=c(X);const te=r(()=>[e(p)-F,0]),ye=r(()=>[e(p)-F,e(l)]);qe(ve,{get startPoint(){return e(te)},get endPoint(){return e(ye)},strokeWidth:L/2});var ce=c(ve);const ge=r(()=>e(p)-F+L/4);Vn(ce,{x1:F-L/4,get x2(){return e(ge)},get timelineHeight(){return e(l)},get startTime(){return e(h)},get duration(){return e(ne)}});var Pe=c(ce);to(Pe,{get workflow(){return u()},y:D,get length(){return e(p)}});var je=c(Pe);nt(je,3,()=>e(E),Ie=>Ie.id,(Ie,me,$e,Ce)=>{var Ae=ro();const Fe=r(()=>(e($e)+2)*D+e(T)(e(me)));var Je=re(Ae);{var Xe=Ge=>{var Le=We(),Ye=re(Le);Ht(Ye,()=>e(me).eventList.length,ot=>{Kn(ot,{get y(){return e(Fe)},get group(){return e(me)},get activeGroups(){return n()},get canvasWidth(){return e(p)},get startTime(){return e(h)},get endTime(){return e(Q)},get readOnly(){return V()}})}),s(Ge,Le)};Z(Je,Ge=>{(!G()||e(Fe)>e(I)-2*D&&e(Fe)<e(I)+G()*D)&&Ge(Xe)})}var $t=c(Je);{var yt=Ge=>{const Le=r(()=>e(Fe)+1.33*L);Gn(Ge,{get y(){return e(Le)},get group(){return e(me)},get canvasWidth(){return e(p)}})};Z($t,Ge=>{!V()&&n().includes(e(me).id)&&Ge(yt)})}s(Ie,Ae)}),w(ke),M((Ie,me,$e,Ce)=>{ee=Be(C,1,"pointer-events-none sticky top-[120px]",null,ee,Ie),O(He,me),O(ze,$e),ue(ke,"x",P()),ue(ke,"y",y()),ue(ke,"viewBox",`0 0 ${e(p)??""} ${e(d)??""}`),ue(ke,"height",e(d)),ue(ke,"width",e(p)),z=Be(ke,0,"-mt-4 svelte-ta6k80",null,z,Ce)},[()=>({invisible:!!n().length}),()=>Ve(e(h),_()),()=>Ve(e(Q),_()),()=>({error:j()})],r),s(B,U)}}}),w(ie),M(()=>mr(ie,G()?`max-height: ${G()}px;`:"")),Xt(ie,"clientWidth",B=>g(p,B)),lt("scroll",ie,J),s($,ie),xe(),A()}var ao=q('<div class="*:border-t-0 [&amp;>*:first-child]:border-t"><!></div>');function so($,t){var o=ao(),A=k(o);Me(A,t,"default",{},null),w(o),s($,o)}var io=q("<p> </p> <!>",1),lo=q("<p> </p> <!>",1),co=q('<div class="flex flex-col gap-2"><p> </p> <!> <!> <!></div>'),vo=q('<div class="w-full text-right text-xs" slot="summary"> </div>'),uo=q("<!> <!>",1);function or($,t){_e(t,!1);let o=H(t,"failure",8,void 0);he();var A=uo(),v=re(A);{var i=f=>{const _=r(()=>b("common.failure"));rr(f,{get title(){return e(_)},class:"text-sm",children:(m,E)=>{var h=co(),l=k(h),d=k(l,!0);w(l);var T=c(l,2);const S=r(()=>{var j;return((j=o())==null?void 0:j.message)||""}),P=r(()=>b("common.copy-icon-title")),y=r(()=>b("common.copy-success-icon-title"));pt(T,{get content(){return e(S)},language:"text",get copyIconTitle(){return e(P)},get copySuccessIconTitle(){return e(y)}});var u=c(T,2);{var R=j=>{var D=io(),F=re(D),L=k(F,!0);w(F);var p=c(F,2);const I=r(()=>b("common.copy-icon-title")),J=r(()=>b("common.copy-success-icon-title"));pt(p,{get content(){return o().source},language:"text",get copyIconTitle(){return e(I)},get copySuccessIconTitle(){return e(J)}}),M(ie=>O(L,ie),[()=>b("common.source")],r),s(j,D)};Z(u,j=>{var D;(D=o())!=null&&D.source&&j(R)})}var G=c(u,2);{var V=j=>{var D=lo(),F=re(D),L=k(F,!0);w(F);var p=c(F,2);const I=r(()=>b("common.copy-icon-title")),J=r(()=>b("common.copy-success-icon-title"));pt(p,{get content(){return o().stackTrace},language:"text",get copyIconTitle(){return e(I)},get copySuccessIconTitle(){return e(J)}}),M(ie=>O(L,ie),[()=>b("common.stack-trace")],r),s(j,D)};Z(G,j=>{var D;(D=o())!=null&&D.stackTrace&&j(V)})}w(h),M(j=>O(d,j),[()=>b("common.message")],r),s(m,h)},$$slots:{default:!0,summary:(m,E)=>{var h=vo(),l=k(h,!0);w(h),M(()=>{var d;return O(l,(d=o())==null?void 0:d.message)}),s(m,h)}}})};Z(v,f=>{o()&&f(i)})}var a=c(v,2);{var n=f=>{var _=We(),m=re(_);or(m,{get failure(){return o().cause}}),s(f,_)};Z(a,f=>{var _;(_=o())!=null&&_.cause&&f(n)})}s($,A),xe()}var fo=q('<div class="flex flex-col gap-2"><p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p></div>');function go($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(ht,"$timeFormat",o);let i=H(t,"pendingTask",8,void 0);he();const a=r(()=>b("workflows.pending-workflow-task"));rr($,{get title(){return e(a)},children:(n,f)=>{var _=fo(),m=k(_),E=k(m),h=c(E);Oe(h,{children:(F,L)=>{fe();var p=de();M(()=>O(p,i().state)),s(F,p)},$$slots:{default:!0}}),w(m);var l=c(m,2),d=k(l),T=c(d);Oe(T,{children:(F,L)=>{fe();var p=de();M(()=>O(p,i().attempt)),s(F,p)},$$slots:{default:!0}}),w(l);var S=c(l,2),P=k(S),y=c(P);Oe(y,{children:(F,L)=>{fe();var p=de();M(I=>O(p,I),[()=>Ve(i().originalScheduledTime,v())],r),s(F,p)},$$slots:{default:!0}}),w(S);var u=c(S,2),R=k(u),G=c(R);Oe(G,{children:(F,L)=>{fe();var p=de();M(I=>O(p,I),[()=>Ve(i().scheduledTime,v())],r),s(F,p)},$$slots:{default:!0}}),w(u);var V=c(u,2),j=k(V),D=c(j);Oe(D,{children:(F,L)=>{fe();var p=de();M(I=>O(p,I),[()=>Ve(i().startedTime,v())],r),s(F,p)},$$slots:{default:!0}}),w(V),w(_),M((F,L,p,I,J)=>{O(E,`${F??""} `),O(d,`${L??""} `),O(P,`${p??""} `),O(R,`${I??""} `),O(j,`${J??""} `)},[()=>b("common.state"),()=>b("common.attempt"),()=>b("workflows.original-scheduled-time"),()=>b("workflows.scheduled-time"),()=>b("workflows.started-time")],r),s(n,_)},$$slots:{default:!0}}),xe(),A()}var mo=q("<p> <!>.</p>"),po=q("<!> <!>",1),_o=q('<p> </p> <!> <div class="mt-2 flex w-full flex-col gap-0 overflow-hidden border border-danger"><div class="flex items-center justify-between gap-2 bg-danger px-2 py-2"><div class="flex items-center gap-2"> <!> <span class="font-semibold text-danger"> </span></div> </div> <div class="flex flex-col gap-2 bg-primary p-4"><!></div></div>',1);function xo($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(ht,"$timeFormat",o),i=()=>Y(Ur,"$relativeTime",o);let a=H(t,"error",8),n=H(t,"pendingTask",8,void 0),f=x();W(()=>se(a()),()=>{g(f,nn(a()))}),Se(),he();var _=We(),m=re(_);{var E=h=>{const l=r(()=>b(`typed-errors.${e(f)}.title`));Wt(h,{icon:"warning",intent:"warning",get title(){return e(l)},children:(d,T)=>{var S=_o(),P=re(S),y=k(P,!0);w(P);var u=c(P,2);{var R=B=>{var N=mo(),Q=k(N,!0),ne=c(Q);const U=r(()=>b(`typed-errors.${e(f)}.link`));tr(ne,{newTab:!0,get href(){return e(U)},children:(C,ee)=>{fe();var oe=de();M(le=>O(oe,le),[()=>b(`typed-errors.${e(f)}.action`)],r),s(C,oe)},$$slots:{default:!0}}),fe(),w(N),M(C=>O(Q,C),[()=>b("typed-errors.link-preface")],r),s(B,N)};Z(u,B=>{(e(f)==="NonDeterministicError"||e(f)==="BadSearchAttributes")&&B(R)})}var G=c(u,2),V=k(G),j=k(V),D=k(j),F=c(D);De(F,{get name(){return ct[a().category]}});var L=c(F,2),p=k(L,!0);w(L),w(j);var I=c(j);w(V);var J=c(V,2),ie=k(J);{var we=B=>{so(B,{children:(N,Q)=>{var ne=po(),U=re(ne);or(U,{get failure(){return a().attributes.failure}});var C=c(U,2);{var ee=oe=>{go(oe,{get pendingTask(){return n()}})};Z(C,oe=>{n()&&oe(ee)})}s(N,ne)},$$slots:{default:!0}})};Z(ie,B=>{var N;(N=a().attributes)!=null&&N.failure&&B(we)})}w(J),w(G),M((B,N,Q)=>{O(y,B),O(D,`${a().id??""} `),O(p,N),O(I,` ${Q??""}`)},[()=>b(`typed-errors.${e(f)}.description`),()=>{var B;return rn((B=a())==null?void 0:B.name)},()=>{var B;return Ve((B=a())==null?void 0:B.eventTime,v(),{relative:i()})}],r),s(d,S)},$$slots:{default:!0}})};Z(m,h=>{e(f)&&e(f)!=="ResetWorkflow"&&h(E)})}s($,_),xe(),A()}const wo=async($,t,o)=>{const A=dn(t),v=vn(t),i=un(t),a={...t,codec:{...t==null?void 0:t.codec,endpoint:A,passAccessToken:v,includeCredentials:i}},n=!1;try{const f=await ln($,zt(Qe).params.namespace,a,zt(er).accessToken,o,n);return cn(f,n)}catch{return $}};function Nt($,t,o){const A=At({events:$},null,2),v=document.createElement("a"),i=new Blob([A],{type:o});v.href=URL.createObjectURL(i),v.download=t,v.click()}const ko=async({namespace:$,workflowId:t,runId:o,settings:A,decodeSetting:v})=>{try{const i=await Zr({namespace:$,workflowId:t,runId:o,sort:"ascending"});if(v==="encoded")Nt(i,`${o}/events.json`,"text/plain");else{const a=[];for(const n of i){const f=await wo(n,A,v);a.push(f)}Nt(a,`${o}/events.json`,"text/plain")}}catch{console.error("Could not download event history")}};var ho=q('<div class="flex items-center space-x-4"><!></div>');function $o($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(Ir,"$parameters",o),i=()=>Y(fn,"$isCloud",o),a=x(),n=x(),{namespace:f,workflowId:_,runId:m}=v();W(()=>Mt,()=>{g(a,Mt({namespace:f,workflow:_,run:m}))}),W(()=>e(a),()=>{g(n,e(a)+".json")}),Se(),he();var E=We(),h=re(E);{var l=d=>{var T=ho(),S=k(T);tr(S,{icon:"external-link",class:"whitespace-nowrap",get href(){return e(n)},newTab:!0,"data-testid":"view-raw-event-history",children:(P,y)=>{fe();var u=de();M(R=>O(u,R),[()=>b("events.view-raw-history")],r),s(P,u)},$$slots:{default:!0}}),w(T),s(d,T)};Z(h,d=>{i()||d(l)})}s($,E),xe(),A()}var yo=q('<h3 slot="title"> </h3>'),bo=q("<!> <!> <!>",1),To=q('<div slot="content" class="flex flex-col gap-4"><!> <!></div>');function Eo($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(Qe,"$page",o),i=()=>Y(Ct,"$downloadEventHistorySetting",o);let a=H(t,"open",12,!1),n=H(t,"namespace",8),f=H(t,"workflowId",8),_=H(t,"runId",8);const m=()=>{a(!1),ko({namespace:n(),workflowId:f(),runId:_(),settings:v().data.settings,decodeSetting:i()})};he();const E=r(()=>b("common.download")),h=r(()=>b("common.cancel"));an($,{id:"download-history",large:!0,confirmType:"primary",get confirmText(){return e(E)},get cancelText(){return e(h)},get open(){return a()},set open(l){a(l)},$$events:{confirmModal:()=>m(),cancelModal:()=>a(!1)},$$slots:{title:(l,d)=>{var T=yo(),S=k(T,!0);w(T),M(P=>O(S,P),[()=>b("common.download-event-history-json")],r),s(l,T)},content:(l,d)=>{var T=To(),S=k(T);sn(S,{group:Ct,name:"decode-setting",class:"h-auto overflow-auto",children:(y,u)=>{var R=bo(),G=re(R);const V=r(()=>b("events.encoded"));Et(G,{id:"use-encoded-setting","data-testid":"use-encoded-setting-input",value:"encoded",get label(){return e(V)}});var j=c(G,2);const D=r(()=>b("events.decoded")),F=r(()=>b("events.decoded-description"));Et(j,{id:"use-decoded-setting","data-testid":"use-decoded-setting-input",value:"decoded",get label(){return e(D)},get description(){return e(F)}});var L=c(j,2);const p=r(()=>b("events.readable")),I=r(()=>b("events.readable-description"));Et(L,{id:"use-readable-setting","data-testid":"use-readable-setting-input",value:"readable",get label(){return e(p)},get description(){return e(I)}}),s(y,R)},$$slots:{default:!0}});var P=c(S,2);$o(P,{}),w(T),s(l,T)}},$$legacy:!0}),xe(),A()}const Po=["WorkflowExecutionFailed","WorkflowExecutionCompleted","WorkflowExecutionContinuedAsNew","WorkflowExecutionTimedOut","WorkflowExecutionCanceled","WorkflowExecutionTerminated"],Ao=$=>!!$.workflowExecutionStartedEventAttributes,Io=$=>{for(const t of Po)if($.eventType===t)return!0;return!1},Ho=$=>qt($)?$.attributes.input:Or($)?$.attributes.result===null?null:$.attributes.result:$.attributes,Wo=$=>{var a;let t,o,A=!1,v,i;for(const n of $)if(Ao(n)){v=n;continue}else if(Io(n)){i=n;continue}return v&&(t=At(((a=v==null?void 0:v.workflowExecutionStartedEventAttributes)==null?void 0:a.input)??null)),i&&(A=qt(i),o=At(Ho(i))),{input:t,results:o,contAsNew:A}};var So=q('<div class="flex flex-col gap-4 lg:flex-row" data-testid="input-and-result"><!> <!></div>');function Co($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(xt,"$fullEventHistory",o),i=()=>Y(wt,"$workflowRun",o),a=x(),n=x();W(()=>v(),()=>{g(a,Wo(v()))}),W(()=>i(),()=>{g(n,i().workflow.isRunning)}),Se(),he();var f=So(),_=k(f);const m=r(()=>b("workflows.input"));Dt(_,{get title(){return e(m)},get content(){return e(a).input},get isRunning(){return e(n)}});var E=c(_,2);const h=r(()=>b("workflows.result"));Dt(E,{get title(){return e(h)},get content(){return e(a).results},get isRunning(){return e(n)}}),w(f),s($,f),xe(),A()}var Fo=q('<div class="mb-4"><!></div>');function zo($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(wt,"$workflowRun",o),i=x(),a=x(),n=x();var f=x();W(()=>(e(i),e(a),v()),()=>{(h=>(g(i,h.workflow),g(a,h.workers)))(v())}),W(()=>(e(i),ae(f),e(a)),()=>{g(n,(e(i)===null||e(i)===void 0?void 0:e(i).isRunning)&&!(!(g(f,e(a)===null||e(a)===void 0?void 0:e(a).pollers)===null||ae(f)===void 0)&&ae(f).length))}),Se(),he();var _=We(),m=re(_);{var E=h=>{var l=Fo(),d=k(l);const T=r(()=>b("workflows.workflow-error-no-workers-title"));Wt(d,{icon:"warning",intent:"warning",get title(){return e(T)},children:(S,P)=>{fe();var y=de();M(u=>O(y,u),[()=>{var u;return b("workflows.workflow-error-no-workers-description",{taskQueue:(u=e(i))==null?void 0:u.taskQueue})}],r),s(S,y)},$$slots:{default:!0}}),w(l),gn(1,l,()=>mn,()=>({duration:200,delay:100})),s(h,l)};Z(m,h=>{e(n)&&h(E)})}s($,_),xe(),A()}var jo=q('<div><button class="focus-visible:outline-interactive w-full cursor-pointer hover:bg-interactive-secondary-hover" type="button"><div class="flex w-full flex-row items-center justify-between gap-2 pr-4"><!> <!> <div class="flex items-center gap-4"><!> <!></div></div></button> <div><!></div></div>');function Ro($,t){const o=rt(t,["children","$$slots","$$events","$$legacy"]),A=rt(o,["id","open","onToggle","icon"]);_e(t,!1);let v=H(t,"id",24,pn),i=H(t,"open",12,!1),a=H(t,"onToggle",8,void 0),n=H(t,"icon",8,void 0);const f=async()=>{a()&&await a()(),i(!i())};he();var _=jo(),m=k(_),E=k(m),h=k(E);Me(h,t,"title",{},null);var l=c(h,2);Me(l,t,"description",{},null);var d=c(l,2),T=k(d);Me(T,t,"action",{},null);var S=c(T,2);const P=r(()=>n()?n():i()?"arrow-down":"arrow-right");De(S,{get name(){return e(P)}}),w(d),w(E),w(m);var y=c(m,2);let u;var R=k(y);Me(R,t,"default",{get open(){return i()}},null),w(y),w(_),M(G=>{Be(_,1,`w-full ${A.class??""}`),ue(m,"id",`${v()??""}-trigger`),ue(m,"aria-expanded",i()),ue(m,"aria-controls",`${v()??""}-content`),ue(y,"id",`${v()??""}-content`),ue(y,"aria-labelledby",`${v()??""}-trigger`),u=Be(y,1,"block w-full bg-primary p-2",null,u,G)},[()=>({hidden:!i()})],r),lt("click",m,f),s($,_),xe()}var Lo=q("<!> <!>",1),Oo=q("<!> <!>",1),Mo=q('<p class="flex items-center gap-2"> <!></p>'),Go=q('<p class="flex items-center gap-2"> <!></p>'),Do=q('<p class="flex items-center gap-2"> <!></p>'),No=q('<p class="flex items-center gap-2"> <!></p>'),Uo=q('<p class="flex items-center gap-2"> <!></p>'),Vo=q('<div class="flex flex-col gap-2"><p> </p> <!></div>'),Bo=q('<div class="flex flex-col gap-2 pt-2"><!> <div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><p class="flex items-center gap-2"> <!></p> <!> <!> <!></div> <!> <!> <!></div> <!>',1);function Ut($,t){_e(t,!0);const[o,A]=Ee(),v=()=>Y(ht,"$timeFormat",o);var i,a,n,f;const _=be(()=>Ve(t.callback.lastAttemptCompleteTime,v())),m=be(()=>Ve(t.callback.nextAttemptScheduleTime,v())),E=be(()=>(i=t.callback===null||t.callback===void 0?void 0:t.callback.lastAttemptFailure)===null||i===void 0?void 0:i.message),h=be(()=>t.callback===null||t.callback===void 0?void 0:t.callback.blockedReason),l=be(()=>(n=(a=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||a===void 0?void 0:a.nexus)===null||n===void 0?void 0:n.url),d={Standby:b("nexus.callback.standby"),Scheduled:b("nexus.callback.scheduled"),"Backing Off":b("nexus.callback.backing-off"),Failed:b("nexus.callback.failed"),Succeeded:b("nexus.callback.succeeded")},T="Failed",S=be(()=>t.callback.state===T),P=be(()=>d[t.callback.state]||b("nexus.nexus-callback")),y=be(()=>((f=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||f===void 0?void 0:f.links)||[]),u=be(()=>!e(y).length&&!t.link&&e(l)),R=be(()=>e(S)?"error":"info");Wt($,{icon:"nexus",get intent(){return e(R)},get title(){return e(P)},children:(G,V)=>{var j=Bo(),D=re(j),F=k(D);{var L=z=>{var X=We(),K=re(X);nt(K,17,()=>e(y),ve=>{var te,ye,ce;return((ye=(te=ve.workflowEvent)==null?void 0:te.eventRef)==null?void 0:ye.eventId)||((ce=ve.workflowEvent)==null?void 0:ce.requestIdRef.requestId)},(ve,te,ye,ce)=>{var ge=Lo(),Pe=re(ge);gt(Pe,{get link(){return e(te)}});var je=c(Pe,2);const Ie=be(()=>b("nexus.link-namespace")),me=be(()=>Gt({namespace:e(te).workflowEvent.namespace}));gt(je,{get link(){return e(te)},get label(){return e(Ie)},get value(){return e(te).workflowEvent.namespace},get href(){return e(me)}}),s(ve,ge)}),s(z,X)},p=(z,X)=>{{var K=ve=>{var te=Oo(),ye=re(te);gt(ye,{get link(){return t.link}});var ce=c(ye,2);const ge=be(()=>b("nexus.link-namespace")),Pe=be(()=>Gt({namespace:t.link.workflowEvent.namespace}));gt(ce,{get link(){return t.link},get label(){return e(ge)},get value(){return t.link.workflowEvent.namespace},get href(){return e(Pe)}}),s(ve,te)};Z(z,ve=>{t.link&&ve(K)},X)}};Z(F,z=>{e(y).length?z(L):z(p,!1)})}var I=c(F,2),J=k(I),ie=k(J,!0),we=c(ie);Oe(we,{type:"subtle",children:(z,X)=>{fe();var K=de();M(()=>O(K,t.callback.state)),s(z,K)},$$slots:{default:!0}}),w(J);var B=c(J,2);{var N=z=>{var X=Mo(),K=k(X),ve=c(K);Oe(ve,{type:"subtle",children:(te,ye)=>{fe();var ce=de();M(()=>O(ce,t.callback.attempt)),s(te,ce)},$$slots:{default:!0}}),w(X),M(te=>O(K,`${te??""} `),[()=>b("common.attempt")]),s(z,X)};Z(B,z=>{t.callback.attempt&&z(N)})}var Q=c(B,2);{var ne=z=>{var X=Go(),K=k(X),ve=c(K);Oe(ve,{type:"subtle",children:(te,ye)=>{fe();var ce=de();M(()=>O(ce,e(_))),s(te,ce)},$$slots:{default:!0}}),w(X),M(te=>O(K,`${te??""} `),[()=>b("nexus.last-attempt-completed-time")]),s(z,X)};Z(Q,z=>{t.callback.lastAttemptCompleteTime&&z(ne)})}var U=c(Q,2);{var C=z=>{var X=Do(),K=k(X),ve=c(K);Oe(ve,{type:"subtle",children:(te,ye)=>{fe();var ce=de();M(()=>O(ce,e(m))),s(te,ce)},$$slots:{default:!0}}),w(X),M(te=>O(K,`${te??""} `),[()=>b("nexus.next-attempt-scheduled-time")]),s(z,X)};Z(U,z=>{t.callback.nextAttemptScheduleTime&&z(C)})}w(I);var ee=c(I,2);{var oe=z=>{var X=No(),K=k(X),ve=c(K);Oe(ve,{type:"subtle",children:(te,ye)=>{fe();var ce=de();M(()=>O(ce,e(l))),s(te,ce)},$$slots:{default:!0}}),w(X),M(te=>O(K,`${te??""} `),[()=>b("nexus.callback-url")]),s(z,X)};Z(ee,z=>{e(u)&&z(oe)})}var le=c(ee,2);{var He=z=>{var X=Uo(),K=k(X),ve=c(K);Oe(ve,{type:"subtle",children:(te,ye)=>{fe();var ce=de();M(()=>O(ce,e(h))),s(te,ce)},$$slots:{default:!0}}),w(X),M(te=>O(K,`${te??""} `),[()=>b("nexus.blocked-reason")]),s(z,X)};Z(le,z=>{e(h)&&z(He)})}var Te=c(le,2);{var ze=z=>{var X=Vo(),K=k(X),ve=k(K,!0);w(K);var te=c(K,2);const ye=be(()=>b("common.copy-icon-title")),ce=be(()=>b("common.copy-success-icon-title"));pt(te,{get content(){return e(E)},language:"text",get copyIconTitle(){return e(ye)},get copySuccessIconTitle(){return e(ce)}}),w(X),M(ge=>O(ve,ge),[()=>b("nexus.last-attempt-failure")]),s(z,X)};Z(Te,z=>{e(E)&&z(ze)})}w(D);var ke=c(D,2);_n(ke,()=>t.children??dr),M(z=>O(ie,z),[()=>b("common.state")]),s(G,j)},$$slots:{default:!0}}),xe(),A()}var qo=q('<div class="flex flex-col gap-2"></div>'),Qo=q('<p class="p-1" slot="title"> </p>'),Jo=q('<div class="py-2"><!></div>');function Xo($,t){_e(t,!0);const[o,A]=Ee(),v=()=>Y(xt,"$fullEventHistory",o);var i;const a=be(()=>v()[0]),n=be(()=>(i=e(a)===null||e(a)===void 0?void 0:e(a).links)===null||i===void 0?void 0:i[0]),f=be(()=>t.callbacks[0]);Ut($,{get callback(){return e(f)},get link(){return e(n)},children:(_,m)=>{var E=We(),h=re(E);{var l=d=>{var T=Jo(),S=k(T);Ro(S,{children:It,$$slots:{default:(P,y)=>{const u=be(()=>y.open);var R=We(),G=re(R);{var V=j=>{var D=qo();nt(D,21,()=>t.callbacks.slice(1),kt,(F,L)=>{Ut(F,{get callback(){return e(L)}})}),w(D),s(j,D)};Z(G,j=>{e(u)&&j(V)})}s(P,R)},title:(P,y)=>{var u=Qo(),R=k(u);w(u),M(()=>O(R,`View ${t.callbacks.length-1} other Callbacks`)),s(P,u)}}}),w(T),s(d,T)};Z(h,d=>{t.callbacks.length>1&&d(l)})}s(_,E)},$$slots:{default:!0}}),xe(),A()}var Yo=q("<!> <!> <!> <!> <!>",1),Zo=q('<div class="flex flex-col gap-0 px-4 pt-4 xl:px-8"><!> <div class="flex flex-col gap-2"><!> <!> <!></div></div> <div class="relative px-4 pb-24 xl:px-8"><div><h2> </h2> <div class="flex items-center gap-2"><!></div></div> <div class="flex w-full flex-col border-t border-subtle"><!> <!></div></div> <!>',1);function Ko($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(Qe,"$page",o),i=()=>Y(wt,"$workflowRun",o),a=()=>Y(st,"$eventFilterSort",o),n=()=>Y(et,"$eventViewType",o),f=()=>Y(Bt,"$filteredEventHistory",o),_=()=>Y(Hr,"$currentEventHistory",o),m=()=>Y(it,"$pauseLiveUpdates",o),E=()=>Y(Ft,"$minimizeEventView",o),h=x(),l=x(),d=x(),T=x(),S=x(),P=x(),y=x(),u=x(),R=x(),G=x();pr(()=>{Tt()});let V=x(!1);const j=()=>{e(S)?pe(st,"ascending"):pe(st,"descending")};W(()=>(e(h),v()),()=>{(z=>g(h,z.namespace))(v().params)}),W(()=>(e(l),i()),()=>{(z=>g(l,z.workflow))(i())}),W(()=>e(l),()=>{g(d,e(l)===null||e(l)===void 0?void 0:e(l).pendingActivities)}),W(()=>e(l),()=>{g(T,e(l)===null||e(l)===void 0?void 0:e(l).pendingNexusOperations)}),W(()=>a(),()=>{g(S,a()==="descending")}),W(()=>n(),()=>{g(P,n()==="compact")}),W(()=>(f(),e(d),e(T)),()=>{g(y,Kt(f(),"ascending",e(d),e(T)))}),W(()=>(e(S),e(y)),()=>{g(u,e(S)?[...e(y)].reverse():e(y))}),W(()=>(e(S),f()),()=>{g(R,e(S)?[...f()].reverse():f())}),W(()=>_(),()=>{g(G,on(_(),"ascending"))}),W(()=>(n(),Tt),()=>{n(),Tt()}),W(()=>(e(l),m()),()=>{!e(l).isRunning&&m()&&pe(it,!1)}),Se(),he();var D=Zo(),F=re(D),L=k(F);zo(L,{});var p=c(L,2),I=k(p);Co(I,{});var J=c(I,2);{var ie=z=>{const X=r(()=>{var K;return(K=e(l))==null?void 0:K.pendingWorkflowTask});xo(z,{get error(){return e(G)},get pendingTask(){return e(X)}})};Z(J,z=>{e(G)&&z(ie)})}var we=c(J,2);{var B=z=>{Xo(z,{get callbacks(){return e(l).callbacks}})};Z(we,z=>{var X,K;(K=(X=e(l))==null?void 0:X.callbacks)!=null&&K.length&&z(B)})}w(p),w(F);var N=c(F,2),Q=k(N);let ne;var U=k(Q),C=k(U,!0);w(U);var ee=c(U,2),oe=k(ee);br(oe,{children:(z,X)=>{var K=Yo(),ve=re(K);{var te=$e=>{const Ce=r(()=>e(S)?"descending":"ascending");vt($e,{get leadingIcon(){return e(Ce)},"data-testid":"zoom-in",size:"sm",$$events:{click:j},children:(Ae,Fe)=>{fe();var Je=de();M(()=>O(Je,e(S)?"Descending":"Ascending")),s(Ae,Je)},$$slots:{default:!0}})};Z(ve,$e=>{n()!=="json"&&$e(te)})}var ye=c(ve,2);const ce=r(()=>E()?"Timeline and Event History are collapsed to minimized height":"Timeline and Event History are expanded to full height");Vt(ye,{get text(){return e(ce)},top:!0,children:($e,Ce)=>{const Ae=r(()=>E()?"minimize":"expand");vt($e,{get leadingIcon(){return e(Ae)},"data-testid":"expandAll",size:"sm",$$events:{click:()=>pe(Ft,!E())},children:(Fe,Je)=>{fe();var Xe=de();M(()=>O(Xe,E()?"Minimized":"Expanded")),s(Fe,Xe)},$$slots:{default:!0}})},$$slots:{default:!0}});var ge=c(ye,2);Cn(ge,{get compact(){return e(P)},get minimized(){return E()}});var Pe=c(ge,2);const je=r(()=>!e(l).isRunning),Ie=r(()=>m()?"play":"pause");vt(Pe,{get disabled(){return e(je)},get leadingIcon(){return e(Ie)},"data-testid":"pause",class:"border-l-0",size:"sm",$$events:{click:()=>pe(it,!m())},children:($e,Ce)=>{fe();var Ae=de();M(()=>O(Ae,m()?"Unfreeze":"Freeze")),s($e,Ae)},$$slots:{default:!0}});var me=c(Pe,2);vt(me,{"data-testid":"download",leadingIcon:"download",size:"sm",$$events:{click:()=>g(V,!0)},children:($e,Ce)=>{fe();var Ae=de();M(Fe=>O(Ae,Fe),[()=>b("common.download")],r),s($e,Ae)},$$slots:{default:!0}}),s(z,K)},$$slots:{default:!0}}),w(ee),w(Q);var le=c(Q,2),He=k(le);const Te=r(()=>E()?360:void 0);nr(He,{get workflow(){return e(l)},get groups(){return e(u)},get workflowTaskFailedError(){return e(G)},get viewportHeight(){return e(Te)}});var ze=c(He,2);Pn(ze,{get groups(){return e(u)},get history(){return e(R)},get minimized(){return E()}}),w(le),w(N);var ke=c(N,2);Eo(ke,{get namespace(){return e(h)},get workflowId(){return e(l).id},get runId(){return e(l).runId},get open(){return e(V)},set open(z){g(V,z)},$$legacy:!0}),M((z,X)=>{ne=Be(Q,1,"flex flex-wrap items-center justify-between gap-2 bg-off-white/50 py-2 xl:gap-8 dark:bg-space-black/50 svelte-18jakp5",null,ne,z),O(C,X)},[()=>({"sticky-header":!E()}),()=>b("workflows.event-history")],r),s($,D),xe(),A()}var ea=q("<!> <!>",1);function ps($,t){_e(t,!1);const[o,A]=Ee(),v=()=>Y(Qe,"$page",o),i=v().params.workflow;he();var a=ea(),n=re(a);const f=r(()=>`${b("workflows.workflow-history")} | ${i}`);ur(n,{get title(){return e(f)},get url(){return v().url.href}});var _=c(n,2);Ko(_,{}),s($,a),xe(),A()}export{ps as component};
