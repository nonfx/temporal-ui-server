import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as _e,f as oe,t as G,d as r,g as e,e as T,c as v,r as y,b as xe,aP as Yt,l as A,a as Ae,s as f,m as _,aA as ie,ah as ce,n as ue,aR as Zt,i as $t,ax as ke,a9 as Kt}from"../chunks/CVkC3v6g.js";import{c as Pe,a,t as Q,b as ve,n as je}from"../chunks/CXa2DXXa.js";import{i as we}from"../chunks/B3G23GpA.js";import{a as Z,s as ye,b as ge,m as er}from"../chunks/B71MWTBs.js";import{p as Ve}from"../chunks/BlTZtavH.js";import{P as tr}from"../chunks/CzIAgOFi.js";import{t as h}from"../chunks/D2OY9xdY.js";import{s as O}from"../chunks/DUPvQxLd.js";import{i as ee}from"../chunks/DpQPgcBL.js";import{b as rr,C as nr,s as Ye,a as be,d as or}from"../chunks/01A5YHN4.js";import{b as sr}from"../chunks/BijhgWLC.js";import{l as ct,p as H}from"../chunks/BNtWe5Xb.js";import{E as ar,C as dt,L as De,T as Xe,D as vt,t as ir,g as lr}from"../chunks/B0QpijWW.js";import{e as ut}from"../chunks/FZ_CX87U.js";import{a as cr,s as Ze}from"../chunks/DrOJgH2Z.js";import{e as dr}from"../chunks/CwlRUMhX.js";import{b as vr}from"../chunks/DA1P5rYO.js";import{I as Ne}from"../chunks/BkKACGbj.js";import{g as ur,T as fr,a as nt}from"../chunks/CAVyGPUk.js";import{T as gr}from"../chunks/CbiwIFSL.js";import{t as pr}from"../chunks/Ds6tgvmq.js";import{W as mr}from"../chunks/BrgXuBnL.js";import{T as _r}from"../chunks/B_sngf1y.js";import{d as Tt,b as zt,a as xr,e as et,f as ft,j as Je,k as Le,c as Me,p as tt,l as wr,n as Et,m as Pt,i as kr}from"../chunks/DUeNOFto.js";import{w as gt}from"../chunks/DwKzMZUG.js";import{e as Ke,i as pt}from"../chunks/ojfNN_0P.js";import{w as hr,a as $r,g as At}from"../chunks/DaqIHZoW.js";import{C as ot}from"../chunks/DCzlPCxa.js";import{M as br}from"../chunks/Bcc0kF3M.js";import{M as yr,a as Tr,d as st}from"../chunks/CvY9EqqW.js";import{M as Er}from"../chunks/D0Q0k2XY.js";import{Z as It,h as _t,Q as Wt,v as Ht,m as Pr,_ as Ot,$ as Ar}from"../chunks/zKVhcdie.js";import{c as Ir,s as Lt,a as Mt,b as Wr,d as xt}from"../chunks/BV0i4uz9.js";import{t as Hr}from"../chunks/CeIuC_4N.js";import{i as Sr}from"../chunks/Db8GgboF.js";import{k as bt}from"../chunks/DLaUIK3W.js";import{b as Gt}from"../chunks/BqDms8M3.js";import{f as Ge,t as mt,r as Cr}from"../chunks/BogN5CJj.js";import{x as it,k as Dt}from"../chunks/B6L3uVBf.js";import{b as Fr,M as Rr,c as at}from"../chunks/VQB7wCzs.js";import{W as jr}from"../chunks/BJSgUHYk.js";import{B as zr}from"../chunks/DSyaFiGS.js";import{a as Or}from"../chunks/Bp8CRxSd.js";import{g as Nt}from"../chunks/D6JOBTct.js";import{f as Lr,b as Mr}from"../chunks/Cxa78Yyx.js";import{B as Gr}from"../chunks/CSM2YGqK.js";import{b as Dr}from"../chunks/v6kOUW79.js";import{A as yt}from"../chunks/Bao8vGeu.js";import{L as Vt}from"../chunks/LH3G9Yqj.js";import{s as Nr}from"../chunks/ByTIZu23.js";import{g as Vr,a as Ur}from"../chunks/D8m59sFJ.js";import{A as Ut}from"../chunks/BkPUCctl.js";import{C as lt}from"../chunks/yMkT9UdU.js";import{B as Re}from"../chunks/svNy4rTM.js";import{M as Br}from"../chunks/CUiYMM6x.js";import{R as qr,a as wt}from"../chunks/D1HTL-9-.js";import{a as Qr}from"../chunks/BaP1uuNe.js";import{c as Jr,d as Xr}from"../chunks/Rj7H03Qd.js";import{g as Yr,b as Zr,a as Kr}from"../chunks/tA8Lu2_-.js";import{s as ht}from"../chunks/CTBtQUu0.js";import{i as en}from"../chunks/C4ry1RZU.js";import{b as St,a as Ct}from"../chunks/dAqOlFj6.js";import{I as Ft}from"../chunks/-YXS4A6y.js";import{t as tn,a as rn}from"../chunks/D8zUdvDs.js";import{A as nn}from"../chunks/DTTgcOIt.js";import{s as on}from"../chunks/Cp2--30W.js";var sn=Q('<span class="hidden md:block"><!></span>'),an=Q('<div class="flex items-center gap-2"><!> <!></div>');function kt($,t){const n=cr(t),w=ct(t,["children","$$slots","$$events","$$legacy"]),d=ct(w,["class","icon","group","href","base","active","tooltip"]);_e(t,!1);const[l,o]=ye(),s=()=>Z(Ve,"$page",l);let p=H(t,"class",8,""),x=H(t,"icon",8,null),m=H(t,"group",24,()=>ur("group")),E=H(t,"href",8,""),k=H(t,"base",24,E),c=H(t,"active",8,!1),i=H(t,"tooltip",8,"");we();var u=Pe(),W=oe(u);dr(W,()=>E()?"a":"button",!1,(P,S)=>{let C;G((N,B)=>C=rr(P,C,{class:N,href:E()?E()+s().url.search:null,role:"button",tabindex:"0",...d,[nr]:B},"svelte-s3kcun"),[()=>pr("toggle-button",p()),()=>({group:m(),active:E()?s().url.pathname.includes(k()):c(),disabled:d.disabled})],r),ut("click",P,function(N){vr.call(this,t,N)});const M=r(()=>!i());gr(S,{get hide(){return e(M)},get text(){return i()},top:!0,children:(N,B)=>{var R=Pe(),j=oe(R);{var I=g=>{var b=an(),q=T(b);Ne(q,{get name(){return x()}});var re=v(q,2);{var fe=U=>{var D=sn(),V=T(D);Ze(V,t,"default",{},null),y(D),a(U,D)};ee(re,U=>{n.default&&U(fe)})}y(b),a(g,b)},z=g=>{var b=Pe(),q=oe(b);Ze(q,t,"default",{},null),a(g,b)};ee(j,g=>{x()?g(I):g(z,!1)})}a(N,R)},$$slots:{default:!0}})}),a($,u),xe(),o()}var ln=Q('<div class="flex"><!></div>');function cn($,t){_e(t,!1),Yt("group",!0),we();var n=ln(),w=T(n);Ze(w,t,"default",{},null),y(n),a($,n),xe()}function dn($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(zt,"$filteredEventHistory",n),l=()=>Z(Tt,"$decodeEventHistory",n);we(),mr($,{get events(){return d()},$$slots:{decode:(o,s)=>{const p=r(()=>h("events.decode-event-history"));_r(o,{slot:"decode",get label(){return e(p)},id:"decode-event-history","data-testid":"decode-event-history-toggle",get checked(){return er(),l()},set checked(x){ge(Tt,x)},$$legacy:!0})}}}),xe(),w()}var vn=Q("<!> <!> <!>",1),un=Q('<div class="border-t border-subtle px-4"><!></div>'),fn=Q('<div data-testid="event-summary-table"><!></div>'),gn=Q('<div class="flex items-center justify-end gap-4 pt-4 lg:pt-8"><div class="flex items-center gap-2 px-4"><!></div></div> <!>',1);function pn($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(gt,"$workflowRun",n),l=()=>Z(et,"$eventFilterSort",n),o=()=>Z(ft,"$fullEventHistory",n),s=()=>Z(Je,"$eventViewType",n),p=()=>Z(Ve,"$page",n),x=_(),m=_(),E=_(),k=_(),c=_(),i=_(),u=_();var W=_(),P=_(),S=_(),C=_();let M=H(t,"history",8),N=H(t,"groups",8),B=H(t,"minimized",8,!0);const R=()=>{ge(Je,"feed")},j=()=>{ge(Je,"compact")},I=()=>{ge(Je,"json")};A(()=>(e(x),d()),()=>{(D=>f(x,D.workflow))(d())}),A(()=>l(),()=>{f(m,l()==="descending")}),A(()=>o(),()=>{f(E,!o().length)}),A(()=>s(),()=>{f(k,s()==="compact")}),A(()=>(ie(P),ie(W),p(),ie(C),ie(S)),()=>{ge(xr,!(f(P,f(W,p().url)===null||ie(W)===void 0?void 0:ie(W).searchParams)===null||ie(P)===void 0)&&ie(P).get("category")?f(C,f(S,p().url)===null||ie(S)===void 0?void 0:ie(S).searchParams)===null||ie(C)===void 0?void 0:ie(C).get("category").split(","):void 0)}),A(()=>e(x),()=>{f(c,e(x).pendingActivities)}),A(()=>e(x),()=>{f(i,e(x).pendingNexusOperations)}),A(()=>(e(k),ce(N()),e(m),e(i),e(c),ce(M())),()=>{f(u,e(k)?N():e(m)?[...e(i),...e(c),...M()]:[...M(),...e(c),...e(i)])}),Ae(),we();var z=gn(),g=oe(z),b=T(g),q=T(b);cn(q,{children:(D,V)=>{var ne=vn(),te=oe(ne);const L=r(()=>s()==="feed");kt(te,{get active(){return e(L)},"data-testid":"feed",icon:"feed",class:"h-10",$$events:{click:R},children:(Te,ze)=>{ue();var le=ve("All");a(Te,le)},$$slots:{default:!0}});var se=v(te,2);const ae=r(()=>s()==="compact");kt(se,{get active(){return e(ae)},"data-testid":"compact",icon:"compact",class:"h-10",$$events:{click:j},children:(Te,ze)=>{ue();var le=ve("Compact");a(Te,le)},$$slots:{default:!0}});var pe=v(se,2);const We=r(()=>s()==="json");kt(pe,{get active(){return e(We)},"data-testid":"json",icon:"json",class:"h-10",$$events:{click:I},children:(Te,ze)=>{ue();var le=ve("JSON");a(Te,le)},$$slots:{default:!0}}),a(D,ne)},$$slots:{default:!0}}),y(b),y(g);var re=v(g,2);{var fe=D=>{var V=un(),ne=T(V);dn(ne,{}),y(V),a(D,V)},U=D=>{var V=fn(),ne=T(V);ar(ne,{get updating(){return e(E)},get items(){return e(u)},get groups(){return N()},get compact(){return e(k)},get minimized(){return B()}}),y(V),a(D,V)};ee(re,D=>{s()==="json"?D(fe):D(U,!1)})}a($,z),xe(),w()}const mn=$=>$==null?void 0:$.nexus;var _n=Q('<span class="hidden text-sm md:block"> </span>'),xn=Q('<div slot="leading"><!></div>'),wn=Q("<!> <!> <!> <!> <!>",1),kn=Q("<!> <!>",1);function hn($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(Hr,"$temporalVersion",n),l=()=>Z(Ve,"$page",n),o=()=>Z(Le,"$eventTypeFilter",n),s=()=>Z(Me,"$eventStatusFilter",n),p=()=>Z(Je,"$eventViewType",n),x=_(),m=_(),E=_();var k=_();let c=H(t,"compact",8,!1),i=H(t,"minimized",8,!0),u=hr(!1);const W=({value:P})=>{Ir(),ge(Le,o().some(S=>S===P)?o().filter(S=>S!==P):[...o(),P])};A(()=>(ce(c()),_t),()=>{f(x,c()?It.map(P=>P.value):_t.map(P=>P.value))}),A(()=>(ce(c()),dt),()=>{f(m,[...(c()?It:_t).map(P=>({...P,label:h(P.label),icon:dt[P.value],description:h(P.description)}))])}),A(()=>(d(),e(m)),()=>{Sr("1.21.0",d())&&f(m,e(m).filter(({value:P})=>P!=="update"))}),A(()=>(ie(k),l(),e(m)),()=>{mn(f(k,l().data.systemInfo)===null||ie(k)===void 0?void 0:ie(k).capabilities)||f(m,e(m).filter(({value:P})=>P!=="nexus"))}),A(()=>(o(),e(x)),()=>{f(E,o().length<e(x).length)}),Ae(),we(),yr($,{open:u,children:(P,S)=>{var C=kn(),M=oe(C);br(M,{controls:"status-menu",children:(R,j)=>{var I=_n(),z=T(I,!0);y(I),G(g=>O(z,g),[()=>h("common.filter")],r),a(R,I)},$$slots:{default:!0,leading:(R,j)=>{var I=xn();let z;var g=T(I);const b=r(()=>e(E)&&"pt-0.5 text-white");Ne(g,{name:"filter",get class(){return e(b)}}),y(I),G(q=>z=Ye(I,1,"flex h-6 w-6 flex-col items-center justify-center rounded-full transition-colors duration-200",null,z,q),[()=>({"bg-interactive":e(E)})],r),a(R,I)}}});var N=v(M,2);const B=r(()=>i()?"top-right":"right");Tr(N,{id:"event-type-menu",keepOpen:!0,get position(){return e(B)},class:"w-[220px] md:w-[360px]",children:(R,j)=>{var I=wn(),z=oe(I);const g=r(()=>h("common.all"));st(z,{get"data-testid"(){return e(g)},$$events:{click:()=>{ge(Le,e(x)),ge(Me,!1)}},children:(V,ne)=>{ue();var te=ve();G(L=>O(te,L),[()=>h("common.all")],r),a(V,te)},$$slots:{default:!0,leading:(V,ne)=>{const te=r(()=>!s()&&o().length===e(x).length),L=r(()=>h("common.all"));ot(V,{slot:"leading",get checked(){return e(te)},get label(){return e(L)},labelHidden:!0,$$events:{change:()=>{ge(Le,e(x)),ge(Me,!1)}}})}}});var b=v(z,2);{var q=V=>{const ne=r(()=>h("common.pending-and-failed")),te=r(()=>h("common.pending-and-failed-description"));st(V,{get"data-testid"(){return e(ne)},get description(){return e(te)},class:"items-start",$$events:{click:()=>{ge(Le,e(x)),ge(Me,!s())}},children:(L,se)=>{ue();var ae=ve();G(pe=>O(ae,pe),[()=>h("common.pending-and-failed")],r),a(L,ae)},$$slots:{default:!0,leading:(L,se)=>{const ae=r(()=>h("common.all"));ot(L,{slot:"leading",get checked(){return s()},get label(){return e(ae)},labelHidden:!0,$$events:{change:()=>{ge(Le,e(x)),ge(Me,!s())}}})}}})};ee(b,V=>{p()!=="json"&&V(q)})}var re=v(b,2);const fe=r(()=>h("common.none"));st(re,{get"data-testid"(){return e(fe)},$$events:{click:()=>{ge(Le,[]),ge(Me,!1)}},children:(V,ne)=>{ue();var te=ve();G(L=>O(te,L),[()=>h("common.none")],r),a(V,te)},$$slots:{default:!0,leading:(V,ne)=>{const te=r(()=>!s()&&!o().length),L=r(()=>h("common.none"));ot(V,{slot:"leading",get checked(){return e(te)},get label(){return e(L)},labelHidden:!0,$$events:{change:()=>{ge(Le,[]),ge(Me,!1)}}})}}});var U=v(re,2);Er(U);var D=v(U,2);Ke(D,1,()=>e(m),pt,(V,ne)=>{st(V,{get"data-testid"(){return e(ne).label},get description(){return e(ne).description},class:"items-start",$$events:{click:()=>{W(e(ne))}},children:(te,L)=>{ue();var se=ve();G(()=>O(se,e(ne).label)),a(te,se)},$$slots:{default:!0,leading:(te,L)=>{const se=r(()=>o().some(ae=>ae===e(ne).value));ot(te,{slot:"leading",get checked(){return e(se)},get label(){return e(ne).label},labelHidden:!0,$$events:{click:()=>W(e(ne))}})}}})}),a(R,I)},$$slots:{default:!0}}),a(P,C)},$$slots:{default:!0}}),xe(),w()}function $n($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(tt,"$pauseLiveUpdates",n),l=_(),o=_();let s=H(t,"workflow",8),p=H(t,"startTime",8);const x=()=>{const u=new Date;return u.setSeconds(u.getSeconds()+1),u};let m;const E=u=>{u&&(clearInterval(m),m=null)},k=u=>{u?(clearInterval(m),m=null):!m&&s().isRunning&&(m=setInterval(()=>{f(l,x())},1e3))};$r(()=>{clearInterval(m),m=null,ge(tt,!1)}),A(()=>ce(s()),()=>{f(l,(s()===null||s()===void 0?void 0:s().endTime)||x())}),A(()=>(ce(p()),e(l)),()=>{f(o,it({start:p(),end:e(l),onlyUnderSecond:!1}))}),A(()=>ce(s()),()=>{E(s().endTime)}),A(()=>d(),()=>{k(d())}),Ae(),we();var c=Pe(),i=oe(c);Ze(i,t,"default",{get endTime(){return e(l)},get duration(){return e(o)}},null),a($,c),xe(),w()}var bn=Q("<div><!></div>");function yn($,t){const n=ct(t,["children","$$slots","$$events","$$legacy"]),w=ct(n,["namespace","workflowId","runId","viewportHeight","onLoad"]);_e(t,!1);let d=H(t,"namespace",8),l=H(t,"workflowId",8),o=H(t,"runId",8,""),s=H(t,"viewportHeight",8,360),p=H(t,"onLoad",8,()=>{});const x=async()=>{const[c,i]=await Promise.all([Gr({namespace:d(),workflowId:l(),runId:o()}),Lr({namespace:d(),workflowId:l(),runId:o()})]);return{workflow:c.workflow,history:i}},m=(c,i)=>{var u;p()();const W=(u=c==null?void 0:c.pendingActivities)!==null&&u!==void 0?u:[];return Nt(i,"ascending",W)};we();var E=Pe(),k=oe(E);Or(k,x,null,(c,i)=>{var u=r(()=>{var{workflow:N,history:B}=e(i);return{workflow:N,history:B}}),W=r(()=>e(u).workflow),P=r(()=>e(u).history),S=bn(),C=T(S);const M=r(()=>m(e(W),e(P)));Bt(C,{get viewportHeight(){return s()},get workflow(){return e(W)},get groups(){return e(M)},readOnly:!0}),y(S),G(()=>Ye(S,1,`cursor-pointer overflow-auto ${w.class??""}`)),a(c,S)}),a($,E),xe()}var Tn=Q('<div class="flex items-center gap-1"><!> </div>'),En=Q(" <!>",1),Pn=Q('<div class="surface-primary p-4"><div class="font-medium leading-4 text-secondary">Child Workflow</div> <!></div>'),An=je('<g role="button" tabindex="0" class="relative z-50 svelte-1gmju38"><foreignObject><div class="flex flex-col"><div class="relative flex h-full items-center justify-between bg-slate-50 text-sm dark:bg-slate-800"><div class="flex h-full items-center gap-4 px-2"><!> <!></div> <div class="flex items-center gap-4"><!></div></div> <div class="surface-primary"><!></div> <!></div></foreignObject></g>');function In($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(Ve,"$page",n),l=_(),o=_(),s=_(),p=_(),x=_(),m=_(),E=_();var k=_(),c=_();let i=H(t,"group",8),u=H(t,"canvasWidth",8),W=H(t,"x",8,0),P=H(t,"y",8),S=_();const C=L=>{ge(Mt,L)},M=async()=>{await Zt(),f(l,e(S))};A(()=>e(S),()=>{f(l,e(S)||0)}),A(()=>e(l),()=>{C(e(l)||0)}),A(()=>ce(i()),()=>{f(o,(i()===null||i()===void 0?void 0:i().finalClassification)||(i()===null||i()===void 0?void 0:i().classification))}),A(()=>(e(s),d()),()=>{(L=>f(s,L.namespace))(d().params)}),A(()=>ce(u()),()=>{f(p,u())}),A(()=>ce(i()),()=>{f(x,i().displayName)}),A(()=>(ce(i()),Wt),()=>{f(m,i()&&i().eventList.find(Wt))}),A(()=>(ie(k),ce(i()),ie(c)),()=>{f(E,Dt({start:f(k,i()===null||i()===void 0?void 0:i().initialEvent)===null||ie(k)===void 0?void 0:ie(k).eventTime,end:f(c,i()===null||i()===void 0?void 0:i().lastEvent)===null||ie(c)===void 0?void 0:ie(c).eventTime,includeMilliseconds:!0}))}),A(()=>(ce(i()),h),()=>{!(i()===null||i()===void 0)&&i().pendingActivity&&(i().pendingActivity.paused?f(o,h("workflows.paused")):i().pendingActivity.attempt>1?f(o,h("events.event-classification.retrying")):f(o,h("events.event-classification.pending")))}),Ae(),we();var N=An(),B=T(N),R=T(B),j=T(R),I=T(j),z=T(I);{var g=L=>{jr(L,{get status(){return e(o)}})};ee(z,L=>{e(o)&&L(g)})}var b=v(z),q=v(b);{var re=L=>{var se=Tn(),ae=T(se);Ne(ae,{name:"clock"});var pe=v(ae);y(se),G(()=>O(pe,` ${e(E)??""}`)),a(L,se)};ee(q,L=>{e(E)&&L(re)})}y(I);var fe=v(I,2),U=T(fe);zr(U,{variant:"ghost",size:"xs",$$events:{click:()=>Lt(i())},children:(L,se)=>{ue();var ae=En(),pe=oe(ae),We=v(pe);Ne(We,{name:"close"}),G(Te=>O(pe,`${Te??""} `),[()=>h("common.close")],r),a(L,ae)},$$slots:{default:!0}}),y(fe),y(j);var D=v(j,2),V=T(D);Fr(V,{get group(){return i()},get event(){return i().initialEvent}}),y(D);var ne=v(D,2);{var te=L=>{var se=Pn(),ae=v(T(se),2);bt(ae,()=>i().eventList.length,pe=>{yn(pe,{get namespace(){return e(s)},get workflowId(){return e(m).attributes.workflowExecution.workflowId},get runId(){return e(m).attributes.workflowExecution.runId},viewportHeight:320,class:"surface-primary overflow-x-hidden border-t border-subtle",onLoad:M})}),y(se),a(L,se)};ee(ne,L=>{e(m)&&L(te)})}y(R),y(B),y(N),G(()=>{be(B,"x",W()),be(B,"y",P()),be(B,"width",e(p)),be(B,"height",e(l)),O(b,` ${e(x)??""} `)}),Gt(R,"offsetHeight",L=>f(S,L)),a($,N),xe(),w()}var Wn=je('<text fill="#fff" font-size="12" class="svelte-1huxcs7"> </text>'),Hn=je("<!><!>",1),Sn=je("<!><!>",1);function Cn($,t){_e(t,!1);const n=_(),w=_();let d=H(t,"x1",8,0),l=H(t,"x2",8,1e3),o=H(t,"timelineHeight",8,1e3),s=H(t,"startTime",8),p=H(t,"duration",8);const{radius:x}=Xe,m=20;A(()=>(ce(l()),ce(d())),()=>{f(n,l()-d())}),A(()=>e(n),()=>{f(w,e(n)/m)}),Ae(),we();var E=Sn(),k=oe(E);const c=r(()=>[d(),o()]),i=r(()=>[d()+e(n),o()]);De(k,{strokeWidth:x/2,get startPoint(){return e(c)},get endPoint(){return e(i)}});var u=v(k);Ke(u,1,()=>Array(m),pt,(W,P,S)=>{var C=Hn();const M=r(()=>d()+S*e(w)),N=r(()=>o()+x*2);var B=oe(C);{var R=z=>{const g=r(()=>[e(M),0]),b=r(()=>[e(M),o()]);De(z,{strokeWidth:.5,get startPoint(){return e(g)},get endPoint(){return e(b)}})};ee(B,z=>{S!==0&&z(R)})}var j=v(B);{var I=z=>{var g=Wn(),b=T(g,!0);y(g),G(q=>{be(g,"transform",`rotate(90, ${e(M)??""}, ${e(N)??""})`),be(g,"x",e(M)-x),be(g,"y",e(N)),O(b,q)},[()=>Dt({start:s(),end:new Date(new Date(s().toString()).getTime()+p()/m*S),includeMilliseconds:p()/m<1e3})],r),a(z,g)};ee(j,z=>{S!==0&&z(I)})}a(W,C)}),a($,E),xe()}var Fn=je("<text><!></text>"),Rn=je("<!><!><!>",1);function jn($,t){_e(t,!1);const n=_(),w=_(),d=_(),l=_(),o=_(),s=_();var p=_();let x=H(t,"point",24,()=>[0,0]),m=H(t,"category",8,void 0),E=H(t,"status",8,"none"),k=H(t,"fontSize",8,"13px"),c=H(t,"fontWeight",8,"400"),i=H(t,"textAnchor",8,"start"),u=H(t,"backdrop",8,!1),W=H(t,"backdropHeight",8,0),P=H(t,"icon",8,void 0),S=H(t,"config",8,void 0),C=H(t,"label",8,!1),M=_();A(()=>(e(n),e(w),ce(x())),()=>{(g=>(f(n,g[0]),f(w,g[1])))(x())}),A(()=>(ce(P()),ce(S())),()=>{f(d,P()&&S())}),A(()=>(ie(p),e(M)),()=>{f(l,(f(p,e(M)===null||e(M)===void 0?void 0:e(M).getBBox())===null||ie(p)===void 0?void 0:ie(p).width)||0)}),A(()=>(e(d),e(l)),()=>{f(o,e(d)?e(l)+36:e(l)+12)}),A(()=>(e(d),ce(i()),e(n),ce(S())),()=>{f(s,e(d)&&i()==="start"?e(n)+S().radius*2:e(n))}),Ae(),we();var N=Rn(),B=oe(N);{var R=g=>{const b=r(()=>[e(n)-W(),e(w)]),q=r(()=>[e(n)+e(o),e(w)]);De(g,{get startPoint(){return e(b)},get endPoint(){return e(q)},get status(){return E()},get strokeWidth(){return W()}})};ee(B,g=>{u()&&g(R)})}var j=v(B);{var I=g=>{const b=r(()=>i()==="end"?e(n)-e(l)-W():e(n)),q=r(()=>e(w)-8),re=r(()=>u()?"text-white":"text-primary");Ne(g,{get name(){return P()},get x(){return e(b)},get y(){return e(q)},get class(){return e(re)}})};ee(j,g=>{e(d)&&g(I)})}var z=v(j);bt(z,()=>e(s),g=>{var b=Fn();let q;var re=T(b);Ze(re,t,"default",{},null),y(b),Dr(b,fe=>f(M,fe),()=>e(M)),G(fe=>{q=Ye(b,0,`cursor-pointer select-none outline-none ${m()??""} text-primary`,"svelte-1kes4n8",q,fe),be(b,"x",e(s)),be(b,"y",e(w)+1),be(b,"font-size",k()),be(b,"font-weight",c()),be(b,"text-anchor",i())},[()=>({label:C(),backdrop:u()})],r),a(g,b)}),a($,N),xe()}var zn=je("<!><!>",1),On=je("<!><!><!><!>",1),Ln=je('<g role="button" tabindex="0" class="relative cursor-pointer svelte-1gmju38"></g>');function Mn($,t){_e(t,!1);const n=_(),w=_(),d=_(),l=_(),o=_(),s=_(),p=_(),x=_(),m=_(),E=_();var k=_(),c=_();let i=H(t,"y",8,0),u=H(t,"group",8),W=H(t,"activeGroups",24,()=>[]),P=H(t,"startTime",8),S=H(t,"endTime",8),C=H(t,"canvasWidth",8),M=H(t,"active",12,!0),N=H(t,"readOnly",8,!1);const{height:B,gutter:R,radius:j}=Xe,I=(b,q,re)=>{const fe=it({start:P(),end:b,onlyUnderSecond:!1}),U=u().eventList.map(L=>{const ae=it({start:P(),end:L.eventTime,onlyUnderSecond:!1})/fe;return Math.round(ae*q)+R});if(e(d)){const se=it({start:P(),end:e(d),onlyUnderSecond:!1})/fe,ae=Math.round(se*q)+R;U.push(ae)}const{textAnchor:D,textIndex:V,textPosition:ne,backdrop:te}=ir(U,re,q,u().isPending,Xe);return{points:U,textAnchor:D,textIndex:V,textPosition:ne,backdrop:te}},z=()=>{N()||Lt(u())};A(()=>ce(C()),()=>{f(n,C()-2*R)}),A(()=>(ce(W()),ce(u())),()=>{M(!W().length||W().includes(u().id))}),A(()=>ce(u()),()=>{f(w,u()===null||u()===void 0?void 0:u().pendingActivity)}),A(()=>(e(w),ie(k)),()=>{f(d,e(w)&&(f(k,e(w).pauseInfo)===null||ie(k)===void 0?void 0:ie(k).pauseTime))}),A(()=>(e(l),e(o),e(s),e(p),e(x),ce(S()),e(n),ce(i())),()=>{(b=>(f(l,b.points),f(o,b.textAnchor),f(s,b.textIndex),f(p,b.textPosition),f(x,b.backdrop)))(I(S(),e(n),i()))}),A(()=>(ce(u()),Ht),()=>{f(m,u().eventList.find(Ht))}),A(()=>(e(m),ie(c)),()=>{f(E,e(m)&&(f(c,e(m).attributes)===null||ie(c)===void 0?void 0:ie(c).attempt)>1)}),Ae(),we();var g=Ln();be(g,"height",B),Ke(g,5,()=>e(l),pt,(b,q,re)=>{var fe=On();const U=r(()=>e(l)[re+1]),D=r(()=>e(s)===re);var V=oe(fe);{var ne=le=>{const F=r(()=>[e(q),i()]),J=r(()=>[e(U),i()]),Y=r(()=>!!e(d)),K=r(()=>!!e(d)),X=r(()=>re===0&&u().lastEvent.classification==="Completed");De(le,{get startPoint(){return e(F)},get endPoint(){return e(J)},get category(){return u().category},get classification(){return u().lastEvent.classification},get pending(){return e(Y)},get paused(){return e(K)},strokeWidth:j*2,get retried(){return e(E)},get scheduling(){return e(X)}})};ee(V,le=>{e(U)&&le(ne)})}var te=v(V);{var L=le=>{var F=zn(),J=oe(F);const Y=r(()=>[e(q),i()]),K=r(()=>[C()-R,i()]),X=r(()=>e(w)?e(w).attempt>1?"retry":"pending":u().category),me=r(()=>!!e(d));De(J,{get startPoint(){return e(Y)},get endPoint(){return e(K)},get category(){return e(X)},get classification(){return u().lastEvent.classification},pending:!0,get paused(){return e(me)},strokeWidth:j*2});var de=v(J);const Ee=r(()=>[e(q),i()]);vt(de,{get point(){return e(Ee)},get classification(){return u().lastEvent.classification},icon:"retry",r:j}),a(le,F)};ee(te,le=>{!e(U)&&u().isPending&&!e(d)&&le(L)})}var se=v(te);{var ae=le=>{const F=r(()=>{var K,X;return(X=(K=u())==null?void 0:K.userMetadata)==null?void 0:X.summary}),J=r(()=>{var K;return Pr(u().initialEvent)?(K=u())==null?void 0:K.displayName:""}),Y=r(()=>{var K;return(K=u())==null?void 0:K.displayName});Rr(le,{get value(){return e(F)},get prefix(){return e(J)},get fallback(){return e(Y)},children:$t,$$slots:{default:(K,X)=>{const me=r(()=>X.decodedValue),de=r(()=>e(w)&&!e(w).paused||e(E)?"retry":void 0);jn(K,{get point(){return e(p)},get textAnchor(){return e(o)},get backdrop(){return e(x)},backdropHeight:j*2,config:Xe,get icon(){return e(de)},children:(Ee,Se)=>{var Oe=Pe(),Ce=oe(Oe);{var Ie=he=>{var He=ve();G($e=>O(He,`${$e??""}
            ${e(w).attempt??""} / ${e(w).maximumAttempts||"∞"}
            • 
            ${e(me)??""}`),[()=>h("workflows.attempt")],r),a(he,He)},Ue=(he,He)=>{{var $e=Fe=>{var qe=ve();G(()=>O(qe,`${e(m).attributes.attempt??""} • ${e(me)??""}`)),a(Fe,qe)},Be=Fe=>{var qe=ve();G(()=>O(qe,e(me))),a(Fe,qe)};ee(he,Fe=>{e(E)?Fe($e):Fe(Be,!1)},He)}};ee(Ce,he=>{e(w)?he(Ie):he(Ue,!1)})}a(Ee,Oe)},$$slots:{default:!0}})}}})};ee(se,le=>{e(D)&&le(ae)})}var pe=v(se);const We=r(()=>[e(q),i()]),Te=r(()=>{var le;return(le=u().eventList[re])==null?void 0:le.classification}),ze=r(()=>e(d)&&re!==0?"pause":dt[u().category]);vt(pe,{get point(){return e(We)},get classification(){return e(Te)},get icon(){return e(ze)},r:j}),a(b,fe)}),y(g),ut("click",g,z),ut("keypress",g,z),a($,g),xe()}var Gn=je('<g role="button" tabindex="0" class="relative cursor-pointer svelte-k9v32"><!><!><!><!><!></g>');function Dn($,t){_e(t,!1);const n=_(),w=_();let d=H(t,"workflow",8),l=H(t,"length",8),o=H(t,"y",8);const{radius:s,height:p,gutter:x}=Xe;A(()=>{},()=>{f(n,x)}),A(()=>(e(n),ce(l())),()=>{f(w,e(n)+l()-2*x)}),Ae(),we();var m=Gn();be(m,"height",p);var E=T(m);const k=r(()=>[e(n),o()]),c=r(()=>[e(w),o()]);De(E,{get startPoint(){return e(k)},get endPoint(){return e(c)},get classification(){return d().status},strokeWidth:s*2,get pending(){return d().isRunning}});var i=v(E);const u=r(()=>[e(n),o()]);vt(i,{get point(){return e(u)},get classification(){return d().status},r:s});var W=v(i);const P=r(()=>e(n)-s/2),S=r(()=>o()-s/2);Ne(W,{name:"workflow",get x(){return e(P)},get y(){return e(S)},width:s,height:s,strokeWidth:"4",class:"text-black"});var C=v(W);const M=r(()=>[e(w),o()]);vt(C,{get point(){return e(M)},get classification(){return d().status},r:s});var N=v(C);const B=r(()=>e(w)-s/2),R=r(()=>o()-s/2);Ne(N,{name:"workflow",get x(){return e(B)},get y(){return e(R)},width:s,height:s,strokeWidth:"4",class:"text-black"}),y(m),a($,m),xe()}var Nn=je("<!><!>",1),Vn=Q('<div><div class="flex w-full justify-between text-xs"><p class="w-60 -translate-x-24 rotate-90"> </p> <p class="w-60 translate-x-24 rotate-90"> </p></div></div> <svg><!><!><!><!><!></svg>',1),Un=Q('<div class="relative h-auto overflow-auto border border-t-0 border-subtle bg-primary"><!></div>');function Bt($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(Mt,"$activeGroupHeight",n),l=()=>Z(Me,"$eventStatusFilter",n),o=()=>Z(ft,"$fullEventHistory",n),s=()=>Z(Wr,"$activeGroups",n),p=()=>Z(et,"$eventFilterSort",n),x=()=>Z(mt,"$timeFormat",n),m=_(),E=_(),k=_(),c=_(),i=_(),u=_();var W=_();let P=H(t,"x",8,0),S=H(t,"y",8,0),C=H(t,"workflow",8),M=H(t,"groups",8),N=H(t,"viewportHeight",8),B=H(t,"readOnly",8,!1),R=H(t,"workflowTaskFailedError",8,void 0);const{height:j,gutter:I,radius:z}=Xe;let g=_(0),b=_(0);const q=U=>{var D;f(b,(D=U==null?void 0:U.target)===null||D===void 0?void 0:D.scrollTop)};A(()=>(ce(B()),d()),()=>{f(m,B()?0:d())}),A(()=>(ce(M()),l()),()=>{f(E,lr(M(),l()))}),A(()=>(ie(W),o(),ce(C())),()=>{f(k,(f(W,o()[0])===null||ie(W)===void 0?void 0:ie(W).eventTime)||C().startTime)}),A(()=>(e(E),e(m)),()=>{f(c,Math.max(j*(e(E).length+2),120)+e(m))}),A(()=>e(c),()=>{f(i,e(c)+120)}),A(()=>(s(),p(),e(m)),()=>{f(u,U=>{const D=s()===null||s()===void 0?void 0:s().filter(V=>p()==="ascending"?parseInt(V)<parseInt(U.id):parseInt(V)>parseInt(U.id));return D!=null&&D.length?e(m):0})}),Ae(),we();var re=Un(),fe=T(re);$n(fe,{get workflow(){return C()},get startTime(){return e(k)},children:$t,$$slots:{default:(U,D)=>{const V=r(()=>D.endTime),ne=r(()=>D.duration);var te=Vn(),L=oe(te);let se;var ae=T(L),pe=T(ae),We=T(pe,!0);y(pe);var Te=v(pe,2),ze=T(Te,!0);y(Te),y(ae),y(L);var le=v(L,2);let F;var J=T(le);const Y=r(()=>[I,e(c)]);De(J,{startPoint:[I,0],get endPoint(){return e(Y)},strokeWidth:z/2});var K=v(J);const X=r(()=>[e(g)-I,0]),me=r(()=>[e(g)-I,e(c)]);De(K,{get startPoint(){return e(X)},get endPoint(){return e(me)},strokeWidth:z/2});var de=v(K);const Ee=r(()=>e(g)-I+z/4);Cn(de,{x1:I-z/4,get x2(){return e(Ee)},get timelineHeight(){return e(c)},get startTime(){return e(k)},get duration(){return e(ne)}});var Se=v(de);Dn(Se,{get workflow(){return C()},y:j,get length(){return e(g)}});var Oe=v(Se);Ke(Oe,3,()=>e(E),Ce=>Ce.id,(Ce,Ie,Ue,he)=>{var He=Nn();const $e=r(()=>(e(Ue)+2)*j+e(u)(e(Ie)));var Be=oe(He);{var Fe=Qe=>{var rt=Pe(),Jt=oe(rt);bt(Jt,()=>e(Ie).eventList.length,Xt=>{Mn(Xt,{get y(){return e($e)},get group(){return e(Ie)},get activeGroups(){return s()},get canvasWidth(){return e(g)},get startTime(){return e(k)},get endTime(){return e(V)},get readOnly(){return B()}})}),a(Qe,rt)};ee(Be,Qe=>{(!N()||e($e)>e(b)-2*j&&e($e)<e(b)+N()*j)&&Qe(Fe)})}var qe=v(Be);{var Qt=Qe=>{const rt=r(()=>e($e)+1.33*z);In(Qe,{get y(){return e(rt)},get group(){return e(Ie)},get canvasWidth(){return e(g)}})};ee(qe,Qe=>{!B()&&s().includes(e(Ie).id)&&Qe(Qt)})}a(Ce,He)}),y(le),G((Ce,Ie,Ue,he)=>{se=Ye(L,1,"pointer-events-none sticky top-[120px]",null,se,Ce),O(We,Ie),O(ze,Ue),be(le,"x",P()),be(le,"y",S()),be(le,"viewBox",`0 0 ${e(g)??""} ${e(i)??""}`),be(le,"height",e(i)),be(le,"width",e(g)),F=Ye(le,0,"-mt-4 svelte-ta6k80",null,F,he)},[()=>({invisible:!!s().length}),()=>Ge(e(k),x()),()=>Ge(e(V),x()),()=>({error:R()})],r),a(U,te)}}}),y(re),G(()=>or(re,N()?`max-height: ${N()}px;`:"")),Gt(re,"clientWidth",U=>f(g,U)),ut("scroll",re,q),a($,re),xe(),w()}var Bn=Q('<div class="*:border-t-0 [&amp;>*:first-child]:border-t"><!></div>');function qn($,t){var n=Bn(),w=T(n);Ze(w,t,"default",{},null),y(n),a($,n)}var Qn=Q("<p> </p> <!>",1),Jn=Q("<p> </p> <!>",1),Xn=Q('<div class="flex flex-col gap-2"><p> </p> <!> <!> <!></div>'),Yn=Q('<div class="w-full text-right text-xs" slot="summary"> </div>'),Zn=Q("<!> <!>",1);function qt($,t){_e(t,!1);let n=H(t,"failure",8,void 0);we();var w=Zn(),d=oe(w);{var l=p=>{const x=r(()=>h("common.failure"));Ut(p,{get title(){return e(x)},class:"text-sm",children:(m,E)=>{var k=Xn(),c=T(k),i=T(c,!0);y(c);var u=v(c,2);const W=r(()=>{var R;return((R=n())==null?void 0:R.message)||""}),P=r(()=>h("common.copy-icon-title")),S=r(()=>h("common.copy-success-icon-title"));lt(u,{get content(){return e(W)},language:"text",get copyIconTitle(){return e(P)},get copySuccessIconTitle(){return e(S)}});var C=v(u,2);{var M=R=>{var j=Qn(),I=oe(j),z=T(I,!0);y(I);var g=v(I,2);const b=r(()=>h("common.copy-icon-title")),q=r(()=>h("common.copy-success-icon-title"));lt(g,{get content(){return n().source},language:"text",get copyIconTitle(){return e(b)},get copySuccessIconTitle(){return e(q)}}),G(re=>O(z,re),[()=>h("common.source")],r),a(R,j)};ee(C,R=>{var j;(j=n())!=null&&j.source&&R(M)})}var N=v(C,2);{var B=R=>{var j=Jn(),I=oe(j),z=T(I,!0);y(I);var g=v(I,2);const b=r(()=>h("common.copy-icon-title")),q=r(()=>h("common.copy-success-icon-title"));lt(g,{get content(){return n().stackTrace},language:"text",get copyIconTitle(){return e(b)},get copySuccessIconTitle(){return e(q)}}),G(re=>O(z,re),[()=>h("common.stack-trace")],r),a(R,j)};ee(N,R=>{var j;(j=n())!=null&&j.stackTrace&&R(B)})}y(k),G(R=>O(i,R),[()=>h("common.message")],r),a(m,k)},$$slots:{default:!0,summary:(m,E)=>{var k=Yn(),c=T(k,!0);y(k),G(()=>{var i;return O(c,(i=n())==null?void 0:i.message)}),a(m,k)}}})};ee(d,p=>{n()&&p(l)})}var o=v(d,2);{var s=p=>{var x=Pe(),m=oe(x);qt(m,{get failure(){return n().cause}}),a(p,x)};ee(o,p=>{var x;(x=n())!=null&&x.cause&&p(s)})}a($,w),xe()}var Kn=Q('<div class="flex flex-col gap-2"><p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p> <p class="flex items-center gap-4"> <!></p></div>');function eo($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(mt,"$timeFormat",n);let l=H(t,"pendingTask",8,void 0);we();const o=r(()=>h("workflows.pending-workflow-task"));Ut($,{get title(){return e(o)},children:(s,p)=>{var x=Kn(),m=T(x),E=T(m),k=v(E);Re(k,{children:(I,z)=>{ue();var g=ve();G(()=>O(g,l().state)),a(I,g)},$$slots:{default:!0}}),y(m);var c=v(m,2),i=T(c),u=v(i);Re(u,{children:(I,z)=>{ue();var g=ve();G(()=>O(g,l().attempt)),a(I,g)},$$slots:{default:!0}}),y(c);var W=v(c,2),P=T(W),S=v(P);Re(S,{children:(I,z)=>{ue();var g=ve();G(b=>O(g,b),[()=>Ge(l().originalScheduledTime,d())],r),a(I,g)},$$slots:{default:!0}}),y(W);var C=v(W,2),M=T(C),N=v(M);Re(N,{children:(I,z)=>{ue();var g=ve();G(b=>O(g,b),[()=>Ge(l().scheduledTime,d())],r),a(I,g)},$$slots:{default:!0}}),y(C);var B=v(C,2),R=T(B),j=v(R);Re(j,{children:(I,z)=>{ue();var g=ve();G(b=>O(g,b),[()=>Ge(l().startedTime,d())],r),a(I,g)},$$slots:{default:!0}}),y(B),y(x),G((I,z,g,b,q)=>{O(E,`${I??""} `),O(i,`${z??""} `),O(P,`${g??""} `),O(M,`${b??""} `),O(R,`${q??""} `)},[()=>h("common.state"),()=>h("common.attempt"),()=>h("workflows.original-scheduled-time"),()=>h("workflows.scheduled-time"),()=>h("workflows.started-time")],r),a(s,x)},$$slots:{default:!0}}),xe(),w()}var to=Q("<p> <!>.</p>"),ro=Q("<!> <!>",1),no=Q('<p> </p> <!> <div class="mt-2 flex w-full flex-col gap-0 overflow-hidden border border-danger"><div class="flex items-center justify-between gap-2 bg-danger px-2 py-2"><div class="flex items-center gap-2"> <!> <span class="font-semibold text-danger"> </span></div> </div> <div class="flex flex-col gap-2 bg-primary p-4"><!></div></div>',1);function oo($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(mt,"$timeFormat",n),l=()=>Z(Cr,"$relativeTime",n);let o=H(t,"error",8),s=H(t,"pendingTask",8,void 0),p=_();A(()=>ce(o()),()=>{f(p,Vr(o()))}),Ae(),we();var x=Pe(),m=oe(x);{var E=k=>{const c=r(()=>h(`typed-errors.${e(p)}.title`));yt(k,{icon:"warning",intent:"warning",get title(){return e(c)},children:(i,u)=>{var W=no(),P=oe(W),S=T(P,!0);y(P);var C=v(P,2);{var M=U=>{var D=to(),V=T(D,!0),ne=v(V);const te=r(()=>h(`typed-errors.${e(p)}.link`));Vt(ne,{newTab:!0,get href(){return e(te)},children:(L,se)=>{ue();var ae=ve();G(pe=>O(ae,pe),[()=>h(`typed-errors.${e(p)}.action`)],r),a(L,ae)},$$slots:{default:!0}}),ue(),y(D),G(L=>O(V,L),[()=>h("typed-errors.link-preface")],r),a(U,D)};ee(C,U=>{(e(p)==="WorkflowWorkerUnhandledFailure"||e(p)==="BadSearchAttributes")&&U(M)})}var N=v(C,2),B=T(N),R=T(B),j=T(R),I=v(j);Ne(I,{get name(){return dt[o().category]}});var z=v(I,2),g=T(z,!0);y(z),y(R);var b=v(R);y(B);var q=v(B,2),re=T(q);{var fe=U=>{qn(U,{children:(D,V)=>{var ne=ro(),te=oe(ne);qt(te,{get failure(){return o().attributes.failure}});var L=v(te,2);{var se=ae=>{eo(ae,{get pendingTask(){return s()}})};ee(L,ae=>{s()&&ae(se)})}a(D,ne)},$$slots:{default:!0}})};ee(re,U=>{var D;(D=o().attributes)!=null&&D.failure&&U(fe)})}y(q),y(N),G((U,D,V)=>{O(S,U),O(j,`${o().id??""} `),O(g,D),O(b,` ${V??""}`)},[()=>h(`typed-errors.${e(p)}.description`),()=>{var U;return Nr((U=o())==null?void 0:U.name)},()=>{var U;return Ge((U=o())==null?void 0:U.eventTime,d(),{relative:l()})}],r),a(i,W)},$$slots:{default:!0}})};ee(m,k=>{e(p)&&e(p)!=="ResetWorkflow"&&k(E)})}a($,x),xe(),w()}const so=async($,t,n)=>{const w=Yr(t),d=Zr(t),l=Kr(t),o={...t,codec:{...t==null?void 0:t.codec,endpoint:w,passAccessToken:d,includeCredentials:l}},s=!1;try{const p=await Jr($,At(Ve).params.namespace,o,At(Qr).accessToken,n,s);return Xr(p,s)}catch{return $}};function Rt($,t,n){const w=ht({events:$},null,2),d=document.createElement("a"),l=new Blob([w],{type:n});d.href=URL.createObjectURL(l),d.download=t,d.click()}const ao=async({namespace:$,workflowId:t,runId:n,settings:w,decodeSetting:d})=>{try{const l=await Mr({namespace:$,workflowId:t,runId:n,sort:"ascending"});if(d==="encoded")Rt(l,`${n}/events.json`,"text/plain");else{const o=[];for(const s of l){const p=await so(s,w,d);o.push(p)}Rt(o,`${n}/events.json`,"text/plain")}}catch{console.error("Could not download event history")}};var io=Q('<div class="flex items-center space-x-4"><!></div>');function lo($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(wr,"$parameters",n),l=()=>Z(en,"$isCloud",n),o=_(),s=_(),{namespace:p,workflowId:x,runId:m}=d();A(()=>St,()=>{f(o,St({namespace:p,workflow:x,run:m}))}),A(()=>e(o),()=>{f(s,e(o)+".json")}),Ae(),we();var E=Pe(),k=oe(E);{var c=i=>{var u=io(),W=T(u);Vt(W,{icon:"external-link",class:"whitespace-nowrap",get href(){return e(s)},newTab:!0,"data-testid":"view-raw-event-history",children:(P,S)=>{ue();var C=ve();G(M=>O(C,M),[()=>h("events.view-raw-history")],r),a(P,C)},$$slots:{default:!0}}),y(u),a(i,u)};ee(k,i=>{l()||i(c)})}a($,E),xe(),w()}var co=Q('<h3 slot="title"> </h3>'),vo=Q("<!> <!> <!>",1),uo=Q('<div slot="content" class="flex flex-col gap-4"><!> <!></div>');function fo($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(Ve,"$page",n),l=()=>Z(Et,"$downloadEventHistorySetting",n);let o=H(t,"open",12,!1),s=H(t,"namespace",8),p=H(t,"workflowId",8),x=H(t,"runId",8);const m=()=>{o(!1),ao({namespace:s(),workflowId:p(),runId:x(),settings:d().data.settings,decodeSetting:l()})};we();const E=r(()=>h("common.download")),k=r(()=>h("common.cancel"));Br($,{id:"download-history",large:!0,confirmType:"primary",get confirmText(){return e(E)},get cancelText(){return e(k)},get open(){return o()},set open(c){o(c)},$$events:{confirmModal:()=>m(),cancelModal:()=>o(!1)},$$slots:{title:(c,i)=>{var u=co(),W=T(u,!0);y(u),G(P=>O(W,P),[()=>h("common.download-event-history-json")],r),a(c,u)},content:(c,i)=>{var u=uo(),W=T(u);qr(W,{group:Et,name:"decode-setting",class:"h-auto overflow-auto",children:(S,C)=>{var M=vo(),N=oe(M);const B=r(()=>h("events.encoded"));wt(N,{id:"use-encoded-setting","data-testid":"use-encoded-setting-input",value:"encoded",get label(){return e(B)}});var R=v(N,2);const j=r(()=>h("events.decoded")),I=r(()=>h("events.decoded-description"));wt(R,{id:"use-decoded-setting","data-testid":"use-decoded-setting-input",value:"decoded",get label(){return e(j)},get description(){return e(I)}});var z=v(R,2);const g=r(()=>h("events.readable")),b=r(()=>h("events.readable-description"));wt(z,{id:"use-readable-setting","data-testid":"use-readable-setting-input",value:"readable",get label(){return e(g)},get description(){return e(b)}}),a(S,M)},$$slots:{default:!0}});var P=v(W,2);lo(P,{}),y(u),a(c,u)}},$$legacy:!0}),xe(),w()}const go=["WorkflowExecutionFailed","WorkflowExecutionCompleted","WorkflowExecutionContinuedAsNew","WorkflowExecutionTimedOut","WorkflowExecutionCanceled","WorkflowExecutionTerminated"],po=$=>!!$.workflowExecutionStartedEventAttributes,mo=$=>{for(const t of go)if($.eventType===t)return!0;return!1},_o=$=>Ot($)?$.attributes.input:Ar($)?$.attributes.result===null?null:$.attributes.result:$.attributes,xo=$=>{var o;let t,n,w=!1,d,l;for(const s of $)if(po(s)){d=s;continue}else if(mo(s)){l=s;continue}return d&&(t=ht(((o=d==null?void 0:d.workflowExecutionStartedEventAttributes)==null?void 0:o.input)??null)),l&&(w=Ot(l),n=ht(_o(l))),{input:t,results:n,contAsNew:w}};var wo=Q('<div class="flex flex-col gap-4 lg:flex-row" data-testid="input-and-result"><!> <!></div>');function ko($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(ft,"$fullEventHistory",n),l=()=>Z(gt,"$workflowRun",n),o=_(),s=_();A(()=>d(),()=>{f(o,xo(d()))}),A(()=>l(),()=>{f(s,l().workflow.isRunning)}),Ae(),we();var p=wo(),x=T(p);const m=r(()=>h("workflows.input"));Ft(x,{get title(){return e(m)},get content(){return e(o).input},get isRunning(){return e(s)}});var E=v(x,2);const k=r(()=>h("workflows.result"));Ft(E,{get title(){return e(k)},get content(){return e(o).results},get isRunning(){return e(s)}}),y(p),a($,p),xe(),w()}var ho=Q('<div class="mb-4"><!></div>');function $o($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(gt,"$workflowRun",n),l=_(),o=_(),s=_();var p=_();A(()=>(e(l),e(o),d()),()=>{(k=>(f(l,k.workflow),f(o,k.workers)))(d())}),A(()=>(e(l),ie(p),e(o)),()=>{f(s,(e(l)===null||e(l)===void 0?void 0:e(l).isRunning)&&!(!(f(p,e(o)===null||e(o)===void 0?void 0:e(o).pollers)===null||ie(p)===void 0)&&ie(p).length))}),Ae(),we();var x=Pe(),m=oe(x);{var E=k=>{var c=ho(),i=T(c);const u=r(()=>h("workflows.workflow-error-no-workers-title"));yt(i,{icon:"warning",intent:"warning",get title(){return e(u)},children:(W,P)=>{ue();var S=ve();G(C=>O(S,C),[()=>{var C;return h("workflows.workflow-error-no-workers-description",{taskQueue:(C=e(l))==null?void 0:C.taskQueue})}],r),a(W,S)},$$slots:{default:!0}}),y(c),tn(1,c,()=>rn,()=>({duration:200,delay:100})),a(k,c)};ee(m,k=>{e(s)&&k(E)})}a($,x),xe(),w()}var bo=Q("<!> <!>",1),yo=Q("<!> <!>",1),To=Q('<p class="flex items-center gap-2"> <!></p>'),Eo=Q('<p class="flex items-center gap-2"> <!></p>'),Po=Q('<p class="flex items-center gap-2"> <!></p>'),Ao=Q('<p class="flex items-center gap-2"> <!></p>'),Io=Q('<p class="flex items-center gap-2"> <!></p>'),Wo=Q('<div class="flex flex-col gap-2"><p> </p> <!></div>'),Ho=Q('<div class="flex flex-col gap-2 pt-2"><!> <div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><p class="flex items-center gap-2"> <!></p> <!> <!> <!></div> <!> <!> <!></div> <!>',1);function jt($,t){_e(t,!0);const[n,w]=ye(),d=()=>Z(mt,"$timeFormat",n);var l,o,s,p;const x=ke(()=>Ge(t.callback.lastAttemptCompleteTime,d())),m=ke(()=>Ge(t.callback.nextAttemptScheduleTime,d())),E=ke(()=>(l=t.callback===null||t.callback===void 0?void 0:t.callback.lastAttemptFailure)===null||l===void 0?void 0:l.message),k=ke(()=>t.callback===null||t.callback===void 0?void 0:t.callback.blockedReason),c=ke(()=>(s=(o=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||o===void 0?void 0:o.nexus)===null||s===void 0?void 0:s.url),i={Standby:h("nexus.callback.standby"),Scheduled:h("nexus.callback.scheduled"),"Backing Off":h("nexus.callback.backing-off"),Failed:h("nexus.callback.failed"),Succeeded:h("nexus.callback.succeeded")},u="Failed",W=ke(()=>t.callback.state===u),P=ke(()=>i[t.callback.state]||h("nexus.nexus-callback")),S=ke(()=>((p=t.callback===null||t.callback===void 0?void 0:t.callback.callback)===null||p===void 0?void 0:p.links)||[]),C=ke(()=>!e(S).length&&!t.link&&e(c)),M=ke(()=>e(W)?"error":"info");yt($,{icon:"nexus",get intent(){return e(M)},get title(){return e(P)},children:(N,B)=>{var R=Ho(),j=oe(R),I=T(j);{var z=F=>{var J=Pe(),Y=oe(J);Ke(Y,17,()=>e(S),K=>{var X,me,de;return((me=(X=K.workflowEvent)==null?void 0:X.eventRef)==null?void 0:me.eventId)||((de=K.workflowEvent)==null?void 0:de.requestIdRef.requestId)},(K,X,me,de)=>{var Ee=bo(),Se=oe(Ee);at(Se,{get link(){return e(X)}});var Oe=v(Se,2);const Ce=ke(()=>h("nexus.link-namespace")),Ie=ke(()=>Ct({namespace:e(X).workflowEvent.namespace}));at(Oe,{get link(){return e(X)},get label(){return e(Ce)},get value(){return e(X).workflowEvent.namespace},get href(){return e(Ie)}}),a(K,Ee)}),a(F,J)},g=(F,J)=>{{var Y=K=>{var X=yo(),me=oe(X);at(me,{get link(){return t.link}});var de=v(me,2);const Ee=ke(()=>h("nexus.link-namespace")),Se=ke(()=>Ct({namespace:t.link.workflowEvent.namespace}));at(de,{get link(){return t.link},get label(){return e(Ee)},get value(){return t.link.workflowEvent.namespace},get href(){return e(Se)}}),a(K,X)};ee(F,K=>{t.link&&K(Y)},J)}};ee(I,F=>{e(S).length?F(z):F(g,!1)})}var b=v(I,2),q=T(b),re=T(q,!0),fe=v(re);Re(fe,{type:"subtle",children:(F,J)=>{ue();var Y=ve();G(()=>O(Y,t.callback.state)),a(F,Y)},$$slots:{default:!0}}),y(q);var U=v(q,2);{var D=F=>{var J=To(),Y=T(J),K=v(Y);Re(K,{type:"subtle",children:(X,me)=>{ue();var de=ve();G(()=>O(de,t.callback.attempt)),a(X,de)},$$slots:{default:!0}}),y(J),G(X=>O(Y,`${X??""} `),[()=>h("common.attempt")]),a(F,J)};ee(U,F=>{t.callback.attempt&&F(D)})}var V=v(U,2);{var ne=F=>{var J=Eo(),Y=T(J),K=v(Y);Re(K,{type:"subtle",children:(X,me)=>{ue();var de=ve();G(()=>O(de,e(x))),a(X,de)},$$slots:{default:!0}}),y(J),G(X=>O(Y,`${X??""} `),[()=>h("nexus.last-attempt-completed-time")]),a(F,J)};ee(V,F=>{t.callback.lastAttemptCompleteTime&&F(ne)})}var te=v(V,2);{var L=F=>{var J=Po(),Y=T(J),K=v(Y);Re(K,{type:"subtle",children:(X,me)=>{ue();var de=ve();G(()=>O(de,e(m))),a(X,de)},$$slots:{default:!0}}),y(J),G(X=>O(Y,`${X??""} `),[()=>h("nexus.next-attempt-scheduled-time")]),a(F,J)};ee(te,F=>{t.callback.nextAttemptScheduleTime&&F(L)})}y(b);var se=v(b,2);{var ae=F=>{var J=Ao(),Y=T(J),K=v(Y);Re(K,{type:"subtle",children:(X,me)=>{ue();var de=ve();G(()=>O(de,e(c))),a(X,de)},$$slots:{default:!0}}),y(J),G(X=>O(Y,`${X??""} `),[()=>h("nexus.callback-url")]),a(F,J)};ee(se,F=>{e(C)&&F(ae)})}var pe=v(se,2);{var We=F=>{var J=Io(),Y=T(J),K=v(Y);Re(K,{type:"subtle",children:(X,me)=>{ue();var de=ve();G(()=>O(de,e(k))),a(X,de)},$$slots:{default:!0}}),y(J),G(X=>O(Y,`${X??""} `),[()=>h("nexus.blocked-reason")]),a(F,J)};ee(pe,F=>{e(k)&&F(We)})}var Te=v(pe,2);{var ze=F=>{var J=Wo(),Y=T(J),K=T(Y,!0);y(Y);var X=v(Y,2);const me=ke(()=>h("common.copy-icon-title")),de=ke(()=>h("common.copy-success-icon-title"));lt(X,{get content(){return e(E)},language:"text",get copyIconTitle(){return e(me)},get copySuccessIconTitle(){return e(de)}}),y(J),G(Ee=>O(K,Ee),[()=>h("nexus.last-attempt-failure")]),a(F,J)};ee(Te,F=>{e(E)&&F(ze)})}y(j);var le=v(j,2);on(le,()=>t.children??Kt),G(F=>O(re,F),[()=>h("common.state")]),a(N,R)},$$slots:{default:!0}}),xe(),w()}var So=Q('<div class="flex flex-col gap-2"></div>'),Co=Q('<p class="p-1" slot="title"> </p>'),Fo=Q('<div class="py-2"><!></div>');function Ro($,t){_e(t,!0);const[n,w]=ye(),d=()=>Z(ft,"$fullEventHistory",n);var l;const o=ke(()=>d()[0]),s=ke(()=>(l=e(o)===null||e(o)===void 0?void 0:e(o).links)===null||l===void 0?void 0:l[0]),p=ke(()=>t.callbacks[0]);jt($,{get callback(){return e(p)},get link(){return e(s)},children:(x,m)=>{var E=Pe(),k=oe(E);{var c=i=>{var u=Fo(),W=T(u);nn(W,{children:$t,$$slots:{default:(P,S)=>{const C=ke(()=>S.open);var M=Pe(),N=oe(M);{var B=R=>{var j=So();Ke(j,21,()=>t.callbacks.slice(1),pt,(I,z)=>{jt(I,{get callback(){return e(z)}})}),y(j),a(R,j)};ee(N,R=>{e(C)&&R(B)})}a(P,M)},title:(P,S)=>{var C=Co(),M=T(C);y(C),G(()=>O(M,`View ${t.callbacks.length-1} other Callbacks`)),a(P,C)}}}),y(u),a(i,u)};ee(k,i=>{t.callbacks.length>1&&i(c)})}a(x,E)},$$slots:{default:!0}}),xe(),w()}var jo=Q("<!> <!> <!> <!> <!>",1),zo=Q('<div class="flex flex-col gap-0 px-2 pt-4 md:px-4 lg:px-8"><!> <div class="flex flex-col gap-2"><!> <!> <!></div></div> <div class="relative px-2 pb-24 md:px-4 lg:px-8"><div><h2> </h2> <div class="flex items-center gap-2"><!></div></div> <div class="flex w-full flex-col border-t border-subtle"><!> <!></div></div> <!>',1);function Oo($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(Ve,"$page",n),l=()=>Z(gt,"$workflowRun",n),o=()=>Z(et,"$eventFilterSort",n),s=()=>Z(Je,"$eventViewType",n),p=()=>Z(zt,"$filteredEventHistory",n),x=()=>Z(kr,"$currentEventHistory",n),m=()=>Z(tt,"$pauseLiveUpdates",n),E=()=>Z(Pt,"$minimizeEventView",n),k=_(),c=_(),i=_(),u=_(),W=_(),P=_(),S=_(),C=_(),M=_(),N=_();sr(()=>{xt()});let B=_(!1);const R=()=>{e(W)?ge(et,"ascending"):ge(et,"descending")};A(()=>(e(k),d()),()=>{(F=>f(k,F.namespace))(d().params)}),A(()=>(e(c),l()),()=>{(F=>f(c,F.workflow))(l())}),A(()=>e(c),()=>{f(i,e(c)===null||e(c)===void 0?void 0:e(c).pendingActivities)}),A(()=>e(c),()=>{f(u,e(c)===null||e(c)===void 0?void 0:e(c).pendingNexusOperations)}),A(()=>o(),()=>{f(W,o()==="descending")}),A(()=>s(),()=>{f(P,s()==="compact")}),A(()=>(p(),e(i),e(u)),()=>{f(S,Nt(p(),"ascending",e(i),e(u)))}),A(()=>(e(W),e(S)),()=>{f(C,e(W)?[...e(S)].reverse():e(S))}),A(()=>(e(W),p()),()=>{f(M,e(W)?[...p()].reverse():p())}),A(()=>x(),()=>{f(N,Ur(x(),"ascending"))}),A(()=>(s(),xt),()=>{s(),xt()}),A(()=>(e(c),m()),()=>{!e(c).isRunning&&m()&&ge(tt,!1)}),Ae(),we();var j=zo(),I=oe(j),z=T(I);$o(z,{});var g=v(z,2),b=T(g);ko(b,{});var q=v(b,2);{var re=F=>{const J=r(()=>{var Y;return(Y=e(c))==null?void 0:Y.pendingWorkflowTask});oo(F,{get error(){return e(N)},get pendingTask(){return e(J)}})};ee(q,F=>{e(N)&&F(re)})}var fe=v(q,2);{var U=F=>{Ro(F,{get callbacks(){return e(c).callbacks}})};ee(fe,F=>{var J,Y;(Y=(J=e(c))==null?void 0:J.callbacks)!=null&&Y.length&&F(U)})}y(g),y(I);var D=v(I,2),V=T(D);let ne;var te=T(V),L=T(te,!0);y(te);var se=v(te,2),ae=T(se);fr(ae,{children:(F,J)=>{var Y=jo(),K=oe(Y);{var X=he=>{const He=r(()=>e(W)?"descending":"ascending");nt(he,{get icon(){return e(He)},"data-testid":"zoom-in",$$events:{click:R},children:($e,Be)=>{ue();var Fe=ve();G(()=>O(Fe,e(W)?"Descending":"Ascending")),a($e,Fe)},$$slots:{default:!0}})};ee(K,he=>{s()!=="json"&&he(X)})}var me=v(K,2);const de=r(()=>E()?"minimize":"expand"),Ee=r(()=>E()?"Timeline and Event History are collapsed to minimized height":"Timeline and Event History are expanded to full height");nt(me,{get icon(){return e(de)},"data-testid":"expandAll",get tooltip(){return e(Ee)},$$events:{click:()=>ge(Pt,!E())},children:(he,He)=>{ue();var $e=ve();G(()=>O($e,E()?"Minimized":"Expanded")),a(he,$e)},$$slots:{default:!0}});var Se=v(me,2);hn(Se,{get compact(){return e(P)},get minimized(){return E()}});var Oe=v(Se,2);const Ce=r(()=>!e(c).isRunning),Ie=r(()=>m()?"play":"pause");nt(Oe,{get disabled(){return e(Ce)},get icon(){return e(Ie)},"data-testid":"pause",$$events:{click:()=>ge(tt,!m())},children:(he,He)=>{ue();var $e=ve();G(()=>O($e,m()?"Unfreeze":"Freeze")),a(he,$e)},$$slots:{default:!0}});var Ue=v(Oe,2);nt(Ue,{"data-testid":"download",icon:"download",$$events:{click:()=>f(B,!0)},children:(he,He)=>{ue();var $e=ve();G(Be=>O($e,Be),[()=>h("common.download")],r),a(he,$e)},$$slots:{default:!0}}),a(F,Y)},$$slots:{default:!0}}),y(se),y(V);var pe=v(V,2),We=T(pe);const Te=r(()=>E()?360:void 0);Bt(We,{get workflow(){return e(c)},get groups(){return e(C)},get workflowTaskFailedError(){return e(N)},get viewportHeight(){return e(Te)}});var ze=v(We,2);pn(ze,{get groups(){return e(C)},get history(){return e(M)},get minimized(){return E()}}),y(pe),y(D);var le=v(D,2);fo(le,{get namespace(){return e(k)},get workflowId(){return e(c).id},get runId(){return e(c).runId},get open(){return e(B)},set open(F){f(B,F)},$$legacy:!0}),G((F,J)=>{ne=Ye(V,1,"flex flex-wrap items-center justify-between gap-2 bg-off-white/50 py-2 xl:gap-8 dark:bg-space-black/50 svelte-18jakp5",null,ne,F),O(L,J)},[()=>({"sticky-header":!E()}),()=>h("workflows.event-history")],r),a($,j),xe(),w()}var Lo=Q("<!> <!>",1);function ea($,t){_e(t,!1);const[n,w]=ye(),d=()=>Z(Ve,"$page",n),l=d().params.workflow;we();var o=Lo(),s=oe(o);const p=r(()=>`${h("workflows.workflow-history")} | ${l}`);tr(s,{get title(){return e(p)},get url(){return d().url.href}});var x=v(s,2);Oo(x,{}),a($,o),xe(),w()}export{ea as component};
