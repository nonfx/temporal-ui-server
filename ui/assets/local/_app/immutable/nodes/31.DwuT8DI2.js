import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as ie,l as y,s as x,m as b,ah as B,g as e,a as ge,f as A,r as a,b as me,e as m,t as C,d as i,n as de,c as W,i as be}from"../chunks/DYX0w8bX.js";import{t as $,c as ne,a as o,b as fe}from"../chunks/Bz76f8pg.js";import{i as pe}from"../chunks/CZRFLhJG.js";import{s as ce,a as G}from"../chunks/CgU0heln.js";import{p as ve}from"../chunks/DOYgSXUg.js";import{P as $e}from"../chunks/navuEww_.js";import{s as S}from"../chunks/CxFVcq4O.js";import{a as he}from"../chunks/BS7N7SXQ.js";import{e as le,i as ue}from"../chunks/CgLBepva.js";import{s as we,c as ke}from"../chunks/BoNO6UAY.js";import{i as oe}from"../chunks/B_BuKjdB.js";import{p as se}from"../chunks/BrXzBH3h.js";import{L as _e}from"../chunks/BPhwjPAO.js";import{t}from"../chunks/D2OY9xdY.js";import{f as De,r as Pe,t as Fe}from"../chunks/DzOyNlRA.js";import{m as ye,n as Ie}from"../chunks/CePtYCY2.js";import{f as Z}from"../chunks/BS7yEvwO.js";import{D as Le,a as Se}from"../chunks/mowcktsP.js";import{B as Ve}from"../chunks/pnLOYuxo.js";import{I as Te}from"../chunks/BExi9zWc.js";import{P as Be}from"../chunks/R-pdctR6.js";import{d as Ce}from"../chunks/BOkQ1rrX.js";var We=$('<td class="p-2 text-left"><!></td>'),qe=$('<td class="whitespace-pre-line break-words p-2 text-left"> </td>'),je=$('<td class="whitespace-pre-line break-words p-2 text-center"><p><!></p></td>'),Ne=$("<tr></tr>");function Re(q,h){ie(h,!1);const[D,j]=ce(),c=()=>G(Fe,"$timeFormat",D),w=()=>G(Pe,"$relativeTime",D),p=()=>G(ve,"$page",D),n=b(),v=b(),d=b(),N=b(),H=b();let k=se(h,"routingConfig",8),l=se(h,"version",8),J=se(h,"columns",8);y(()=>(B(l()),B(k())),()=>{x(n,l().version===k().currentVersion)}),y(()=>(B(l()),B(k())),()=>{x(v,l().version===k().rampingVersion)}),y(()=>B(l()),()=>{x(d,l().drainageStatus)}),y(()=>(e(n),e(v),e(d),Z),()=>{x(N,e(n)?t("deployments.current"):e(v)?t("deployments.ramping"):e(d)?Z(e(d),"VersionDrainageStatus"):t("common.inactive"))}),y(()=>(e(n),e(v),B(k()),e(d),Z),()=>{x(H,e(n)?t("deployments.current"):e(v)?t("deployments.ramping",{percentage:k().rampingVersionPercentage}):e(d)?Z(e(d),"VersionDrainageStatus"):t("common.inactive"))}),ge(),pe();var P=Ne();le(P,5,J,({label:V})=>V,(V,R)=>{let T=()=>e(R).label;var K=ne(),M=A(K);{var ee=f=>{var F=We(),E=m(F);Le(E,{get status(){return e(N)},get version(){return l().version},get label(){return e(H)}}),a(F),o(f,F)},O=(f,F)=>{{var E=_=>{var I=qe(),Q=m(I,!0);a(I),C(u=>S(Q,u),[()=>{var u;return De((u=l())==null?void 0:u.createTime,c(),{relative:w()})}],i),o(_,I)},te=(_,I)=>{{var Q=u=>{var U=je(),X=m(U),s=m(X);const L=i(()=>ye({namespace:p().params.namespace,query:`TemporalWorkerDeploymentVersion="${l().version}"`}));_e(s,{icon:"external-link",get href(){return e(L)}}),a(X),a(U),o(u,U)};oe(_,u=>{T()===t("deployments.workflows")&&u(Q)},I)}};oe(f,_=>{T()===t("deployments.deployed")?_(E):_(te,!1)},F)}};oe(M,f=>{T()===t("deployments.version")?f(ee):f(O,!1)})}o(V,K)}),a(P),o(q,P),me(),j()}var Ee=$('<caption class="sr-only" slot="caption"> </caption>'),Qe=$("<th> </th>"),Ue=$('<tr slot="headers" class="text-left"></tr>'),ze=$('<header class="flex flex-row flex-wrap justify-between gap-8 border-b border-subtle px-4 pb-4 pt-8 md:pt-20 xl:px-8"><div class="relative flex w-full flex-col gap-4"><div class="flex items-center gap-2"><!> <!> </div> <div class="flex w-full items-center justify-between"><h1> </h1> <!></div></div></header> <div class="bg-primary p-8"><!></div>',1);function Ae(q,h){ie(h,!1);const[D,j]=ce(),c=()=>G(ve,"$page",D),w=b(),p=b(),n=b(),v=b(),d=[{label:t("deployments.version")},{label:t("deployments.deployed")},{label:t("deployments.workflows")}];y(()=>c(),()=>{x(w,c().params.namespace)}),y(()=>c(),()=>{x(p,c().params.deployment)}),y(()=>(e(w),e(p)),()=>{x(n,{namespace:e(w),deploymentName:Ce(e(p))})}),y(()=>e(n),()=>{x(v,Se(e(n)))}),ge(),pe();var N=ne(),H=A(N);he(H,()=>e(v),null,(k,l)=>{var J=ze(),P=A(J),V=m(P),R=m(V),T=m(R);const K=i(()=>Ie({namespace:e(w)}));_e(T,{get href(){return e(K)},icon:"chevron-left",children:(s,L)=>{de();var r=fe();C(g=>S(r,g),[()=>t("deployments.back-to-deployments")],i),o(s,r)},$$slots:{default:!0}});var M=W(T,2);Te(M,{name:"chevron-left"});var ee=W(M);a(R);var O=W(R,2),f=m(O),F=m(f,!0);a(f);var E=W(f,2);const te=i(()=>ye({namespace:c().params.namespace,query:`TemporalWorkerDeployment="${e(p)}"`}));Ve(E,{get href(){return e(te)},children:(s,L)=>{de();var r=fe();C(g=>S(r,g),[()=>t("deployments.go-to-workflows")],i),o(s,r)},$$slots:{default:!0}}),a(O),a(V),a(P);var _=W(P,2),I=m(_);const Q=i(()=>t("deployments.deployments")),u=i(()=>t("common.per-page")),U=i(()=>t("common.next-page")),X=i(()=>t("common.previous-page"));Be(I,{get"aria-label"(){return e(Q)},get perPageLabel(){return e(u)},get nextPageButtonLabel(){return e(U)},get previousPageButtonLabel(){return e(X)},pageButtonLabel:s=>t("common.go-to-page",{page:s}),get items(){return e(l).workerDeploymentInfo.versionSummaries},children:be,$$slots:{default:(s,L)=>{const r=i(()=>L.visibleItems);var g=ne(),z=A(g);le(z,1,()=>e(r),ue,(re,ae)=>{Re(re,{get routingConfig(){return e(l).workerDeploymentInfo.routingConfig},get version(){return e(ae)},columns:d})}),o(s,g)},caption:(s,L)=>{var r=Ee(),g=m(r,!0);a(r),C(z=>S(g,z),[()=>t("deployments.deployments")],i),o(s,r)},headers:(s,L)=>{var r=Ue();le(r,5,()=>d,ue,(g,z,re)=>{let ae=()=>e(z).label;var Y=Qe();we(Y,1,ke(re===0&&"w-full"));var xe=m(Y,!0);a(Y),C(()=>S(xe,ae())),o(g,Y)}),a(r),o(s,r)}}}),a(_),C(()=>{S(ee,` ${e(p)??""}`),S(F,e(p))}),o(k,J)}),o(q,N),me(),j()}var Ge=$("<!> <!>",1);function gt(q,h){ie(h,!1);const[D,j]=ce(),c=()=>G(ve,"$page",D),w=c().params.deployment;pe();var p=Ge(),n=A(p);$e(n,{title:`Deployment | ${w}`,get url(){return c().url.href}});var v=W(n,2);Ae(v,{}),o(q,p),me(),j()}export{gt as component};
