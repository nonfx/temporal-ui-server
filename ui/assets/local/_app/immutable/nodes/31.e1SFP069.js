import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as oe,aK as o,g as e,f as X,r as l,b as se,e as c,t as y,c as W,n as re,i as fe}from"../chunks/DYX0w8bX.js";import{t as x,c as me,a as i,b as U}from"../chunks/Bz76f8pg.js";import{i as ge}from"../chunks/CZRFLhJG.js";import{s as ve,a as O}from"../chunks/CgU0heln.js";import{p as ce}from"../chunks/BywiF4tS.js";import{P as _e}from"../chunks/navuEww_.js";import{s as f}from"../chunks/CxFVcq4O.js";import{a as ye}from"../chunks/BS7N7SXQ.js";import{e as ae,i as ie}from"../chunks/CgLBepva.js";import{p as ee}from"../chunks/BXBln1Xa.js";import{i as E}from"../chunks/B_BuKjdB.js";import{L as pe}from"../chunks/EopLLRp2.js";import{t as r}from"../chunks/D2OY9xdY.js";import{f as te,r as xe,t as be}from"../chunks/DzOyNlRA.js";import{g as he}from"../chunks/DhXZ3X_M.js";import{m as de,q as we}from"../chunks/DjBXm7SM.js";import{f as le}from"../chunks/BS7yEvwO.js";import{D as ke,a as Se}from"../chunks/DXQssxYC.js";import{B as De}from"../chunks/CSBBCGYX.js";import{I as Pe}from"../chunks/BExi9zWc.js";import{T as Te}from"../chunks/C5V7NFfp.js";import{P as Ie}from"../chunks/QTQvgbH_.js";import{d as Ve}from"../chunks/BOkQ1rrX.js";function Q(V){return"status"in V}var Fe=x('<td class="text-left"> </td>'),Le=x('<td class="text-left"><div class="flex items-center gap-2"><!> <!></div></td>'),Be=x('<td class="whitespace-pre-line break-words text-left"> </td>'),Ce=x('<td class="w-24 whitespace-pre-line break-words"><!></td>'),We=x("<tr></tr>");function qe(V,t){oe(t,!0);const[h,w]=ve(),k=()=>O(be,"$timeFormat",h),F=()=>O(xe,"$relativeTime",h),q=()=>O(ce,"$page",h),b=o(()=>t.version.version===t.routingConfig.currentVersion),S=o(()=>t.version.version===t.routingConfig.rampingVersion),D=o(()=>Q(t.version)?t.version.status:t.version.drainageStatus),z=o(()=>Q(t.version)?t.version.deploymentVersion.buildId:he(t.version.version)),N=o(()=>Q(t.version)?"WorkerDeploymentVersionStatus":"VersionDrainageStatus"),A=o(()=>e(b)?r("deployments.current"):e(S)?r("deployments.ramping"):e(D)?le(e(D),e(N)):r("common.inactive")),Y=o(()=>e(b)?r("deployments.current"):e(S)?r("deployments.ramping-percentage",{percentage:t.routingConfig.rampingVersionPercentage}):e(D)?le(e(D),e(N)):r("common.inactive"));var j=We();ae(j,21,()=>t.columns,({label:R})=>R,(R,G)=>{let P=()=>e(G).label;var J=me(),Z=X(J);{var M=m=>{var g=Fe(),d=c(g,!0);l(g),y(()=>f(d,e(z))),i(m,g)},$=(m,g)=>{{var d=T=>{var B=Le(),p=c(B),I=c(p);ke(I,{get status(){return e(A)},get label(){return e(Y)}});var s=W(I,2);{var v=a=>{var n=U();y(_=>f(n,`Since ${_??""}`),[()=>{var _;return te((_=t.version)==null?void 0:_.currentSinceTime,k(),{relative:F()})}]),i(a,n)},u=(a,n)=>{{var _=H=>{var C=U();y(K=>f(C,`Since ${K??""}`),[()=>{var K;return te((K=t.version)==null?void 0:K.rampingSinceTime,k(),{relative:F()})}]),i(H,C)};E(a,H=>{var C;e(S)&&Q(t.version)&&((C=t.version)!=null&&C.rampingSinceTime)&&H(_)},n)}};E(s,a=>{var n;e(b)&&Q(t.version)&&((n=t.version)!=null&&n.currentSinceTime)?a(v):a(u,!1)})}l(p),l(B),i(T,B)},L=(T,B)=>{{var p=s=>{var v=Be(),u=c(v,!0);l(v),y(a=>f(u,a),[()=>{var a;return te((a=t.version)==null?void 0:a.createTime,k(),{relative:F()})}]),i(s,v)},I=(s,v)=>{{var u=a=>{var n=Ce(),_=c(n);const H=o(()=>de({namespace:q().params.namespace,query:`TemporalWorkerDeploymentVersion="${t.version.version}"`}));pe(_,{icon:"external-link",get href(){return e(H)},children:(C,K)=>{re();var ne=U();y(ue=>f(ne,ue),[()=>r("deployments.go-to-workflows")]),i(C,ne)},$$slots:{default:!0}}),l(n),i(a,n)};E(s,a=>{P()===r("deployments.actions")&&a(u)},v)}};E(T,s=>{P()===r("deployments.deployed")?s(p):s(I,!1)},B)}};E(m,T=>{P()===r("deployments.status")?T(d):T(L,!1)},g)}};E(Z,m=>{P()===r("deployments.build-id")?m(M):m($,!1)})}i(R,J)}),l(j),i(V,j),se(),w()}var Ne=x('<caption class="sr-only" slot="caption"> </caption>'),je=x("<th> </th>"),Ee=x('<tr slot="headers"></tr>'),Re=x('<header class="flex flex-row flex-wrap justify-between gap-8 border-b border-subtle px-4 pb-4 pt-8 md:pt-20 xl:px-8"><div class="relative flex w-full flex-col gap-4"><div class="flex items-center gap-2"><!> <!> </div> <div class="flex w-full items-center justify-between"><h1> </h1> <!></div></div></header> <div class="p-8"><!></div>',1);function He(V,t){oe(t,!0);const h=o(()=>ee.params.namespace),w=o(()=>ee.params.deployment),k=o(()=>({namespace:e(h),deploymentName:Ve(e(w))})),F=o(()=>de({namespace:ee.params.namespace,query:`TemporalWorkerDeployment="${e(w)}"`})),q=o(()=>Se(e(k))),b=[{label:r("deployments.build-id")},{label:r("deployments.status")},{label:r("deployments.deployed")},{label:r("deployments.actions")}];var S=Re(),D=X(S),z=c(D),N=c(z),A=c(N);const Y=o(()=>we({namespace:e(h)}));pe(A,{get href(){return e(Y)},icon:"chevron-left",children:(m,g)=>{re();var d=U();y(L=>f(d,L),[()=>r("deployments.back-to-deployments")]),i(m,d)},$$slots:{default:!0}});var j=W(A,2);Pe(j,{name:"chevron-left"});var R=W(j);l(N);var G=W(N,2),P=c(G),J=c(P,!0);l(P);var Z=W(P,2);De(Z,{get href(){return e(F)},children:(m,g)=>{re();var d=U();y(L=>f(d,L),[()=>r("deployments.go-to-workflows")]),i(m,d)},$$slots:{default:!0}}),l(G),l(z),l(D);var M=W(D,2),$=c(M);ye($,()=>e(q),m=>{Te(m,{rows:15})},(m,g)=>{const d=o(()=>r("deployments.deployments")),L=o(()=>r("common.per-page")),T=o(()=>r("common.next-page")),B=o(()=>r("common.previous-page"));Ie(m,{get"aria-label"(){return e(d)},get perPageLabel(){return e(L)},get nextPageButtonLabel(){return e(T)},get previousPageButtonLabel(){return e(B)},pageButtonLabel:p=>r("common.go-to-page",{page:p}),get items(){return e(g).workerDeploymentInfo.versionSummaries},children:fe,$$slots:{default:(p,I)=>{const s=o(()=>I.visibleItems);var v=me(),u=X(v);ae(u,17,()=>e(s),ie,(a,n)=>{qe(a,{get routingConfig(){return e(g).workerDeploymentInfo.routingConfig},get version(){return e(n)},columns:b})}),i(p,v)},caption:(p,I)=>{var s=Ne(),v=c(s,!0);l(s),y(u=>f(v,u),[()=>r("deployments.deployments")]),i(p,s)},headers:(p,I)=>{var s=Ee();ae(s,21,()=>b,ie,(v,u)=>{let a=()=>e(u).label;var n=je(),_=c(n,!0);l(n),y(()=>f(_,a())),i(v,n)}),l(s),i(p,s)}}})}),l(M),y(()=>{f(R,` ${e(w)??""}`),f(J,e(w))}),i(V,S),se()}var Ke=x("<!> <!>",1);function dt(V,t){oe(t,!1);const[h,w]=ve(),k=()=>O(ce,"$page",h),F=k().params.deployment;ge();var q=Ke(),b=X(q);_e(b,{title:`Deployment | ${F}`,get url(){return k().url.href}});var S=W(b,2);He(S,{}),i(V,q),se(),w()}export{dt as component};
