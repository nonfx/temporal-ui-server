import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{p as U,l,a as dt,b as V,g as t,d as $,e as D,c as E,m as r,s as o,az as q,n as J,r as B,f as ct}from"../chunks/DYX0w8bX.js";import{t as X,a as S,b as K}from"../chunks/Bz76f8pg.js";import{i as Y}from"../chunks/CZRFLhJG.js";import{s as Z,a as _,b as L}from"../chunks/CgU0heln.js";import{p as tt}from"../chunks/DOYgSXUg.js";import{P as pt}from"../chunks/navuEww_.js";import{t as ft}from"../chunks/D2OY9xdY.js";import{e as ut,i as vt}from"../chunks/CgLBepva.js";import{E as mt}from"../chunks/BIZ2eT4o.js";import{B as M}from"../chunks/pnLOYuxo.js";import{g as gt}from"../chunks/BoD0Wgms.js";import{i as wt}from"../chunks/5AVHl7By.js";import{f as $t}from"../chunks/BE5LMCWL.js";import{f as T,e as _t}from"../chunks/H8HPoVlK.js";import{w as ht}from"../chunks/D0drot8M.js";import{m as Q}from"../chunks/vye8K-vg.js";var xt=X('<div class="flex flex-col gap-2 px-8 pb-24 pt-2" data-testid="event-summary-log"><!> <table><thead></thead><tbody class="svelte-4cez6d"></tbody></table> <!></div>');function bt(P,N){U(N,!1);const[f,z]=Z(),u=()=>_(tt,"$page",f),n=()=>_(T,"$fullEventHistory",f),h=()=>_(ht,"$workflowRun",f),w=()=>_(_t,"$eventFilterSort",f),c=r(),v=r(),m=r(),x=r(),a=r(),p=r(),F=r(),H=r(),b=r(),G=r(),g=r(),y=r(),A=r(),W=r();var k=r();const et=()=>{L(T,[])},st=async(e,s,i)=>{n().length||(et(),L(T,await $t({namespace:e,workflowId:s,runId:i})))},ot=()=>{const e=parseInt(t(a)[0]),s=[],i=e-10;for(let d=0;d<10;d++)i+d>0&&s.push((i+d).toString());o(a,[...s,...t(a)])},rt=()=>{const e=parseInt(t(a)[t(a).length-1]),s=[],i=e+1;for(let d=0;d<10;d++)i+d<=n().length&&s.push((i+d).toString());o(a,[...t(a),...s])};l(()=>(t(c),t(v),t(m),t(x),u()),()=>{(e=>(o(c,e.id),o(v,e.namespace),o(m,e.workflow),o(x,e.run)))(u().params)}),l(()=>t(c),()=>{o(a,[t(c)])}),l(()=>(t(v),t(m),t(x)),()=>{st(t(v),t(m),t(x))}),l(()=>(t(p),h()),()=>{(e=>o(p,e.workflow))(h())}),l(()=>t(p),()=>{o(F,t(p)===null||t(p)===void 0?void 0:t(p).pendingActivities)}),l(()=>t(p),()=>{o(H,t(p)===null||t(p)===void 0?void 0:t(p).pendingNexusOperations)}),l(()=>(n(),t(F),t(H)),()=>{o(b,gt(n(),"ascending",t(F),t(H)))}),l(()=>(w(),t(b)),()=>{o(G,w()==="ascending"?t(b):[...t(b)].reverse())}),l(()=>(n(),t(c),Q),()=>{o(g,n().find(e=>{var s;return t(c)===e.id||Q(e)&&t(c)===((s=e.attributes)===null||s===void 0?void 0:s.requestId)}))}),l(()=>(n(),t(a),t(g)),()=>{o(y,n().filter(e=>t(a).includes(e.id)||e.id===(t(g)===null||t(g)===void 0?void 0:t(g).id)))}),l(()=>t(y),()=>{o(A,!t(y).length)}),l(()=>(q(k),n()),()=>{o(W,o(k,n()[n().length-1])===null||q(k)===void 0?void 0:q(k).id)}),dt(),Y();var O=xt(),j=D(O);const nt=$(()=>t(a)[0]==="1"||t(A));M(j,{variant:"secondary",size:"xs",leadingIcon:"arrow-up",get disabled(){return t(nt)},"data-testid":"load-previous",$$events:{click:ot},children:(e,s)=>{J();var i=K("Show Previous 10");S(e,i)},$$slots:{default:!0}});var R=E(j,2),C=E(D(R));ut(C,5,()=>t(y),vt,(e,s,i)=>{const d=$(()=>{var I;return t(s).id===((I=t(g))==null?void 0:I.id)}),lt=$(()=>t(G).find(I=>wt(t(s))&&I.eventIds.has(t(s).id)));mt(e,{get event(){return t(s)},index:i,get expanded(){return t(d)},get group(){return t(lt)},get initialItem(){return n()[0]}})}),B(C),B(R);var at=E(R,2);const it=$(()=>t(a)[t(a).length-1]===t(W)||t(A));M(at,{variant:"secondary",size:"xs",leadingIcon:"arrow-down",get disabled(){return t(it)},"data-testid":"load-next",$$events:{click:rt},children:(e,s)=>{J();var i=K("Show Next 10");S(e,i)},$$slots:{default:!0}}),B(O),S(P,O),V(),z()}var yt=X("<!> <!>",1);function Ct(P,N){U(N,!1);const[f,z]=Z(),u=()=>_(tt,"$page",f),n=u().params.workflow,h=u().params.id;Y();var w=yt(),c=ct(w);const v=$(()=>`${ft("workflows.workflow-history")} | ${n} | Event ${h}`);pt(c,{get title(){return t(v)},get url(){return u().url.href}});var m=E(c,2);bt(m,{}),S(P,w),V(),z()}export{Ct as component};
