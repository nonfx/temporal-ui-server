import"./BLjkLUx2.js";import{r as k,a as l}from"./Db8GgboF.js";async function g(p,o=fetch){var i;const n=k("task-queue",p),s=await l(n,{request:o,params:{taskQueueType:"1"}}),e=await l(n,{request:o,params:{taskQueueType:"2"}});s!=null&&s.pollers||(s.pollers=[]),e!=null&&e.pollers||(e.pollers=[]),e.pollers.forEach(t=>{t.taskQueueTypes=["ACTIVITY"]}),s.pollers.forEach(t=>{t.taskQueueTypes=["WORKFLOW"]});const c=t=>(u,a)=>{const r=u[a.identity]||{lastAccessTime:void 0,taskQueueTypes:[]};return u[a.identity]={lastAccessTime:!r.lastAccessTime||r.lastAccessTime<a.lastAccessTime?a.lastAccessTime:r.lastAccessTime,taskQueueTypes:r.taskQueueTypes.concat([t])},u};e.pollers.filter(t=>s.pollers.some(u=>{if(t.identity===u.identity)return t.taskQueueTypes=[...u.taskQueueTypes,...t.taskQueueTypes],t})),(i=e.pollers)==null||i.reduce(c("ACTIVITY"),s.pollers.reduce(c("WORKFLOW"),{}));const T=e.pollers.length?e.pollers:s.pollers,m=e.pollers.length?e.taskQueueStatus:s.taskQueueStatus,y=e.pollers.length?e.versioningInfo:s.versioningInfo;return{pollers:T,taskQueueStatus:m,versioningInfo:y}}export{g};
