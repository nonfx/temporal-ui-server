import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{e as G,f as O,d as f,n as ze,k as Ie,i as K,p as qt,l as ue,a as Pt,b as Tt,g as r,m as N,s as S,ac as H,aB as Se,t as q,h as M,c as L,r as V,j as E}from"./DSxqszTl.js";import{s as te,e as Z}from"./CXaSvchK.js";import{i as _}from"./BAt4aHTa.js";import{e as Je,i as Qe}from"./B5GJuRxG.js";import{s as me,a as Mt}from"./Qdkaj6Y8.js";import{r as Vt,c as Ue,s as We,b as Et,a as Dt}from"./DyEeuWnl.js";import{b as Ht}from"./K6Afqa47.js";import{s as $}from"./Bfc47y5P.js";import{i as Kt}from"./BcaHj5WR.js";import{p as a,l as Xe}from"./Bp73-jql.js";import{s as Bt,a as Rt,b as Oe}from"./CZBNCVvj.js";import{c as jt,B as Ft}from"./-jFGsH1F.js";import{c as Nt,w as Gt}from"./Cb3VdkNs.js";import{b as Jt}from"./13eOOzQn.js";import{b as Qt,c as Ut,d as Wt}from"./hz5-BGlB.js";import{L as Xt}from"./LntrTj2C.js";import{B as Ye}from"./DRqFL8Fm.js";import{C as Yt}from"./CZQakDau.js";import{I as Ae}from"./Dc8cZy7F.js";import{M as Zt}from"./O3lg-vfE.js";import{T as Ze}from"./CFAn1g9i.js";import{t as fe}from"./Ds6tgvmq.js";function ee(ve,t){let re=a(t,"selected",8,!1),J=a(t,"disabled",8,!1),ge=a(t,"label",8);Qt(ve,{role:"option",class:"break-all",get"aria-selected"(){return re()},get"aria-disabled"(){return J()},get selected(){return re()},get disabled(){return J()},$$events:{click(A){Jt.call(this,t,A)}},children:(A,le)=>{ze();var o=Ie();K(()=>te(o,ge())),f(A,o)},$$slots:{default:!0,leading:(A,le)=>{var o=G(),P=O(o);me(P,t,"leading",{},null),f(A,o)},trailing:(A,le)=>{var o=G(),P=O(o);me(P,t,"trailing",{},null),f(A,o)}}})}const $t=jt(["surface-primary","flex","max-h-28","min-h-10","w-full","flex-row","items-center","overflow-auto","border","text-sm","dark:focus-within:surface-primary","focus-within:outline-none","focus-within:ring-2"],{variants:{variant:{default:"border-subtle focus-within:border-interactive focus-within:ring-primary/70",ghost:"bg-transparent border-transparent focus-within:border-transparent focus-within:ring-transparent focus-within:bg-transparent hover:surface-interactive-secondary"}},defaultVariants:{variant:"default"}});var er=q("<p> </p>"),tr=q("<!> <!>",1),rr=q('<div class="ml-1 flex h-full items-start border-l border-subtle p-0.5"><!></div>'),lr=q('<div class="ml-1 flex h-full items-center border-l border-subtle p-0.5"><!></div>'),ar=q('<button type="button" class="hover:bg-gray-100 flex h-full items-center rounded pr-2 focus:outline-none" tabindex="-1"><!></button>'),sr=q("<!> <!> <!>",1),nr=q("<!> <!> <!>",1),ir=q('<span class="error svelte-1lqkhpx"> </span>'),or=q('<div class="flex flex-col gap-1"><!> <div><!> <div><!> <input></div> <!> <!></div></div> <!> <!>',1);function Tr(ve,t){const re=Mt(t),J=Xe(t,["children","$$slots","$$events","$$legacy"]),ge=Xe(J,["class","id","label","multiselect","value","noResultsText","disabled","labelHidden","options","placeholder","readonly","required","leadingIcon","showChevron","optionValueKey","optionLabelKey","minSize","maxSize","error","valid","displayChips","chipLimit","selectAllLabel","deselectAllLabel","removeChipLabel","actionTooltip","href","hrefDisabled","loading","loadingText","variant","numberOfItemsSelectedLabel","open","maxMenuHeight"]);qt(t,!1);const[A,le]=Bt(),o=()=>Rt(W(),"$open",A),P=N(),Q=Nt();let qe=a(t,"class",8,""),U=a(t,"id",8),$e=a(t,"label",8),x=a(t,"multiselect",8,!1),l=a(t,"value",28,()=>x()?[]:void 0),et=a(t,"noResultsText",8),Pe=a(t,"disabled",8,!1),tt=a(t,"labelHidden",8,!1),B=a(t,"options",8),rt=a(t,"placeholder",8,null),lt=a(t,"readonly",8,!1),be=a(t,"required",8,!1),ae=a(t,"leadingIcon",8,null),at=a(t,"showChevron",8,!1),T=a(t,"optionValueKey",8,null),se=a(t,"optionLabelKey",24,T),he=a(t,"minSize",8,0),_e=a(t,"maxSize",8,120),Te=a(t,"error",8,""),Me=a(t,"valid",8,!0),st=a(t,"displayChips",8,!0),xe=a(t,"chipLimit",8,5),nt=a(t,"selectAllLabel",8,"Select All"),it=a(t,"deselectAllLabel",8,"Deselect All"),ot=a(t,"removeChipLabel",8,"Remove Option"),ne=a(t,"actionTooltip",8,""),pe=a(t,"href",8,""),Ve=a(t,"hrefDisabled",8,!1),Ee=a(t,"loading",8,!1),dt=a(t,"loadingText",8,"Loading more results"),De=a(t,"variant",8,"default"),ct=a(t,"numberOfItemsSelectedLabel",8,e=>`${e} option${e>1?"s":""} selected`),p=N(""),ie=N(""),R=N(),ye=N(),m=N(),W=a(t,"open",24,()=>Gt(!1)),ut=a(t,"maxMenuHeight",8,"max-h-[20rem]");const X=()=>{Oe(W(),!0),S(ie,""),r(m).focus(),r(m).select()},He=()=>{o()&&(Oe(W(),!1),Q("close",{selectedOption:r(R)}),we())},ft=()=>{Q("close",{selectedOption:r(R)}),we()},we=()=>{S(p,Le(r(R))),S(P,B())},z=e=>Array.isArray(e),j=e=>typeof e=="string",F=e=>typeof e=="object",Y=e=>e===null||typeof e!="object"?!1:T()!==null&&se()!==null&&T()in e&&se()in e,Le=e=>{if(!e)return z(l())?"":l()!==null&&l()!==void 0?l():"";if(j(e))return e;if(F(e)&&Y(e))return String(e[se()])},mt=e=>{if(j(e)&&(z(l())?l().includes(e)?l(l().filter(c=>c!==e)):l([...l(),e]):l(e)),F(e)&&Y(e)){const c=String(e[T()]);z(l())?l().includes(c)?l(l().filter(b=>b!==c)):l([...l(),c]):l(c)}},vt=e=>{mt(e),Q("change",{value:e}),x()||we()},gt=e=>{z(l())&&l(l().filter(c=>c!==e))},bt=()=>{!x()||!z(l())||l(r(P).map(e=>{if(F(e)&&Y(e))return String(e[T()]);if(j(e))return e}))},ht=()=>{l([])},Ke=()=>{const e=r(ye).querySelector('li[role="option"]:not([aria-disabled="true"])');e&&requestAnimationFrame(()=>e.focus())},_t=e=>{switch(e.key){case"Escape":He();break;case"ArrowDown":X(),Ke();break;case"Enter":X(),Ke();break}},xt=e=>{o()||Oe(W(),!0),S(p,e.currentTarget.value),S(ie,r(p)),Q("input",r(p))};function pt(e,c){return Q("filter",r(p)),c.filter(b=>{if(j(b))return b.toLowerCase().includes(e.toLowerCase());if(F(b)&&Y(b))return String(b[se()]).toLowerCase().includes(e.toLowerCase())})}const yt=()=>{o()||X()},wt=(e,c)=>{if(F(e)){const b=String(e[T()]);return z(c)?c.includes(b):c===b}else if(j(e))return z(c)?c.includes(e):c===e;return!1};ue(()=>(o(),r(m)),()=>{o()&&r(m)&&document.activeElement!==r(m)&&(r(m).focus(),r(m).select())}),ue(()=>(r(ie),H(B())),()=>{S(P,pt(r(ie),B()))}),ue(()=>(H(x()),r(R),H(B()),H(l()),H(T())),()=>{x()||(S(R,B().find(e=>{if(j(e))return e===l();if(F(e)&&Y(e))return e[T()]===l()})),S(p,Le(r(R))))}),ue(()=>(r(m),r(p),H(he()),H(_e())),()=>{r(m)&&r(p)&&(r(p).length<he()?Se(m,r(m).size=he()):r(p).length>_e()?Se(m,r(m).size=_e()):Se(m,r(m).size=r(p).length))}),Pt(),Kt(),Ut(ve,{get open(){return W()},$$events:{close:ft},children:(e,c)=>{var b=or(),ke=O(b),Be=M(ke);Xt(Be,{get hidden(){return tt()},get required(){return be()},get label(){return $e()},get for(){return U()}});var Ce=L(Be,2),Re=M(Ce);{var Lt=s=>{Ae(s,{class:"ml-2 shrink-0",get name(){return ae()}})};_(Re,s=>{ae()&&s(Lt)})}var oe=L(Re,2),je=M(oe);{var kt=s=>{var i=G(),v=O(i);{var y=u=>{var h=tr(),k=O(h);Je(k,1,()=>l().slice(0,xe()),Qe,(g,w)=>{Yt(g,{get removeButtonLabel(){return ot()},$$events:{remove:()=>gt(r(w))},children:(C,de)=>{ze();var ce=Ie();K(()=>te(ce,r(w))),f(C,ce)},$$slots:{default:!0}})});var n=L(k,2);{var d=g=>{var w=er(),C=M(w);V(w),K(de=>te(C,`+${de??""}`),[()=>l().slice(xe()).length],E),f(g,w)};_(n,g=>{l().length>xe()&&g(d)})}f(u,h)},I=u=>{Ft(u,{children:(h,k)=>{ze();var n=Ie();K(d=>te(n,d),[()=>ct()(l().length)],E),f(h,n)},$$slots:{default:!0}})};_(v,u=>{st()?u(y):u(I,!1)})}f(s,i)};_(je,s=>{x()&&z(l())&&l().length>0&&s(kt)})}var D=L(je,2);Vt(D);let Fe;Ht(D,s=>S(m,s),()=>r(m)),V(oe);var Ne=L(oe,2);{var Ct=s=>{var i=rr(),v=M(i);{var y=u=>{Ze(u,{get text(){return ne()},right:!0,children:(h,k)=>{var n=G(),d=O(n);me(d,t,"action",{},null),f(h,n)},$$slots:{default:!0}})},I=u=>{var h=G(),k=O(h);me(k,t,"action",{},null),f(u,h)};_(v,u=>{ne()?u(y):u(I,!1)})}V(i),f(s,i)},St=(s,i)=>{{var v=y=>{var I=lr(),u=M(I);{var h=n=>{Ze(n,{get text(){return ne()},right:!0,children:(d,g)=>{Ye(d,{variant:"ghost",size:"xs",get href(){return pe()},get disabled(){return Ve()},leadingIcon:"external-link"})},$$slots:{default:!0}})},k=n=>{Ye(n,{variant:"ghost",size:"xs",get href(){return pe()},get disabled(){return Ve()},leadingIcon:"external-link"})};_(u,n=>{ne()?n(h):n(k,!1)})}V(I),f(y,I)};_(s,y=>{pe()&&y(v)},i)}};_(Ne,s=>{re.action?s(Ct):s(St,!1)})}var Ot=L(Ne,2);{var At=s=>{var i=ar(),v=M(i);const y=E(()=>fe("transition-transform duration-200",o()&&"rotate-180",!o()&&"rotate-0"));Ae(v,{name:"chevron-down",get class(){return r(y)}}),V(i),K(()=>Dt(i,"aria-label",o()?"Close options":"Open options")),Z("click",i,$(()=>o()?He():X())),f(s,i)};_(Ot,s=>{at()&&s(At)})}V(Ce),V(ke);var Ge=L(ke,2);Wt(Ge,{get keepOpen(){return x()},get id(){return`${U()??""}-listbox`},role:"listbox",class:"w-full",get maxHeight(){return ut()},get menuElement(){return r(ye)},set menuElement(s){S(ye,s)},children:(s,i)=>{var v=nr(),y=O(v);{var I=n=>{var d=sr(),g=O(d);const w=E(()=>l().length===B().length);ee(g,{get disabled(){return r(w)},get label(){return nt()},$$events:{click:bt}});var C=L(g,2);const de=E(()=>l().length===0);ee(C,{get disabled(){return r(de)},get label(){return it()},$$events:{click:ht}});var ce=L(C,2);Zt(ce),f(n,d)};_(y,n=>{x()&&z(l())&&n(I)})}var u=L(y,2);Je(u,1,()=>r(P),Qe,(n,d)=>{const g=E(()=>wt(r(d),l())),w=E(()=>Le(r(d)));ee(n,{get selected(){return r(g)},get label(){return r(w)},$$events:{click:()=>vt(r(d))}})},n=>{var d=G(),g=O(d);{var w=C=>{ee(C,{disabled:!0,get label(){return et()}})};_(g,C=>{Ee()===!1&&C(w)})}f(n,d)});var h=L(u,2);{var k=n=>{ee(n,{disabled:!0,get label(){return dt()},$$slots:{leading:(d,g)=>{Ae(d,{slot:"leading",name:"spinner",class:"animate-spin"})}}})};_(h,n=>{Ee()&&n(k)})}f(s,v)},$$slots:{default:!0},$$legacy:!0});var zt=L(Ge,2);{var It=s=>{var i=ir(),v=M(i,!0);V(i),K(()=>te(v,Te())),f(s,i)};_(zt,s=>{Te()&&!Me()&&s(It)})}K((s,i,v)=>{We(Ce,1,s,"svelte-1lqkhpx"),We(oe,1,i,"svelte-1lqkhpx"),Fe=Et(D,Fe,{id:U(),placeholder:rt(),required:be(),readonly:lt(),disabled:Pe(),type:"text",value:r(p),class:v,role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","data-lpignore":"true","data-1p-ignore":"true","aria-controls":`${U()??""}-listbox`,"aria-expanded":o(),"aria-required":be(),"aria-autocomplete":"list","data-testid":J["data-testid"]??U(),...ge},"svelte-1lqkhpx")},[()=>Ue(fe($t({variant:De()}),!Me()&&De()==="default"&&"border border-danger text-danger focus-within:ring-danger/70",Pe()&&"opacity-50",qe())),()=>Ue(fe("input-wrapper",x()&&"gap-1",x()&&"m-1",ae()&&x()&&"ml-2")),()=>fe("combobox-input",x()?l().length>0||ae()?"indent-0":"indent-1":"indent-2",qe())],E),Z("focus",D,$(X)),Z("input",D,$(xt)),Z("keydown",D,$(_t)),Z("click",D,$(yt)),f(e,b)},$$slots:{default:!0}}),Tt(),le()}export{Tr as C};
