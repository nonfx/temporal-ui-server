import"./CWj6FrbW.js";import{p as gt,az as n,aC as F,Y as st,g as e,t as B,h as o,c as a,s as p,r as s,n as St,k as _t,i as H,d as g,b as ht,f as ct,A as xt,e as Vt,j as J,o as Re}from"./DSxqszTl.js";import{s as k,e as Fe}from"./CXaSvchK.js";import{i as E}from"./BAt4aHTa.js";import{k as le}from"./CvtqSEth.js";import{s as We}from"./Nsxp-0jx.js";import{s as Mt,b as Kt,a as Et}from"./CZBNCVvj.js";import{p as ce}from"./C88AuNN7.js";import{s as Ue}from"./DyEeuWnl.js";import{p as Ht}from"./Bp73-jql.js";import{B as Nt}from"./DEuGNPYc.js";import{T as se}from"./CFAn1g9i.js";import{t as r}from"./D2OY9xdY.js";import{C as Ot}from"./BKbjjHdT.js";import{D as Be,a as Le}from"./BMf7L5zv.js";import{I as mt}from"./jb4biyLz.js";import{N as ke}from"./X8PRUnQJ.js";import{L as lt}from"./LntrTj2C.js";import{g as je}from"./Cb3VdkNs.js";import{a as ze}from"./DlMariDq.js";import{s as Yt}from"./byHaz_JD.js";import{r as Gt,a as Jt}from"./ODaJzjnF.js";import{t as ve}from"./DjXfOCsk.js";import{r as Xt,w as Qe}from"./B0rcaDAb.js";import{k as Pt,e as qe,l as Ee}from"./CLGfdnHC.js";import{M as de}from"./HsNdq0Mp.js";import{P as Ie}from"./CVfl-jLh.js";import{W as Ve}from"./L-HzL4_-.js";import{A as Ke}from"./D_VQ-nFn.js";import{B as Ye}from"./-jFGsH1F.js";import{C as ne}from"./15E2Hi1B.js";import{I as Ge}from"./Dc8cZy7F.js";import{c as Je}from"./ChZF1bui.js";import{f as Ct,r as Xe,t as Ze}from"./BSP6lJQ9.js";import{c as Ae}from"./ByTIZu23.js";import{k as $e,l as ta}from"./BFeHdQJz.js";import{o as ea}from"./C8ejR22J.js";const aa=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution","meta"]),ia=new Set(["maximumAttempts"]),ra=(l,t)=>l===0?r("workflows.no-expiration"):t,oa=(l,t)=>l?l-t:r("workflows.unlimited"),sa=l=>l||r("workflows.unlimited"),na=(l,t)=>l==="maximumAttempts"&&!t?r("workflows.unlimited"):t,la=(l,t)=>{if(aa.has(t)&&typeof l[t]=="object"){for(const[c,m]of Object.entries(l[t]))ta(m)&&(ia.has(c)?l[`${t}${Ae(c)}`]=na(c,m):l[`${t}${Ae(c)}`]=m);delete l[t]}},bi=l=>{const t={};if(l.attributes)for(const[c,m]of Object.entries(l.attributes))$e(c,m)&&(t[c]=m),la(t,c);return t},ca=({date:l,now:t=Date.now(),negativeDefault:c})=>{if(!l)return"";const m=String(l);try{const I=(Number(new Date(m))-t)/1e3;return c!==void 0&&I<0?c:isNaN(I)?"":`${I.toFixed(0)}s`}catch{return""}},Zt=()=>{var c;const l=(c=je(ze))==null?void 0:c.email;return l?`From the Web UI by ${l}`:"From the Web UI"},va=async({namespace:l,execution:t,id:c,reason:m,type:v})=>{const I=Gt("activity.pause",{namespace:l});return Jt(I,{options:{method:"POST",body:Yt({execution:t,reason:m,identity:Zt(),id:c,type:v})}})},da=async({namespace:l,execution:t,id:c,type:m})=>{const v=Gt("activity.unpause",{namespace:l});return Jt(v,{options:{method:"POST",body:Yt({execution:t,identity:Zt(),id:c,type:m})}})},ua=async({namespace:l,execution:t,id:c,type:m,resetHeartbeat:v})=>{const I=Gt("activity.reset",{namespace:l});return Jt(I,{options:{method:"POST",body:Yt({execution:t,identity:Zt(),id:c,type:m,resetHeartbeat:v})}})},ma=async({namespace:l,execution:t,id:c,type:m,activityOptions:v})=>{const I=Gt("activity.update-options",{namespace:l});return Jt(I,{options:{method:"POST",body:Yt({execution:t,identity:Zt(),id:c,type:m,activityOptions:v,updateMask:"taskQueue.name,scheduleToCloseTimeout,scheduleToStartTimeout,startToCloseTimeout,heartbeatTimeout,retryPolicy.initialInterval,retryPolicy.backoffCoefficient,retryPolicy.maximumInterval,retryPolicy.maximumAttempts"})}})};var fa=B(`<form class="flex flex-col gap-4"><div><!> <p class="mb-1 text-xs text-secondary">Maximum permitted time between successful Worker Heartbeats.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Coefficient used to calculate the next retry interval. The next retry
          interval is previous interval multiplied by the coefficient. Must be 1
          or larger.</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Interval of the first retry. If retryBackoffCoefficient is 1.0 then it
          is used for all retries.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum number of attempts. When exceeded the retries stop even if not
          expired yet. 1 disables retries. 0 means unlimited (up to the
          timeouts).</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Indicates how long the caller is willing to wait for an Activity
          completion. Limits how long retries will be attempted.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Limits time an Activity Task can stay in a task queue before a Worker
          picks it up. This timeout is always non retryable, as all a retry
          would achieve is to put it back into the same queue.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum time an Activity is allowed to execute after being picked up
          by a Worker. This Timeout is always retryable.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <!></div> <!> <div class="flex items-center justify-end gap-4"><!> <!></div></form>`);function ya(l,t){gt(t,!0);const[c,m]=Mt();var v,I,C,D,j,_,f,S,K,Y,R,A,M,y;const h=G=>!G||!G.endsWith("s")?"":G==null?void 0:G.replace("s",""),N=G=>{if(G)return G+"s"};let V=Ht(t,"open",15),z=n(()=>t.activity.activityId),at=n(()=>t.activity.activityType),$=F(st((I=(v=t.activity.activityOptions)===null||v===void 0?void 0:v.taskQueue)===null||I===void 0?void 0:I.name)),Q=F(st(h(String((C=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||C===void 0?void 0:C.scheduleToCloseTimeout)))),w=F(st(h(String((D=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||D===void 0?void 0:D.scheduleToStartTimeout)))),et=F(st(h(String((j=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||j===void 0?void 0:j.startToCloseTimeout)))),X=F(st(h(String((_=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||_===void 0?void 0:_.heartbeatTimeout)))),it=F(st((S=(f=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||f===void 0?void 0:f.retryPolicy)===null||S===void 0?void 0:S.maximumAttempts)),tt=F(st((Y=(K=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||K===void 0?void 0:K.retryPolicy)===null||Y===void 0?void 0:Y.backoffCoefficient)),Z=F(st(h(String((A=(R=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||R===void 0?void 0:R.retryPolicy)===null||A===void 0?void 0:A.initialInterval)))),ft=st(h(String((y=(M=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||M===void 0?void 0:M.retryPolicy)===null||y===void 0?void 0:y.maximumInterval))),yt=F(!1);const Rt=n(()=>({taskQueue:{name:e($)},scheduleToCloseTimeout:N(e(Q)),scheduleToStartTimeout:N(e(w)),startToCloseTimeout:N(e(et)),heartbeatTimeout:N(e(X)),retryPolicy:{maximumAttempts:e(it),initialInterval:N(e(Z)),backoffCoefficient:e(tt),maximumInterval:N(ft)}})),wt=()=>{V(!1)},Ft=async G=>{G.preventDefault();try{await ma({namespace:t.namespace,execution:t.execution,id:e(yt)?void 0:e(z),type:e(yt)?e(at):void 0,activityOptions:e(Rt)}),Kt(Xt,Date.now()),ve.push({variant:"success",message:`Options for Activity ${e(z)} have been updated.`})}catch(vt){console.error("Error updating activity options:",vt),ve.push({variant:"error",message:`Options for Activity ${e(z)} have been failed to update: ${vt==null?void 0:vt.message}`,duration:5e3})}finally{wt()}},$t=n(()=>r("common.close"));Be(l,{get open(){return V()},onClick:wt,position:"right",id:"activity-options-update-drawer",dark:!1,get closeButtonLabel(){return e($t)},class:"w-[480px]",children:(G,vt)=>{Le(G,{get title(){return`Update Activity ${t.activity.activityId??""}`},children:(Wt,ue)=>{var dt=fa(),bt=o(dt),Tt=o(bt);lt(Tt,{for:"heartbeat-timeout",label:"Heartbeat Timeout Duration"});var Ut=a(Tt,4),Bt=o(Ut);const te=n(()=>isNaN(Number(e(X))));mt(Bt,{id:"heartbeat-timeout",label:"Heartbeat Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(te)},get value(){return e(X)},set value(O){p(X,O,!0)}});var kt=a(Bt,2),Lt=o(kt,!0);s(kt),s(Ut),s(bt);var It=a(bt,2),jt=o(It);lt(jt,{for:"retry-backoff-coefficient",label:"Retry Backoff Coefficient"});var ee=a(jt,4);ke(ee,{id:"retry-backoff-coefficient",label:"Retry Backoff Coefficient",labelHidden:!0,step:.01,min:1,class:"w-24",get value(){return e(tt)},set value(O){p(tt,O,!0)}}),s(It);var i=a(It,2),u=o(i);lt(u,{for:"retry-initial-interval",label:"Retry Initial Interval Duration"});var d=a(u,4),W=o(d);const L=n(()=>isNaN(Number(e(Z))));mt(W,{id:"retry-initial-interval",label:"Retry Initial Interval Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(L)},get value(){return e(Z)},set value(O){p(Z,O,!0)}});var x=a(W,2),q=o(x,!0);s(x),s(d),s(i);var P=a(i,2),b=o(P);lt(b,{for:"maximum-attempts",label:"Retry Maximum Attempts"});var T=a(b,4);ke(T,{id:"maximum-attempts",label:"Retry Maximum Attempts",labelHidden:!0,class:"w-24",get value(){return e(it)},set value(O){p(it,O,!0)}}),s(P);var U=a(P,2),nt=o(U);lt(nt,{for:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration"});var rt=a(nt,4),pt=o(rt);const zt=n(()=>isNaN(Number(e(Q))));mt(pt,{id:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(zt)},get value(){return e(Q)},set value(O){p(Q,O,!0)}});var Qt=a(pt,2),ae=o(Qt,!0);s(Qt),s(rt),s(U);var At=a(U,2),qt=o(At);lt(qt,{for:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration"});var me=a(qt,4),fe=o(me);const De=n(()=>isNaN(Number(e(w))));mt(fe,{id:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(De)},get value(){return e(w)},set value(O){p(w,O,!0)}});var ye=a(fe,2),Pe=o(ye,!0);s(ye),s(me),s(At);var ie=a(At,2),pe=o(ie);lt(pe,{for:"start-to-close-timeout",label:"Start to Close Timeout Duration"});var _e=a(pe,4),xe=o(_e);const Ce=n(()=>isNaN(Number(e(et))));mt(xe,{id:"start-to-close-timeout",label:"Start to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(Ce)},get value(){return e(et)},set value(O){p(et,O,!0)}});var ge=a(xe,2),Se=o(ge,!0);s(ge),s(_e),s(ie);var re=a(ie,2),he=o(re);lt(he,{for:"task-queue-name",label:"Task Queue Name"});var Ne=a(he,2);mt(Ne,{id:"task-queue-name",label:"Task Queue Name",labelHidden:!0,class:"w-full",get value(){return e($)},set value(O){p($,O,!0)}}),s(re);var we=a(re,2);const Oe=n(()=>r("activities.apply-to-all-activity-types",{type:e(at)}));Ot(we,{get label(){return e(Oe)},get checked(){return e(yt)},set checked(O){p(yt,O,!0)}});var be=a(we,2),Te=o(be);Nt(Te,{type:"button",variant:"ghost",size:"sm",$$events:{click:wt},children:(O,oe)=>{St();var ut=_t();H(Dt=>k(ut,Dt),[()=>r("common.cancel")]),g(O,ut)},$$slots:{default:!0}});var Me=a(Te,2);Nt(Me,{type:"submit",variant:"primary",size:"sm",children:(O,oe)=>{St();var ut=_t();H(Dt=>k(ut,Dt),[()=>r("common.save")]),g(O,ut)},$$slots:{default:!0}}),s(be),s(dt),H((O,oe,ut,Dt,He)=>{k(Lt,O),k(q,oe),k(ae,ut),k(Pe,Dt),k(Se,He)},[()=>Pt(e(X)),()=>Pt(e(Z)),()=>Pt(e(Q)),()=>Pt(e(w)),()=>Pt(e(et))]),Fe("submit",dt,Ft),g(Wt,dt)},$$slots:{default:!0}})},$$slots:{default:!0}}),ht(),m()}var pa=B('<h3 slot="title"> </h3>'),_a=B('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function xa(l,t){gt(t,!0);const[c,m]=Mt();let v=Ht(t,"open",15),I=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),D=F(""),j=!1,_=F(""),f=F(!1);const S=()=>{v(!1),p(_,""),p(f,!1)},K=async()=>{await va({namespace:t.namespace,execution:t.execution,id:e(f)?void 0:e(I),reason:e(_),type:e(f)?e(C):void 0}),Kt(Xt,Date.now()),S()},Y=n(()=>r("workflows.pause")),R=n(()=>r("common.cancel"));de(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return j},get confirmText(){return e(Y)},get cancelText(){return e(R)},confirmType:"destructive",get error(){return e(D)},set error(A){p(D,A,!0)},get open(){return v()},set open(A){v(A)},$$events:{cancelModal:S,confirmModal:K},$$slots:{title:(A,M)=>{var y=pa(),h=o(y,!0);s(y),H(N=>k(h,N),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),g(A,y)},content:(A,M)=>{var y=_a(),h=o(y),N=o(h,!0);s(h);var V=a(h,2);const z=n(()=>r("common.reason-placeholder")),at=n(()=>r("common.reason"));mt(V,{id:"activity-pause-reason",class:"mt-4",get placeholder(){return e(z)},get label(){return e(at)},get value(){return e(_)},set value(w){p(_,w,!0)}});var $=a(V,2);const Q=n(()=>r("activities.pause-all-activity-types",{type:e(C)}));Ot($,{get label(){return e(Q)},get checked(){return e(f)},set checked(w){p(f,w,!0)}}),s(y),H(w=>k(N,w),[()=>r("activities.pause-modal-description")]),g(A,y)}}}),ht(),m()}var ga=B('<h3 slot="title"> </h3>'),ha=B('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function wa(l,t){gt(t,!0);const[c,m]=Mt();let v=Ht(t,"open",15),I=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),D=F(""),j=!1,_=F(!1),f=F(!1);const S=()=>{v(!1),p(_,!1),p(f,!1)},K=async()=>{await ua({namespace:t.namespace,execution:t.execution,id:e(_)?void 0:e(I),resetHeartbeat:e(f),type:e(_)?e(C):void 0}),Kt(Xt,Date.now()),ve.push({variant:"success",message:r("activities.reset-success",{activityId:e(I)})}),S()},Y=n(()=>r("workflows.reset")),R=n(()=>r("common.cancel"));de(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return j},get confirmText(){return e(Y)},get cancelText(){return e(R)},confirmType:"destructive",get error(){return e(D)},set error(A){p(D,A,!0)},get open(){return v()},set open(A){v(A)},$$events:{cancelModal:S,confirmModal:K},$$slots:{title:(A,M)=>{var y=ga(),h=o(y,!0);s(y),H(N=>k(h,N),[()=>r("activities.reset-modal-confirmation",{activityId:t.activity.id})]),g(A,y)},content:(A,M)=>{var y=ha(),h=o(y),N=o(h,!0);s(h);var V=a(h,2);const z=n(()=>r("activities.apply-to-all-activity-types",{type:e(C)}));Ot(V,{get label(){return e(z)},get checked(){return e(_)},set checked(Q){p(_,Q,!0)}});var at=a(V,2);const $=n(()=>r("activities.reset-heartbeat-details"));Ot(at,{get label(){return e($)},get checked(){return e(f)},set checked(Q){p(f,Q,!0)}}),s(y),H(Q=>k(N,Q),[()=>r("activities.reset-modal-description")]),g(A,y)}}}),ht(),m()}var ba=B('<h3 slot="title"> </h3>'),Ta=B('<div slot="content" class="flex flex-col gap-4"><p> </p> <!></div>');function ka(l,t){gt(t,!0);const[c,m]=Mt();let v=Ht(t,"open",15),I=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),D=F(""),j=!1,_=F(!1);const f=()=>{v(!1),p(_,!1)},S=async()=>{await da({namespace:t.namespace,execution:t.execution,id:e(_)?void 0:e(I),type:e(_)?e(C):void 0}),Kt(Xt,Date.now()),f()},K=n(()=>r("workflows.unpause")),Y=n(()=>r("common.cancel"));de(l,{id:"activity-unpause-confirmation-modal","data-testid":"activity-unpause-confirmation-modal",get loading(){return j},get confirmText(){return e(K)},get cancelText(){return e(Y)},confirmType:"destructive",get error(){return e(D)},set error(R){p(D,R,!0)},get open(){return v()},set open(R){v(R)},$$events:{cancelModal:f,confirmModal:S},$$slots:{title:(R,A)=>{var M=ba(),y=o(M,!0);s(M),H(h=>k(y,h),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),g(R,M)},content:(R,A)=>{var M=Ta(),y=o(M),h=o(y,!0);s(y);var N=a(y,2);const V=n(()=>r("activities.unpause-all-activity-types",{type:e(C)}));Ot(N,{get label(){return e(V)},get checked(){return e(_)},set checked(z){p(_,z,!0)}}),s(M),H(z=>k(h,z),[()=>r("activities.unpause-modal-description")]),g(R,M)}}}),ht(),m()}var Ia=B("<div><!> <!> <!></div> <!> <!> <!> <!>",1);function Aa(l,t){gt(t,!0);let c=Ht(t,"class",3,"");const m=n(()=>ce.params),v=n(()=>e(m).namespace),I=n(()=>e(m).workflow),C=n(()=>e(m).run),D=n(()=>({workflowId:e(I),runId:e(C)}));let j=F(!1),_=F(!1),f=F(!1),S=F(!1);const K=async()=>{t.activity.paused?p(_,!0):p(j,!0)},Y=()=>{p(f,!0)},R=()=>{p(S,!0)};var A=Ia(),M=ct(A),y=o(M);const h=n(()=>t.activity.paused?"Resume this Activity":"Pauses this Activity, starting before it retries or the next time it heartbeats. It won’t time out while it’s paused.");se(y,{bottomLeft:!0,width:200,get text(){return e(h)},children:(w,et)=>{const X=n(()=>t.activity.paused?"play":"pause");Nt(w,{variant:"secondary",size:"sm",get leadingIcon(){return e(X)},$$events:{click:K},children:(it,tt)=>{St();var Z=_t();H(ft=>k(Z,ft),[()=>t.activity.paused?r("workflows.unpause"):r("workflows.pause")]),g(it,Z)},$$slots:{default:!0}})},$$slots:{default:!0}});var N=a(y,2);se(N,{bottomLeft:!0,width:200,text:"Update this Activity Options.",children:(w,et)=>{Nt(w,{variant:"secondary",size:"sm",leadingIcon:"pencil",$$events:{click:R},children:(X,it)=>{St();var tt=_t();H(Z=>k(tt,Z),[()=>r("common.update")]),g(X,tt)},$$slots:{default:!0}})},$$slots:{default:!0}});var V=a(N,2);se(V,{bottom:!0,width:200,text:"Reset this Activity.",children:(w,et)=>{Nt(w,{variant:"secondary",size:"sm",leadingIcon:"retry",$$events:{click:Y},children:(X,it)=>{St();var tt=_t();H(Z=>k(tt,Z),[()=>r("workflows.reset")]),g(X,tt)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(M);var z=a(M,2);xa(z,{get namespace(){return e(v)},get execution(){return e(D)},get activity(){return t.activity},get open(){return e(j)},set open(w){p(j,w,!0)}});var at=a(z,2);ka(at,{get namespace(){return e(v)},get execution(){return e(D)},get activity(){return t.activity},get open(){return e(_)},set open(w){p(_,w,!0)}});var $=a(at,2);wa($,{get namespace(){return e(v)},get execution(){return e(D)},get activity(){return t.activity},get open(){return e(f)},set open(w){p(f,w,!0)}});var Q=a($,2);le(Q,()=>e(S),w=>{ya(w,{get namespace(){return e(v)},get execution(){return e(D)},get activity(){return t.activity},get open(){return e(S)},set open(et){p(S,et,!0)}})}),H(()=>Ue(M,1,`flex items-center gap-2 ${c()??""}`)),g(l,A),ht()}const Da=(l,t,c)=>!l.disableWriteActions&&!t.namespaceWriteDisabled(c)&&!t.isActivityCommandsDisabled&&!l.activityCommandsDisabled,ot=(l,t=xt,c=xt)=>{var m=Pa(),v=o(m),I=o(v,!0);s(v);var C=a(v,2),D=o(C);{var j=f=>{var S=_t();H(()=>k(S,c())),g(f,S)},_=f=>{var S=Vt(),K=ct(S);We(K,()=>c()??xt),g(f,S)};E(D,f=>{typeof c()=="string"||typeof c()=="number"?f(j):f(_,!1)})}s(C),s(m),H(()=>k(I,t())),g(l,m)};var Pa=B('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),Ca=B('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Sa=B('<p class="text-sm text-secondary/80"> </p> <!>',1),Na=B('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Oa=B('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <!></div>'),Ma=B('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),Ha=B("<!> ",1),Ra=B('<p class="ml-1 text-sm text-secondary"> </p>'),Fa=B('<div class="flex flex-wrap items-center gap-1"><!> <!></div>'),Wa=B("<!> <!> <!>",1),Ua=B('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-1 flex-wrap justify-between gap-2"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div> <!></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!></div></div></div>');function Ti(l,t){gt(t,!0);const[c,m]=Mt(),v=()=>Et(Qe,"$workflowRun",c),I=()=>Et(M,"$coreUser",c),C=()=>Et(Ze,"$timeFormat",c),D=()=>Et(Xe,"$relativeTime",c),j=i=>{var u=Ca(),d=o(u),W=o(d,!0);s(d);var L=a(d,2);le(L,()=>t.activity.attempt,x=>{Ie(x,{get value(){return t.activity.heartbeatDetails},key:"payloads",children:(P,b=xt)=>{const T=n(()=>r("common.copy-icon-title")),U=n(()=>r("common.copy-success-icon-title"));ne(P,{get content(){return b()},maxHeight:384,get copyIconTitle(){return e(T)},get copySuccessIconTitle(){return e(U)}})},$$slots:{default:!0}})}),s(u),H(x=>k(W,x),[()=>r("workflows.heartbeat-details")]),g(i,u)},_=i=>{var u=Oa(),d=o(u),W=o(d);{var L=P=>{var b=Sa(),T=ct(b),U=o(T,!0);s(T);var nt=a(T,2);le(nt,()=>t.activity.attempt,rt=>{const pt=n(()=>ea(t.activity.lastFailure,"stackTrace"));Ie(rt,{get value(){return e(pt)},children:(Qt,ae=xt)=>{const At=n(()=>r("common.copy-icon-title")),qt=n(()=>r("common.copy-success-icon-title"));ne(Qt,{get content(){return ae()},maxHeight:384,get copyIconTitle(){return e(At)},get copySuccessIconTitle(){return e(qt)}})},$$slots:{default:!0}})}),H(rt=>k(U,rt),[()=>r("workflows.last-failure")]),g(P,b)};E(W,P=>{t.activity.lastFailure&&P(L)})}s(d);var x=a(d,2);{var q=P=>{var b=Na(),T=o(b),U=o(T,!0);s(T);var nt=a(T,2);const rt=n(()=>r("common.copy-icon-title")),pt=n(()=>r("common.copy-success-icon-title"));ne(nt,{language:"text",maxHeight:384,get content(){return t.activity.lastFailure.stackTrace},get copyIconTitle(){return e(rt)},get copySuccessIconTitle(){return e(pt)}}),s(b),H(zt=>k(U,zt),[()=>r("common.stack-trace")]),g(P,b)};E(x,P=>{var b;(b=t.activity.lastFailure)!=null&&b.stackTrace&&P(q)})}s(u),g(i,u)},f=i=>{const u=n(()=>{var d;return(d=t.activity.lastFailure)!=null&&d.stackTrace?r("workflows.last-failure-with-stack-trace"):r("workflows.last-failure")});Ke(i,{get title(){return e(u)},children:Re,$$slots:{default:(d,W)=>{const L=n(()=>W.open);var x=Vt(),q=ct(x);{var P=b=>{_(b)};E(q,b=>{e(L)&&b(P)})}g(d,x)}}})},S=(i,u=xt)=>{var d=Ma(),W=o(d),L=o(W,!0);s(W);var x=a(W,2),q=o(x),P=a(q),b=o(P);s(P),s(x),s(d),H((T,U)=>{k(L,T),k(q,`${U??""} `),k(b,`(${u()??""})`)},[()=>r("workflows.next-retry"),()=>Ct(t.activity.scheduledTime,C(),{relative:D(),relativeLabel:""})]),g(i,d)},K=i=>{var u=Fa(),d=o(u);const W=n(()=>e(R)?"danger":"default");Ye(d,{get type(){return e(W)},children:(q,P)=>{var b=Ha(),T=ct(b);const U=n(()=>e(R)&&"font-bold text-red-400");Ge(T,{get class(){return`mr-1 ${e(U)??""}`},name:"retry"});var nt=a(T);H(rt=>k(nt,` ${t.activity.attempt??0} of ${rt??""}`),[()=>sa(t.activity.maximumAttempts)]),g(q,b)},$$slots:{default:!0}});var L=a(d,2);{var x=q=>{var P=Ra(),b=o(P);s(P),H(T=>k(b,`${T??""} remaining`),[()=>oa(t.activity.maximumAttempts,t.activity.attempt)]),g(q,P)};E(L,q=>{t.activity.maximumAttempts&&q(x)})}s(u),g(i,u)};var Y;const R=n(()=>t.activity.attempt>1&&!!t.activity.lastFailure),A=n(()=>(Y=v()===null||v()===void 0?void 0:v().workflow)===null||Y===void 0?void 0:Y.isRunning);let M=Je(),y=n(()=>Da(ce.data.settings,I(),ce.params.namespace)&&e(A));var h=Ua(),N=o(h),V=o(N),z=o(V);const at=n(()=>t.activity.paused?"Paused":t.activity.state);Ve(z,{get status(){return e(at)}});var $=a(z,2),Q=o($,!0);s($),s(V);var w=a(V,2);{var et=i=>{Aa(i,{get activity(){return t.activity},class:"justify-end"})};E(w,i=>{e(y)&&i(et)})}s(N);var X=a(N,2),it=o(X),tt=o(it),Z=J(()=>r("workflows.activity-id"));ot(tt,()=>e(Z),()=>t.activity.activityId);var ft=a(tt,2);{var yt=i=>{var u=Wa(),d=ct(u),W=J(()=>r("activities.paused-by"));ot(d,()=>e(W),()=>{var T,U;return((U=(T=t.activity.pauseInfo)==null?void 0:T.manual)==null?void 0:U.identity)||""});var L=a(d,2),x=J(()=>r("activities.paused-since")),q=J(()=>{var T;return Ct((T=t.activity.pauseInfo)==null?void 0:T.pauseTime,C(),{relative:D()})});ot(L,()=>e(x),()=>e(q));var P=a(L,2),b=J(()=>r("activities.pause-reason"));ot(P,()=>e(b),()=>{var T,U;return((U=(T=t.activity.pauseInfo)==null?void 0:T.manual)==null?void 0:U.reason)||"-"}),g(i,u)};E(ft,i=>{t.activity.paused&&t.activity.pauseInfo&&i(yt)})}var Rt=a(ft,2),wt=J(()=>r("workflows.attempt"));ot(Rt,()=>e(wt),()=>K);var Ft=a(Rt,2);{var $t=i=>{var u=Vt();const d=n(()=>ca({date:t.activity.scheduledTime,negativeDefault:""}));var W=ct(u);{var L=x=>{S(x,()=>e(d))};E(W,x=>{e(d)&&x(L)})}g(i,u)};E(Ft,i=>{t.activity.scheduledTime&&i($t)})}var G=a(Ft,2);{var vt=i=>{var u=J(()=>r("workflows.last-attempt-completed-time")),d=J(()=>Ct(t.activity.lastAttemptCompleteTime,C(),{relative:D()}));ot(i,()=>e(u),()=>e(d))};E(G,i=>{t.activity.lastAttemptCompleteTime&&i(vt)})}var Wt=a(G,2);{var ue=i=>{var u=J(()=>r("workflows.retry-expiration")),d=J(()=>ra(t.activity.maximumAttempts,qe(Ee({start:Date.now(),end:t.activity.expirationTime}))));ot(i,()=>e(u),()=>e(d))};E(Wt,i=>{t.activity.expirationTime&&i(ue)})}var dt=a(Wt,2);{var bt=i=>{var u=J(()=>r("workflows.last-heartbeat")),d=J(()=>Ct(t.activity.lastHeartbeatTime,C(),{relative:D(),relativeStrict:!0}));ot(i,()=>e(u),()=>e(d))};E(dt,i=>{t.activity.lastHeartbeatTime&&i(bt)})}var Tt=a(dt,2);{var Ut=i=>{var u=J(()=>r("workflows.last-started-time")),d=J(()=>Ct(t.activity.lastStartedTime,C(),{relative:D()}));ot(i,()=>e(u),()=>e(d))};E(Tt,i=>{t.activity.lastStartedTime&&i(Ut)})}var Bt=a(Tt,2);{var te=i=>{var u=J(()=>r("workflows.last-worker-identity"));ot(i,()=>e(u),()=>t.activity.lastWorkerIdentity)};E(Bt,i=>{t.activity.lastWorkerIdentity&&i(te)})}s(it);var kt=a(it,2),Lt=o(kt);{var It=i=>{var u=Vt(),d=ct(u);{var W=x=>{f(x)},L=x=>{_(x)};E(d,x=>{t.totalPending>20?x(W):x(L,!1)})}g(i,u)};E(Lt,i=>{e(R)&&i(It)})}var jt=a(Lt,2);{var ee=i=>{j(i)};E(jt,i=>{t.activity.heartbeatDetails&&i(ee)})}s(kt),s(X),s(h),H(()=>k(Q,t.activity.activityType)),g(l,h),ht(),m()}export{Ti as P,bi as f,ca as t};
