import"./CWj6FrbW.js";import{p as ct,g as t,d as J,b as ut,ax as n,f as C,c as p,e as r,t as w,n as dt,r as a,a9 as Nt}from"./CVkC3v6g.js";import{s as m}from"./DUPvQxLd.js";import{i as F}from"./DpQPgcBL.js";import{e as At,i as Et}from"./ojfNN_0P.js";import{t as y,b as pt,a as v,c as Ht}from"./CXa2DXXa.js";import{s as St}from"./Cp2--30W.js";import{s as M}from"./01A5YHN4.js";import{a as X,s as Ut}from"./B71MWTBs.js";import{p as qt}from"./CEC5gFID.js";import{B as Kt}from"./svNy4rTM.js";import{E as Yt}from"./B4jGSy-b.js";import{L as jt}from"./LH3G9Yqj.js";import{T as zt,a as Gt,b as Jt}from"./CeUmDuzY.js";import{t as c}from"./D2OY9xdY.js";import{g as Mt}from"./BBX6mbi_.js";import"./BaP1uuNe.js";import"./z4sABeRS.js";import{g as Xt}from"./dAqOlFj6.js";import"./B5CyelYt.js";import"./BijhgWLC.js";import{f as Zt,t as te,r as ee}from"./BogN5CJj.js";import{w as re}from"./DwKzMZUG.js";import{D as ae}from"./ClpKw9mK.js";import"./69_IOA4Y.js";import{i as se}from"./B3G23GpA.js";import{p as oe}from"./BNtWe5Xb.js";import{I as ne}from"./BkKACGbj.js";function mt(V,g){ct(g,!1);let k=oe(g,"includesTaskQueueType",8);se();const L=J(()=>k()?"checkmark":"close"),O=J(()=>k()?"text-blue-700":"text-primary"),N=J(()=>k()?c("common.yes"):c("common.no"));ne(V,{get name(){return t(L)},get class(){return`m-auto ${t(O)??""}`},get title(){return t(N)}}),ut()}var ie=y("<p> </p>"),le=y("<p> </p>"),de=y('<td class="text-left" data-testid="worker-identity"><p class="select-all"> </p></td> <td class="text-left" data-testid="worker-build-id"><div class="flex items-center gap-2"><p class="select-all break-all"> </p> <!></div></td> <td class="text-left" data-testid="worker-deployment"><p class="select-all break-all"><!></p></td> <td class="hidden text-left md:table-cell" data-testid="worker-last-access-time"><p class="select-all"> </p></td> <td data-testid="workflow-poller"><!></td> <td data-testid="activity-poller"><!></td>',1),pe=y('<tr class="w-full"><td colspan="5"><!></td></tr>'),me=y('<caption class="sr-only" slot="caption"> </caption>'),ce=y('<th> </th> <th> </th> <th> </th> <th class="hidden w-2/12 md:table-cell"> </th> <th class="w-2/12"><p class="text-center"> </p></th> <th class="w-2/12 text-center"><p class="text-center"> </p></th>',1),ue=y('<h2 class="flex items-center gap-2" data-testid="workers"> <!></h2> <!> <!> <!>',1);function Ue(V,g){ct(g,!0);const[k,L]=Ut(),O=()=>X(re,"$workflowRun",k),N=()=>X(te,"$timeFormat",k),vt=()=>X(ee,"$relativeTime",k),_t=n(()=>qt.params),ft=n(()=>t(_t).namespace),wt=n(()=>O().workflow),h=n(()=>Mt(t(wt),g.workers)),Z=n(()=>t(h).pollers),gt=n(()=>t(h).pinned),kt=n(()=>t(h).autoUpgrade),ht=n(()=>t(h).currentBuildId),xt=n(()=>t(h).currentDeployment),yt=n(()=>t(h).rampingBuildId),bt=n(()=>t(h).rampingDeployment),A=e=>{var d,s,o;const i=(s=(d=e==null?void 0:e.deploymentOptions)===null||d===void 0?void 0:d.deploymentName)!==null&&s!==void 0?s:(o=e==null?void 0:e.workerVersionCapabilities)===null||o===void 0?void 0:o.deploymentSeriesName;return i??""},E=e=>{var d,s,o;const i=(s=(d=e==null?void 0:e.deploymentOptions)===null||d===void 0?void 0:d.buildId)!==null&&s!==void 0?s:(o=e==null?void 0:e.workerVersionCapabilities)===null||o===void 0?void 0:o.buildId;return i??""},$t=e=>t(tt)(e)?"Current":t(et)(e)?"Ramping":void 0,Tt=e=>t(tt)(e)?c("deployments.current"):t(et)(e)?c("deployments.ramping-percentage",{percentage:g.workers.versioningInfo.rampingVersionPercentage}):"",tt=n(()=>e=>A(e)===t(xt)&&E(e)===t(ht)),et=n(()=>e=>A(e)===t(bt)&&E(e)===t(yt));var rt=ue(),H=C(rt),at=r(H),It=p(at);Kt(It,{type:"count",children:(e,d)=>{dt();var s=pt();w(()=>{var o;return m(s,((o=t(Z))==null?void 0:o.length)||0)}),v(e,s)},$$slots:{default:!0}}),a(H);var st=p(H,2);St(st,()=>g.children??Nt);var ot=p(st,2);{var Pt=e=>{var d=ie(),s=r(d,!0);a(d),w(o=>m(s,o),[()=>c("workers.viewing-pinned-build-ids")]),v(e,d)},Bt=(e,d)=>{{var s=o=>{var i=le(),l=r(i,!0);a(i),w(u=>m(l,u),[()=>c("workers.viewing-auto-upgrade-build-ids")]),v(o,i)};F(e,o=>{t(kt)&&o(s)},d)}};F(ot,e=>{t(gt)?e(Pt):e(Bt,!1)})}var Dt=p(ot,2);zt(Dt,{class:"mb-6 w-full min-w-[600px] table-fixed",children:(e,d)=>{var s=Ht(),o=C(s);At(o,17,()=>t(Z),Et,(i,l)=>{const u=n(()=>A(t(l))),f=n(()=>E(t(l))),b=n(()=>$t(t(l))),$=n(()=>Tt(t(l)));Jt(i,{"data-testid":"worker-row",children:(S,W)=>{var Q=de(),x=C(Q),I=r(x),U=r(I,!0);a(I),a(x);var T=p(x,2),P=r(T),B=r(P),q=r(B,!0);a(B);var K=p(B,2);{var Y=_=>{ae(_,{get status(){return t(b)},get label(){return t($)}})};F(K,_=>{t(b)&&_(Y)})}a(P),a(T);var D=p(T,2),R=r(D),j=r(R);{var Wt=_=>{const Lt=n(()=>Xt({namespace:t(ft),deployment:t(u)}));jt(_,{get href(){return t(Lt)},children:(Ot,ve)=>{dt();var lt=pt();w(()=>m(lt,t(u))),v(Ot,lt)},$$slots:{default:!0}})};F(j,_=>{t(u)&&_(Wt)})}a(R),a(D);var z=p(D,2),nt=r(z),Qt=r(nt,!0);a(nt),a(z);var G=p(z,2),Rt=r(G);const Ct=n(()=>t(l).taskQueueTypes.includes("WORKFLOW"));mt(Rt,{get includesTaskQueueType(){return t(Ct)}}),a(G);var it=p(G,2),Ft=r(it);const Vt=n(()=>t(l).taskQueueTypes.includes("ACTIVITY"));mt(Ft,{get includesTaskQueueType(){return t(Vt)}}),a(it),w(_=>{m(U,t(l).identity),m(q,t(f)),m(Qt,_)},[()=>Zt(t(l).lastAccessTime,N(),{relative:vt()})]),v(S,Q)},$$slots:{default:!0}})},i=>{var l=pe(),u=r(l),f=r(u);const b=n(()=>c("workflows.workers-empty-state"));Yt(f,{get title(){return t(b)}}),a(u),a(l),v(i,l)}),v(e,s)},$$slots:{default:!0,caption:(e,d)=>{var s=me(),o=r(s,!0);a(s),w(i=>m(o,i),[()=>c("workflows.workers-tab")]),v(e,s)},headers:(e,d)=>{Gt(e,{slot:"headers",children:(s,o)=>{var i=ce(),l=C(i);M(l,1,"w-4/12");var u=r(l,!0);a(l);var f=p(l,2);M(f,1,"w-3/12");var b=r(f,!0);a(f);var $=p(f,2);M($,1,"w-3/12");var S=r($,!0);a($);var W=p($,2),Q=r(W,!0);a(W);var x=p(W,2),I=r(x),U=r(I,!0);a(I),a(x);var T=p(x,2),P=r(T),B=r(P,!0);a(P),a(T),w((q,K,Y,D,R,j)=>{m(u,q),m(b,K),m(S,Y),m(Q,D),m(U,R),m(B,j)},[()=>c("common.id"),()=>c("workers.buildId"),()=>c("deployments.deployment"),()=>c("workflows.last-accessed"),()=>c("workflows.workflow-task-handler"),()=>c("workflows.activity-handler")]),v(s,i)},$$slots:{default:!0}})}}}),w(e=>m(at,`${e??""} `),[()=>c("workers.workers")]),v(V,rt),ut(),L()}export{Ue as W};
