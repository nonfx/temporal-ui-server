import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as re,aP as Oe,t as z,b as oe,e as w,d as H,r as M,as as be,f as Le,c as G,l as J,a as Ce,g as q,m as $,s as F,ah as ee}from"./DYX0w8bX.js";import{s as Te}from"./CxFVcq4O.js";import{i as te}from"./B_BuKjdB.js";import{t as U,a as T,c as Ie}from"./Bz76f8pg.js";import{s as I}from"./CFGOF_JX.js";import{b as Q,C as se,s as ve}from"./BoNO6UAY.js";import{e as D}from"./B8vPeB6P.js";import{s as le}from"./Bfc47y5P.js";import{i as ce}from"./CZRFLhJG.js";import{l as S,p as i}from"./BrXzBH3h.js";import{s as de,a as V,b as O}from"./CgU0heln.js";import{c as he,w as ne}from"./DsexP6Wk.js";import{I as Se}from"./BExi9zWc.js";import{t as W}from"./Ds6tgvmq.js";import{t as Ae,a as Ne}from"./De9SQVcE.js";import{b as Pe}from"./CuRdHbsf.js";import{b as qe}from"./BqHg6EHm.js";import{b as ze}from"./CXVuWmQA.js";import{a as He}from"./B9nsnfxK.js";const ae=(o,e)=>{const n=a=>{o&&!o.contains(a.target)&&!a.defaultPrevented&&e(a)};return document.addEventListener("click",n,!0),{destroy(){document.removeEventListener("click",n,!0)}}},me="menu-context";var De=U("<div><!></div>");function dt(o,e){const n=S(e,["children","$$slots","$$events","$$legacy"]),a=S(n,["class","open"]);re(e,!1);const[u,b]=de(),p=()=>V(c(),"$open",u);let g=i(e,"class",8,""),c=i(e,"open",24,()=>ne(!1));const s=ne(!1),l=ne(null),E=he(),x=()=>{p()&&(E("close"),O(c(),!1))};Oe(me,{open:c(),keepOpen:s,menuElement:l}),ce();var d=De();let h;var m=w(d);I(m,e,"default",{get open(){return c()}},null),M(d),He(d,(y,k)=>ae==null?void 0:ae(y,k),()=>x),z(y=>h=Q(d,h,{class:y,...a}),[()=>W("relative",g())],H),T(o,d),oe(),b()}const pe='input, li[role="option"]:not([aria-disabled="true"]), li[role="menuitem"]:not([aria-disabled="true"])';var Ue=U("<a><!></a>"),Ke=U("<div> </div>"),je=U('<li><!> <div class="grow"><div><!> <!></div> <!></div> <!></li>');function mt(o,e){const n=S(e,["children","$$slots","$$events","$$legacy"]),a=S(n,["class","selected","destructive","disabled","href","description","centered","hoverable","newTab"]);re(e,!1);const[u,b]=de(),p=()=>V(y,"$keepOpen",u);let g=i(e,"class",8,""),c=i(e,"selected",8,void 0),s=i(e,"destructive",8,!1),l=i(e,"disabled",8,!1),E=i(e,"href",8,null),x=i(e,"description",8,null),d=i(e,"centered",8,!1),h=i(e,"hoverable",8,!0),m=i(e,"newTab",8,!1);const{keepOpen:y,open:k}=be(me),K=he(),A=r=>{switch(r.key){case"Escape":O(k,!1);break;case"ArrowDown":case"ArrowRight":Y(r.currentTarget);break;case"ArrowUp":case"ArrowLeft":f(r.currentTarget);break;case" ":case"Enter":K("click"),p()||O(k,!1);break}},Y=r=>{let t=r.nextElementSibling;for(;t&&!t.matches(pe);)t=t.nextElementSibling;t&&t instanceof HTMLLIElement&&t.focus()},f=r=>{let t=r.previousElementSibling;for(;t&&!t.matches(pe);)t=t.previousElementSibling;t&&t instanceof HTMLLIElement&&t.focus()},j=()=>{p()||O(k,!1),K("click")};ce();var R=Ie(),v=Le(R);{var Z=r=>{var t=Ue();let N;var X=w(t);I(X,e,"default",{},null),M(t),z((P,L)=>N=Q(t,N,{href:E(),target:m()?"_blank":null,rel:m()?"noreferrer":null,role:"menuitem",class:P,"aria-hidden":l()?"true":"false","aria-disabled":l(),tabindex:l()?-1:0,...a,[se]:L},"svelte-nbq40i"),[()=>W("menu-item","m-1 px-3 py-2","flex items-center gap-2",g()),()=>({disabled:l(),hoverable:h(),"justify-center":d()})],H),D("keydown",t,le(A)),T(r,t)},_e=r=>{var t=je();let N;var X=w(t);I(X,e,"leading",{},null);var P=G(X,2),L=w(P);let ue;var fe=w(L);I(fe,e,"default",{},null);var ge=G(fe,2);{var ke=_=>{Se(_,{name:"checkmark",class:"shrink-0"})};te(ge,_=>{c()&&_(ke)})}M(L);var Ee=G(L,2);{var xe=_=>{var C=Ke();let B;var we=w(C,!0);M(C),z(Me=>{B=ve(C,1,"menu-item-description svelte-nbq40i",null,B,Me),Te(we,x())},[()=>({"text-center":d()})],H),T(_,C)};te(Ee,_=>{x()&&_(xe)})}M(P);var ye=G(P,2);I(ye,e,"trailing",{},null),M(t),z((_,C,B)=>{N=Q(t,N,{role:"menuitem",class:_,"aria-hidden":l()?"true":"false","aria-disabled":l(),tabindex:l()?-1:0,...a,[se]:C},"svelte-nbq40i"),ue=ve(L,1,"menu-item-wrapper svelte-nbq40i",null,ue,B)},[()=>W("menu-item","m-1 px-3 py-2","flex items-center gap-2",g()),()=>({destructive:s(),disabled:l(),selected:c(),hoverable:h()}),()=>({centered:d()})],H),D("click",t,j),D("keydown",t,le(A)),T(r,t)};te(v,r=>{E()?r(Z):r(_e,!1)})}T(o,R),oe(),b()}const ie=o=>Array.from(o.querySelectorAll('[href], button, textarea, input, div[contentEditable="true"], select, [tabindex][tabindex="0"]')).filter(e=>!e.hasAttribute("disabled")&&e.getAttribute("tabindex")!=="-1"),ut=(o,e)=>{let n,a;const u=s=>{s.key==="Tab"&&(s.shiftKey?document.activeElement===n&&(a.focus(),s.preventDefault()):document.activeElement===a&&(n.focus(),s.preventDefault()))},b=(s=!1)=>{if(e===!1)return;const l=ie(o);n=l[0],a=l[l.length-1],s||n==null||n.focus(),n==null||n.addEventListener("keydown",u),a==null||a.addEventListener("keydown",u)},p=()=>{n==null||n.removeEventListener("keydown",u),a==null||a.removeEventListener("keydown",u)},g=(s,l)=>(s.length&&(p(),b(!0)),l);return new MutationObserver(g).observe(o,{childList:!0,subtree:!0}),b(),{update(s){e=s,s?b():p()},destroy(){p()}}};var Re=U("<ul><!></ul>");function ft(o,e){const n=S(e,["children","$$slots","$$events","$$legacy"]),a=S(n,["class","id","keepOpen","position","menuElement","maxHeight"]);re(e,!1);const[u,b]=de(),p=()=>V(k,"$keepOpenCtx",u),g=()=>V(A,"$open",u),c=$(),s=$();let l=i(e,"class",8,""),E=$(0),x=i(e,"id",8),d=i(e,"keepOpen",8,!1),h=i(e,"position",8,"left"),m=i(e,"menuElement",12,null),y=i(e,"maxHeight",8,"max-h-[20rem]");const{keepOpen:k,menuElement:K,open:A}=be(me),Y=v=>{!p()&&v.target===q(s)&&O(A,!1)};J(()=>ee(d()),()=>{O(k,d())}),J(()=>ee(m()),()=>{O(K,m())}),J(()=>(ee(m()),ie),()=>{F(c,m()?ie(m()):[])}),J(()=>q(c),()=>{F(s,q(c)[q(c).length-1])}),Ce(),ce();var f=Re();let j;var R=w(f);I(R,e,"default",{},null),M(f),qe(f,v=>m(v),()=>m()),z((v,Z)=>j=Q(f,j,{role:"menu",class:v,"aria-labelledby":x(),tabindex:-1,style:h()==="top-right"||h()==="top-left"?`top: -${q(E)+16}px;`:"",id:x(),...a,[se]:Z},"svelte-1jzz301"),[()=>W("menu",y(),h(),l()),()=>({hidden:!g()})],H),Ae(1,f,()=>Ne,()=>({duration:100})),Pe(f,"clientHeight",v=>F(E,v)),D("focusout",f,Y),D("click",f,le(function(v){ze.call(this,e,v)})),T(o,f),oe(),b()}export{dt as M,ft as a,me as b,pe as c,mt as d,ae as e,ut as f};
