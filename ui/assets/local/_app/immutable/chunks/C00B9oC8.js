import"./CWj6FrbW.js";import{p as xt,ax as n,aL as F,$ as ot,g as e,e as o,c as a,s as p,r as s,n as Ct,t as H,b as gt,f as ct,a9 as qt,i as be,d as X}from"./CVkC3v6g.js";import{s as k}from"./DUPvQxLd.js";import{i as E}from"./DpQPgcBL.js";import{t as U,b as _t,a as g,c as Et}from"./CXa2DXXa.js";import{s as Re}from"./Cp2--30W.js";import{s as Ot,b as Vt,a as Qt}from"./B71MWTBs.js";import{p as se}from"./CEC5gFID.js";import{k as Fe}from"./DLaUIK3W.js";import{s as We}from"./01A5YHN4.js";import{p as Mt}from"./BNtWe5Xb.js";import{B as St}from"./DSyaFiGS.js";import{T as re}from"./CbiwIFSL.js";import{t as r}from"./D2OY9xdY.js";import{e as Ue}from"./FZ_CX87U.js";import{C as Nt}from"./DCzlPCxa.js";import{D as Be,a as Le}from"./sfkm24vY.js";import{I as mt}from"./DIpoW2lQ.js";import{N as Te}from"./DvfOMGLz.js";import{L as lt}from"./C0UPJbhF.js";import{g as Ie}from"./DaqIHZoW.js";import{a as je}from"./BaP1uuNe.js";import{s as Ht}from"./CTBtQUu0.js";import{r as Kt,a as Gt}from"./Db8GgboF.js";import{t as ne}from"./z4sABeRS.js";import{r as Jt,w as ze}from"./DwKzMZUG.js";import{h as Pt,a as Qe,j as qe}from"./B6L3uVBf.js";import{M as le}from"./CUiYMM6x.js";import{P as Ee}from"./jKvhmrJz.js";import{W as Ve}from"./BJSgUHYk.js";import{A as Ke}from"./BkPUCctl.js";import{B as Ge}from"./svNy4rTM.js";import{C as oe}from"./yMkT9UdU.js";import{I as Je}from"./BkKACGbj.js";import{c as Xe}from"./Cp_AbnJM.js";import{f as Dt,r as Ye,t as Ze}from"./BogN5CJj.js";import{i as $e}from"./C4ry1RZU.js";import{c as ke}from"./ByTIZu23.js";import{s as ta,b as ea}from"./DEYbFwjj.js";import{o as aa}from"./C8ejR22J.js";const ia=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution","meta"]),ra=new Set(["maximumAttempts"]),oa=(l,t)=>l===0?r("workflows.no-expiration"):t,sa=(l,t)=>l?l-t:r("workflows.unlimited"),na=l=>l||r("workflows.unlimited"),la=(l,t)=>l==="maximumAttempts"&&!t?r("workflows.unlimited"):t,ca=(l,t)=>{if(ia.has(t)&&typeof l[t]=="object"){for(const[c,m]of Object.entries(l[t]))ea(m)&&(ra.has(c)?l[`${t}${ke(c)}`]=la(c,m):l[`${t}${ke(c)}`]=m);delete l[t]}},Ai=l=>{const t={};if(l.attributes)for(const[c,m]of Object.entries(l.attributes))ta(c,m)&&(t[c]=m),ca(t,c);return t},va=({date:l,now:t=Date.now(),negativeDefault:c})=>{if(!l)return"";const m=String(l);try{const I=(Number(new Date(m))-t)/1e3;return c!==void 0&&I<0?c:isNaN(I)?"":`${I.toFixed(0)}s`}catch{return""}},Xt=()=>{var c;const l=(c=Ie(je))==null?void 0:c.email;return l?`From the Web UI by ${l}`:"From the Web UI"},da=async({namespace:l,execution:t,id:c,reason:m,type:v})=>{const I=Kt("activity.pause",{namespace:l});return Gt(I,{options:{method:"POST",body:Ht({execution:t,reason:m,identity:Xt(),id:c,type:v})}})},ua=async({namespace:l,execution:t,id:c,type:m})=>{const v=Kt("activity.unpause",{namespace:l});return Gt(v,{options:{method:"POST",body:Ht({execution:t,identity:Xt(),id:c,type:m})}})},ma=async({namespace:l,execution:t,id:c,type:m,resetHeartbeat:v})=>{const I=Kt("activity.reset",{namespace:l});return Gt(I,{options:{method:"POST",body:Ht({execution:t,identity:Xt(),id:c,type:m,resetHeartbeat:v})}})},fa=async({namespace:l,execution:t,id:c,type:m,activityOptions:v})=>{const I=Kt("activity.update-options",{namespace:l});return Gt(I,{options:{method:"POST",body:Ht({execution:t,identity:Xt(),id:c,type:m,activityOptions:v,updateMask:"taskQueue.name,scheduleToCloseTimeout,scheduleToStartTimeout,startToCloseTimeout,heartbeatTimeout,retryPolicy.initialInterval,retryPolicy.backoffCoefficient,retryPolicy.maximumInterval,retryPolicy.maximumAttempts"})}})};var ya=U(`<form class="flex flex-col gap-4"><div><!> <p class="mb-1 text-xs text-secondary">Maximum permitted time between successful Worker Heartbeats.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Coefficient used to calculate the next retry interval. The next retry
          interval is previous interval multiplied by the coefficient. Must be 1
          or larger.</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Interval of the first retry. If retryBackoffCoefficient is 1.0 then it
          is used for all retries.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum number of attempts. When exceeded the retries stop even if not
          expired yet. 1 disables retries. 0 means unlimited (up to the
          timeouts).</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Indicates how long the caller is willing to wait for an Activity
          completion. Limits how long retries will be attempted.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Limits time an Activity Task can stay in a task queue before a Worker
          picks it up. This timeout is always non retryable, as all a retry
          would achieve is to put it back into the same queue.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum time an Activity is allowed to execute after being picked up
          by a Worker. This Timeout is always retryable.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <!></div> <!> <div class="flex items-center justify-end gap-4"><!> <!></div></form>`);function pa(l,t){xt(t,!0);const[c,m]=Ot();var v,I,C,P,j,_,f,S,K,G,R,A,M,y;const h=J=>!J||!J.endsWith("s")?"":J==null?void 0:J.replace("s",""),N=J=>{if(J)return J+"s"};let V=Mt(t,"open",15),z=n(()=>t.activity.activityId),at=n(()=>t.activity.activityType),$=F(ot((I=(v=t.activity.activityOptions)===null||v===void 0?void 0:v.taskQueue)===null||I===void 0?void 0:I.name)),Q=F(ot(h(String((C=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||C===void 0?void 0:C.scheduleToCloseTimeout)))),w=F(ot(h(String((P=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||P===void 0?void 0:P.scheduleToStartTimeout)))),et=F(ot(h(String((j=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||j===void 0?void 0:j.startToCloseTimeout)))),Y=F(ot(h(String((_=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||_===void 0?void 0:_.heartbeatTimeout)))),it=F(ot((S=(f=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||f===void 0?void 0:f.retryPolicy)===null||S===void 0?void 0:S.maximumAttempts)),tt=F(ot((G=(K=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||K===void 0?void 0:K.retryPolicy)===null||G===void 0?void 0:G.backoffCoefficient)),Z=F(ot(h(String((A=(R=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||R===void 0?void 0:R.retryPolicy)===null||A===void 0?void 0:A.initialInterval)))),ft=ot(h(String((y=(M=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||M===void 0?void 0:M.retryPolicy)===null||y===void 0?void 0:y.maximumInterval))),yt=F(!1);const Rt=n(()=>({taskQueue:{name:e($)},scheduleToCloseTimeout:N(e(Q)),scheduleToStartTimeout:N(e(w)),startToCloseTimeout:N(e(et)),heartbeatTimeout:N(e(Y)),retryPolicy:{maximumAttempts:e(it),initialInterval:N(e(Z)),backoffCoefficient:e(tt),maximumInterval:N(ft)}})),ht=()=>{V(!1)},Ft=async J=>{J.preventDefault();try{await fa({namespace:t.namespace,execution:t.execution,id:e(yt)?void 0:e(z),type:e(yt)?e(at):void 0,activityOptions:e(Rt)}),Vt(Jt,Date.now()),ne.push({variant:"success",message:`Options for Activity ${e(z)} have been updated.`})}catch(vt){console.error("Error updating activity options:",vt),ne.push({variant:"error",message:`Options for Activity ${e(z)} have been failed to update: ${vt==null?void 0:vt.message}`,duration:5e3})}finally{ht()}},Yt=n(()=>r("common.close"));Be(l,{get open(){return V()},onClick:ht,position:"right",id:"activity-options-update-drawer",dark:!1,get closeButtonLabel(){return e(Yt)},class:"w-[480px]",children:(J,vt)=>{Le(J,{get title(){return`Update Activity ${t.activity.activityId??""}`},children:(Wt,ce)=>{var dt=ya(),wt=o(dt),bt=o(wt);lt(bt,{for:"heartbeat-timeout",label:"Heartbeat Timeout Duration"});var Ut=a(bt,4),Bt=o(Ut);const Zt=n(()=>isNaN(Number(e(Y))));mt(Bt,{id:"heartbeat-timeout",label:"Heartbeat Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(Zt)},get value(){return e(Y)},set value(O){p(Y,O,!0)}});var Tt=a(Bt,2),Lt=o(Tt,!0);s(Tt),s(Ut),s(wt);var kt=a(wt,2),jt=o(kt);lt(jt,{for:"retry-backoff-coefficient",label:"Retry Backoff Coefficient"});var $t=a(jt,4);Te($t,{id:"retry-backoff-coefficient",label:"Retry Backoff Coefficient",labelHidden:!0,step:.01,min:1,class:"w-24",get value(){return e(tt)},set value(O){p(tt,O,!0)}}),s(kt);var i=a(kt,2),u=o(i);lt(u,{for:"retry-initial-interval",label:"Retry Initial Interval Duration"});var d=a(u,4),W=o(d);const B=n(()=>isNaN(Number(e(Z))));mt(W,{id:"retry-initial-interval",label:"Retry Initial Interval Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(B)},get value(){return e(Z)},set value(O){p(Z,O,!0)}});var x=a(W,2),L=o(x,!0);s(x),s(d),s(i);var D=a(i,2),b=o(D);lt(b,{for:"maximum-attempts",label:"Retry Maximum Attempts"});var T=a(b,4);Te(T,{id:"maximum-attempts",label:"Retry Maximum Attempts",labelHidden:!0,class:"w-24",get value(){return e(it)},set value(O){p(it,O,!0)}}),s(D);var q=a(D,2),st=o(q);lt(st,{for:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration"});var nt=a(st,4),pt=o(nt);const It=n(()=>isNaN(Number(e(Q))));mt(pt,{id:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(It)},get value(){return e(Q)},set value(O){p(Q,O,!0)}});var zt=a(pt,2),Ae=o(zt,!0);s(zt),s(nt),s(q);var te=a(q,2),ve=o(te);lt(ve,{for:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration"});var de=a(ve,4),ue=o(de);const Pe=n(()=>isNaN(Number(e(w))));mt(ue,{id:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(Pe)},get value(){return e(w)},set value(O){p(w,O,!0)}});var me=a(ue,2),De=o(me,!0);s(me),s(de),s(te);var ee=a(te,2),fe=o(ee);lt(fe,{for:"start-to-close-timeout",label:"Start to Close Timeout Duration"});var ye=a(fe,4),pe=o(ye);const Ce=n(()=>isNaN(Number(e(et))));mt(pe,{id:"start-to-close-timeout",label:"Start to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(Ce)},get value(){return e(et)},set value(O){p(et,O,!0)}});var _e=a(pe,2),Se=o(_e,!0);s(_e),s(ye),s(ee);var ae=a(ee,2),xe=o(ae);lt(xe,{for:"task-queue-name",label:"Task Queue Name"});var Ne=a(xe,2);mt(Ne,{id:"task-queue-name",label:"Task Queue Name",labelHidden:!0,class:"w-full",get value(){return e($)},set value(O){p($,O,!0)}}),s(ae);var ge=a(ae,2);const Oe=n(()=>r("activities.apply-to-all-activity-types",{type:e(at)}));Nt(ge,{get label(){return e(Oe)},get checked(){return e(yt)},set checked(O){p(yt,O,!0)}});var he=a(ge,2),we=o(he);St(we,{type:"button",variant:"ghost",size:"sm",$$events:{click:ht},children:(O,ie)=>{Ct();var ut=_t();H(At=>k(ut,At),[()=>r("common.cancel")]),g(O,ut)},$$slots:{default:!0}});var Me=a(we,2);St(Me,{type:"submit",variant:"primary",size:"sm",children:(O,ie)=>{Ct();var ut=_t();H(At=>k(ut,At),[()=>r("common.save")]),g(O,ut)},$$slots:{default:!0}}),s(he),s(dt),H((O,ie,ut,At,He)=>{k(Lt,O),k(L,ie),k(Ae,ut),k(De,At),k(Se,He)},[()=>Pt(e(Y)),()=>Pt(e(Z)),()=>Pt(e(Q)),()=>Pt(e(w)),()=>Pt(e(et))]),Ue("submit",dt,Ft),g(Wt,dt)},$$slots:{default:!0}})},$$slots:{default:!0}}),gt(),m()}var _a=U('<h3 slot="title"> </h3>'),xa=U('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function ga(l,t){xt(t,!0);const[c,m]=Ot();let v=Mt(t,"open",15),I=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),P=F(""),j=!1,_=F(""),f=F(!1);const S=()=>{v(!1),p(_,""),p(f,!1)},K=async()=>{await da({namespace:t.namespace,execution:t.execution,id:e(f)?void 0:e(I),reason:e(_),type:e(f)?e(C):void 0}),Vt(Jt,Date.now()),S()},G=n(()=>r("workflows.pause")),R=n(()=>r("common.cancel"));le(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return j},get confirmText(){return e(G)},get cancelText(){return e(R)},confirmType:"destructive",get error(){return e(P)},set error(A){p(P,A,!0)},get open(){return v()},set open(A){v(A)},$$events:{cancelModal:S,confirmModal:K},$$slots:{title:(A,M)=>{var y=_a(),h=o(y,!0);s(y),H(N=>k(h,N),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),g(A,y)},content:(A,M)=>{var y=xa(),h=o(y),N=o(h,!0);s(h);var V=a(h,2);const z=n(()=>r("common.reason-placeholder")),at=n(()=>r("common.reason"));mt(V,{id:"activity-pause-reason",class:"mt-4",get placeholder(){return e(z)},get label(){return e(at)},get value(){return e(_)},set value(w){p(_,w,!0)}});var $=a(V,2);const Q=n(()=>r("activities.pause-all-activity-types",{type:e(C)}));Nt($,{get label(){return e(Q)},get checked(){return e(f)},set checked(w){p(f,w,!0)}}),s(y),H(w=>k(N,w),[()=>r("activities.pause-modal-description")]),g(A,y)}}}),gt(),m()}var ha=U('<h3 slot="title"> </h3>'),wa=U('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function ba(l,t){xt(t,!0);const[c,m]=Ot();let v=Mt(t,"open",15),I=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),P=F(""),j=!1,_=F(!1),f=F(!1);const S=()=>{v(!1),p(_,!1),p(f,!1)},K=async()=>{await ma({namespace:t.namespace,execution:t.execution,id:e(_)?void 0:e(I),resetHeartbeat:e(f),type:e(_)?e(C):void 0}),Vt(Jt,Date.now()),ne.push({variant:"success",message:r("activities.reset-success",{activityId:e(I)})}),S()},G=n(()=>r("workflows.reset")),R=n(()=>r("common.cancel"));le(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return j},get confirmText(){return e(G)},get cancelText(){return e(R)},confirmType:"destructive",get error(){return e(P)},set error(A){p(P,A,!0)},get open(){return v()},set open(A){v(A)},$$events:{cancelModal:S,confirmModal:K},$$slots:{title:(A,M)=>{var y=ha(),h=o(y,!0);s(y),H(N=>k(h,N),[()=>r("activities.reset-modal-confirmation",{activityId:t.activity.id})]),g(A,y)},content:(A,M)=>{var y=wa(),h=o(y),N=o(h,!0);s(h);var V=a(h,2);const z=n(()=>r("activities.apply-to-all-activity-types",{type:e(C)}));Nt(V,{get label(){return e(z)},get checked(){return e(_)},set checked(Q){p(_,Q,!0)}});var at=a(V,2);const $=n(()=>r("activities.reset-heartbeat-details"));Nt(at,{get label(){return e($)},get checked(){return e(f)},set checked(Q){p(f,Q,!0)}}),s(y),H(Q=>k(N,Q),[()=>r("activities.reset-modal-description")]),g(A,y)}}}),gt(),m()}var Ta=U('<h3 slot="title"> </h3>'),ka=U('<div slot="content" class="flex flex-col gap-4"><p> </p> <!></div>');function Ia(l,t){xt(t,!0);const[c,m]=Ot();let v=Mt(t,"open",15),I=n(()=>t.activity.activityId),C=n(()=>t.activity.activityType),P=F(""),j=!1,_=F(!1);const f=()=>{v(!1),p(_,!1)},S=async()=>{await ua({namespace:t.namespace,execution:t.execution,id:e(_)?void 0:e(I),type:e(_)?e(C):void 0}),Vt(Jt,Date.now()),f()},K=n(()=>r("workflows.unpause")),G=n(()=>r("common.cancel"));le(l,{id:"activity-unpause-confirmation-modal","data-testid":"activity-unpause-confirmation-modal",get loading(){return j},get confirmText(){return e(K)},get cancelText(){return e(G)},confirmType:"destructive",get error(){return e(P)},set error(R){p(P,R,!0)},get open(){return v()},set open(R){v(R)},$$events:{cancelModal:f,confirmModal:S},$$slots:{title:(R,A)=>{var M=Ta(),y=o(M,!0);s(M),H(h=>k(y,h),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),g(R,M)},content:(R,A)=>{var M=ka(),y=o(M),h=o(y,!0);s(y);var N=a(y,2);const V=n(()=>r("activities.unpause-all-activity-types",{type:e(C)}));Nt(N,{get label(){return e(V)},get checked(){return e(_)},set checked(z){p(_,z,!0)}}),s(M),H(z=>k(h,z),[()=>r("activities.unpause-modal-description")]),g(R,M)}}}),gt(),m()}var Aa=U("<div><!> <!> <!></div> <!> <!> <!> <!>",1);function Pa(l,t){xt(t,!0);let c=Mt(t,"class",3,"");const m=n(()=>se.params),v=n(()=>e(m).namespace),I=n(()=>e(m).workflow),C=n(()=>e(m).run),P=n(()=>({workflowId:e(I),runId:e(C)}));let j=F(!1),_=F(!1),f=F(!1),S=F(!1);const K=async()=>{t.activity.paused?p(_,!0):p(j,!0)},G=()=>{p(f,!0)},R=()=>{p(S,!0)};var A=Aa(),M=ct(A),y=o(M);const h=n(()=>t.activity.paused?"Resume this Activity":"Pauses this Activity, starting before it retries or the next time it heartbeats. It won’t time out while it’s paused.");re(y,{bottomLeft:!0,width:200,get text(){return e(h)},children:(w,et)=>{const Y=n(()=>t.activity.paused?"play":"pause");St(w,{variant:"secondary",size:"sm",get leadingIcon(){return e(Y)},$$events:{click:K},children:(it,tt)=>{Ct();var Z=_t();H(ft=>k(Z,ft),[()=>t.activity.paused?r("workflows.unpause"):r("workflows.pause")]),g(it,Z)},$$slots:{default:!0}})},$$slots:{default:!0}});var N=a(y,2);re(N,{bottomLeft:!0,width:200,text:"Update this Activity Options.",children:(w,et)=>{St(w,{variant:"secondary",size:"sm",leadingIcon:"pencil",$$events:{click:R},children:(Y,it)=>{Ct();var tt=_t();H(Z=>k(tt,Z),[()=>r("common.update")]),g(Y,tt)},$$slots:{default:!0}})},$$slots:{default:!0}});var V=a(N,2);re(V,{bottom:!0,width:200,text:"Reset this Activity.",children:(w,et)=>{St(w,{variant:"secondary",size:"sm",leadingIcon:"retry",$$events:{click:G},children:(Y,it)=>{Ct();var tt=_t();H(Z=>k(tt,Z),[()=>r("workflows.reset")]),g(Y,tt)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(M);var z=a(M,2);ga(z,{get namespace(){return e(v)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(j)},set open(w){p(j,w,!0)}});var at=a(z,2);Ia(at,{get namespace(){return e(v)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(_)},set open(w){p(_,w,!0)}});var $=a(at,2);ba($,{get namespace(){return e(v)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(f)},set open(w){p(f,w,!0)}});var Q=a($,2);Fe(Q,()=>e(S),w=>{pa(w,{get namespace(){return e(v)},get execution(){return e(P)},get activity(){return t.activity},get open(){return e(S)},set open(et){p(S,et,!0)}})}),H(()=>We(M,1,`flex items-center gap-2 ${c()??""}`)),g(l,A),gt()}const Da=(l,t,c)=>!l.disableWriteActions&&!t.namespaceWriteDisabled(c)&&!l.activityCommandsDisabled&&!Ie($e),rt=(l,t=qt,c=qt)=>{var m=Ca(),v=o(m),I=o(v,!0);s(v);var C=a(v,2),P=o(C);{var j=f=>{var S=_t();H(()=>k(S,c())),g(f,S)},_=f=>{var S=Et(),K=ct(S);Re(K,()=>c()??qt),g(f,S)};E(P,f=>{typeof c()=="string"||typeof c()=="number"?f(j):f(_,!1)})}s(C),s(m),H(()=>k(I,t())),g(l,m)};var Ca=U('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),Sa=U('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Na=U('<p class="text-sm text-secondary/80"> </p> <!>',1),Oa=U('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Ma=U('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <!></div>'),Ha=U('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),Ra=U("<!> ",1),Fa=U('<p class="ml-1 text-sm text-secondary"> </p>'),Wa=U('<div class="flex flex-wrap items-center gap-1"><!> <!></div>'),Ua=U("<!> <!> <!>",1),Ba=U('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-1 flex-wrap justify-between gap-2"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div> <!></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!></div></div></div>');function Pi(l,t){xt(t,!0);const[c,m]=Ot(),v=()=>Qt(ze,"$workflowRun",c),I=()=>Qt(M,"$coreUser",c),C=()=>Qt(Ze,"$timeFormat",c),P=()=>Qt(Ye,"$relativeTime",c),j=i=>{var u=Sa(),d=o(u),W=o(d,!0);s(d);var B=a(d,2);Ee(B,{get value(){return t.activity.heartbeatDetails},key:"payloads",children:be,$$slots:{default:(x,L)=>{const D=n(()=>L.decodedValue),b=n(()=>r("common.copy-icon-title")),T=n(()=>r("common.copy-success-icon-title"));oe(x,{get content(){return e(D)},maxHeight:384,get copyIconTitle(){return e(b)},get copySuccessIconTitle(){return e(T)}})}}}),s(u),H(x=>k(W,x),[()=>r("workflows.heartbeat-details")]),g(i,u)},_=i=>{var u=Ma(),d=o(u),W=o(d);{var B=D=>{var b=Na(),T=ct(b),q=o(T,!0);s(T);var st=a(T,2);const nt=n(()=>Ht(aa(t.activity.lastFailure,"stackTrace"))),pt=n(()=>r("common.copy-icon-title")),It=n(()=>r("common.copy-success-icon-title"));oe(st,{get content(){return e(nt)},maxHeight:384,get copyIconTitle(){return e(pt)},get copySuccessIconTitle(){return e(It)}}),H(zt=>k(q,zt),[()=>r("workflows.last-failure")]),g(D,b)};E(W,D=>{t.activity.lastFailure&&D(B)})}s(d);var x=a(d,2);{var L=D=>{var b=Oa(),T=o(b),q=o(T,!0);s(T);var st=a(T,2);const nt=n(()=>r("common.copy-icon-title")),pt=n(()=>r("common.copy-success-icon-title"));oe(st,{language:"text",maxHeight:384,get content(){return t.activity.lastFailure.stackTrace},get copyIconTitle(){return e(nt)},get copySuccessIconTitle(){return e(pt)}}),s(b),H(It=>k(q,It),[()=>r("common.stack-trace")]),g(D,b)};E(x,D=>{var b;(b=t.activity.lastFailure)!=null&&b.stackTrace&&D(L)})}s(u),g(i,u)},f=i=>{const u=n(()=>{var d;return(d=t.activity.lastFailure)!=null&&d.stackTrace?r("workflows.last-failure-with-stack-trace"):r("workflows.last-failure")});Ke(i,{get title(){return e(u)},children:be,$$slots:{default:(d,W)=>{const B=n(()=>W.open);var x=Et(),L=ct(x);{var D=b=>{_(b)};E(L,b=>{e(B)&&b(D)})}g(d,x)}}})},S=(i,u=qt)=>{var d=Ha(),W=o(d),B=o(W,!0);s(W);var x=a(W,2),L=o(x),D=a(L),b=o(D);s(D),s(x),s(d),H((T,q)=>{k(B,T),k(L,`${q??""} `),k(b,`(${u()??""})`)},[()=>r("workflows.next-retry"),()=>Dt(t.activity.scheduledTime,C(),{relative:P(),relativeLabel:""})]),g(i,d)},K=i=>{var u=Wa(),d=o(u);const W=n(()=>e(R)?"danger":"default");Ge(d,{get type(){return e(W)},children:(L,D)=>{var b=Ra(),T=ct(b);const q=n(()=>e(R)&&"font-bold text-red-400");Je(T,{get class(){return`mr-1 ${e(q)??""}`},name:"retry"});var st=a(T);H(nt=>k(st,` ${t.activity.attempt??0} of ${nt??""}`),[()=>na(t.activity.maximumAttempts)]),g(L,b)},$$slots:{default:!0}});var B=a(d,2);{var x=L=>{var D=Fa(),b=o(D);s(D),H(T=>k(b,`${T??""} remaining`),[()=>sa(t.activity.maximumAttempts,t.activity.attempt)]),g(L,D)};E(B,L=>{t.activity.maximumAttempts&&L(x)})}s(u),g(i,u)};var G;const R=n(()=>t.activity.attempt>1&&!!t.activity.lastFailure),A=n(()=>(G=v()===null||v()===void 0?void 0:v().workflow)===null||G===void 0?void 0:G.isRunning);let M=Xe(),y=n(()=>Da(se.data.settings,I(),se.params.namespace)&&e(A));var h=Ba(),N=o(h),V=o(N),z=o(V);const at=n(()=>t.activity.paused?"Paused":t.activity.state);Ve(z,{get status(){return e(at)}});var $=a(z,2),Q=o($,!0);s($),s(V);var w=a(V,2);{var et=i=>{Pa(i,{get activity(){return t.activity},class:"justify-end"})};E(w,i=>{e(y)&&i(et)})}s(N);var Y=a(N,2),it=o(Y),tt=o(it),Z=X(()=>r("workflows.activity-id"));rt(tt,()=>e(Z),()=>t.activity.activityId);var ft=a(tt,2);{var yt=i=>{var u=Ua(),d=ct(u),W=X(()=>r("activities.paused-by"));rt(d,()=>e(W),()=>{var T,q;return((q=(T=t.activity.pauseInfo)==null?void 0:T.manual)==null?void 0:q.identity)||""});var B=a(d,2),x=X(()=>r("activities.paused-since")),L=X(()=>{var T;return Dt((T=t.activity.pauseInfo)==null?void 0:T.pauseTime,C(),{relative:P()})});rt(B,()=>e(x),()=>e(L));var D=a(B,2),b=X(()=>r("activities.pause-reason"));rt(D,()=>e(b),()=>{var T,q;return((q=(T=t.activity.pauseInfo)==null?void 0:T.manual)==null?void 0:q.reason)||"-"}),g(i,u)};E(ft,i=>{t.activity.paused&&t.activity.pauseInfo&&i(yt)})}var Rt=a(ft,2),ht=X(()=>r("workflows.attempt"));rt(Rt,()=>e(ht),()=>K);var Ft=a(Rt,2);{var Yt=i=>{var u=Et();const d=n(()=>va({date:t.activity.scheduledTime,negativeDefault:""}));var W=ct(u);{var B=x=>{S(x,()=>e(d))};E(W,x=>{e(d)&&x(B)})}g(i,u)};E(Ft,i=>{t.activity.scheduledTime&&i(Yt)})}var J=a(Ft,2);{var vt=i=>{var u=X(()=>r("workflows.last-attempt-completed-time")),d=X(()=>Dt(t.activity.lastAttemptCompleteTime,C(),{relative:P()}));rt(i,()=>e(u),()=>e(d))};E(J,i=>{t.activity.lastAttemptCompleteTime&&i(vt)})}var Wt=a(J,2);{var ce=i=>{var u=X(()=>r("workflows.retry-expiration")),d=X(()=>oa(t.activity.maximumAttempts,Qe(qe({start:Date.now(),end:t.activity.expirationTime}))));rt(i,()=>e(u),()=>e(d))};E(Wt,i=>{t.activity.expirationTime&&i(ce)})}var dt=a(Wt,2);{var wt=i=>{var u=X(()=>r("workflows.last-heartbeat")),d=X(()=>Dt(t.activity.lastHeartbeatTime,C(),{relative:P(),relativeStrict:!0}));rt(i,()=>e(u),()=>e(d))};E(dt,i=>{t.activity.lastHeartbeatTime&&i(wt)})}var bt=a(dt,2);{var Ut=i=>{var u=X(()=>r("workflows.last-started-time")),d=X(()=>Dt(t.activity.lastStartedTime,C(),{relative:P()}));rt(i,()=>e(u),()=>e(d))};E(bt,i=>{t.activity.lastStartedTime&&i(Ut)})}var Bt=a(bt,2);{var Zt=i=>{var u=X(()=>r("workflows.last-worker-identity"));rt(i,()=>e(u),()=>t.activity.lastWorkerIdentity)};E(Bt,i=>{t.activity.lastWorkerIdentity&&i(Zt)})}s(it);var Tt=a(it,2),Lt=o(Tt);{var kt=i=>{var u=Et(),d=ct(u);{var W=x=>{f(x)},B=x=>{_(x)};E(d,x=>{t.totalPending>20?x(W):x(B,!1)})}g(i,u)};E(Lt,i=>{e(R)&&i(kt)})}var jt=a(Lt,2);{var $t=i=>{j(i)};E(jt,i=>{t.activity.heartbeatDetails&&i($t)})}s(Tt),s(Y),s(h),H(()=>k(Q,t.activity.activityType)),g(l,h),gt(),m()}export{Pi as P,Ai as f,va as t};
