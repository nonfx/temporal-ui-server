import"./CWj6FrbW.js";import"./69_IOA4Y.js";import{p as N,b as U,c as h,e as k,t as G,d,g as v,s as c,m as H,n as S,r as j}from"./DYX0w8bX.js";import{s as q}from"./CxFVcq4O.js";import{t as C,a as y,b as P}from"./Bz76f8pg.js";import{e as R}from"./B8vPeB6P.js";import{i as T}from"./CZRFLhJG.js";import{s as W,a as z}from"./CgU0heln.js";import{g as D}from"./wJOlmX5o.js";import{B as J}from"./BvpmI2Ug.js";import{L as K}from"./WwDu3wGH.js";import{t as n}from"./D2OY9xdY.js";import{g as M}from"./bkF1xgnU.js";import{t as O}from"./Cob4TZDS.js";import{i as Q,a as V}from"./BvSE4oBO.js";import{l as X}from"./DThpBYgz.js";import{t as _}from"./DlxtkSgV.js";import{p as Y}from"./CTBtQUu0.js";import{r as Z}from"./D0Hb4jE1.js";var tt=C('<div class="flex flex-col items-start gap-2 md:flex-row md:items-center"><!> <input id="import-event-history-file-upload" class="import-input block border border-slate-200 p-2" type="file" accept=".json"> <!></div>');function $t($,b){N(b,!1);const[x,E]=W(),w=()=>z(X,"$lastUsedNamespace",x);let o,a=H(!1);const A=async t=>{var r;const e=t.target,i=(r=e==null?void 0:e.files)===null||r===void 0?void 0:r[0],s=new FileReader;i&&(s.readAsText(i),s.onload=()=>{var p,m;try{const g=(m=(p=s==null?void 0:s.result)===null||p===void 0?void 0:p.toString())!==null&&m!==void 0?m:"";o=Y(g),c(a,!0)}catch{_.push({variant:"error",message:n("events.event-history-load-error")}),c(a,!1)}})},B=async()=>{try{const t=await O(Array.isArray(o)?o:o==null?void 0:o.events),r=M(t);Q.set(t),V.set(r),c(a,!1);const e=Z(w(),"feed");D(e)}catch(t){console.error(t),_.push({variant:"error",message:n("events.event-history-import-error")})}};T();var l=tt(),f=k(l);const F=d(()=>n("events.import-event-history-file-upload"));K(f,{hidden:!0,for:"import-event-history-file-upload",get label(){return v(F)}});var u=h(f,2),I=h(u,2);const L=d(()=>!v(a));J(I,{leadingIcon:"file-upload",get disabled(){return v(L)},$$events:{click:B},children:(t,r)=>{S();var e=P();G(i=>q(e,i),[()=>n("common.import")],d),y(t,e)},$$slots:{default:!0}}),j(l),R("change",u,A),y($,l),U(),E()}export{$t as E};
