import"./CWj6FrbW.js";import{p as C,aC as P,Y as b,s as _,g as l,e as x,f as E,d as T,b as U}from"./DSxqszTl.js";import{s as V}from"./Nsxp-0jx.js";import{p as D}from"./Bp73-jql.js";import{a as u,s as I}from"./CZBNCVvj.js";import{o as W}from"./Cb3VdkNs.js";import{p as w}from"./CtpWBaZ8.js";import{a as B}from"./DlMariDq.js";import{c as M,d as Y}from"./BzHm-gSq.js";import{a as j,b as q,g as z}from"./Bmsgfb1C.js";import{s as m}from"./byHaz_JD.js";function Z(g,e){C(e,!0);const[i,f]=I(),t=()=>u(w,"$page",i),p=()=>u(B,"$authUser",i);let a=D(e,"key",3,""),v=a()&&(!(e.value===null||e.value===void 0)&&e.value[a()])?e.value[a()]:e.value,d=P(b(m(v)));W(()=>{y(e.value)});const y=async k=>{var n;const A={...t().data.settings,codec:{...(n=t().data.settings)===null||n===void 0?void 0:n.codec,endpoint:z(t().data.settings),passAccessToken:q(t().data.settings),includeCredentials:j(t().data.settings)}};try{const r=await M(k,t().params.namespace,A,p().accessToken),s=Y(r);let o=a()&&(s==null?void 0:s[a()])?s[a()]:s;Array.isArray(o)&&o.length===1&&(o=o[0]),_(d,m(o),!0),e.onDecode&&e.onDecode(l(d))}catch{console.error("Could not decode payloads")}};var c=x(),h=E(c);V(h,()=>e.children,()=>l(d)),T(g,c),U(),f()}export{Z as P};
