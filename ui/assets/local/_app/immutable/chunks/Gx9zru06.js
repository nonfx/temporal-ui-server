import"./CWj6FrbW.js";import{p as ht,az as n,aC as U,Y as st,g as e,t as j,h as o,c as a,s as x,r as s,n as Ot,k as xt,i as F,d as _,b as wt,f as nt,A as gt,e as Yt,j as K,o as Re}from"./DSxqszTl.js";import{s as I,e as Fe}from"./CXaSvchK.js";import{i as L}from"./BAt4aHTa.js";import{k as ve}from"./CvtqSEth.js";import{s as We}from"./Nsxp-0jx.js";import{s as Rt,b as Gt,a as Vt}from"./CZBNCVvj.js";import{p as de}from"./CyXeRjIy.js";import{s as Ue}from"./DyEeuWnl.js";import{p as Ft}from"./Bp73-jql.js";import{B as Mt}from"./Cq4Jhbi2.js";import{T as le}from"./CFAn1g9i.js";import{t as r}from"./D2OY9xdY.js";import{C as Ht}from"./BKbjjHdT.js";import{D as Be,a as Le}from"./BQIGPp4I.js";import{I as mt}from"./BA_eDSBe.js";import{N as Te}from"./X8PRUnQJ.js";import{L as ct}from"./LntrTj2C.js";import{g as je}from"./Cb3VdkNs.js";import{a as ze}from"./DlMariDq.js";import{s as Jt}from"./byHaz_JD.js";import{r as Xt,a as Zt}from"./Ckvd8NQV.js";import{t as ue}from"./DjXfOCsk.js";import{r as $t,w as Qe}from"./B0rcaDAb.js";import{k as St,e as qe,l as Ee}from"./CLGfdnHC.js";import{M as me}from"./CpzW07KG.js";import{P as Ie}from"./DtQwJSHk.js";import{W as Ke}from"./L-HzL4_-.js";import{A as Ve}from"./D_VQ-nFn.js";import{B as Ye}from"./-jFGsH1F.js";import{C as ce}from"./RtoCH-cV.js";import{I as Ge}from"./Dc8cZy7F.js";import{c as Je}from"./ChZF1bui.js";import{f as Nt,r as Xe,t as Ze}from"./BSP6lJQ9.js";import{c as Ae}from"./ByTIZu23.js";import{k as $e,l as ta}from"./C18wvfHB.js";import{o as ea}from"./C8ejR22J.js";const aa=new Set(["taskQueue","retryPolicy","parentWorkflowExecution","workflowExecution","meta"]),ia=new Set(["maximumAttempts"]),ra=(l,t)=>l===0?r("workflows.no-expiration"):t,oa=(l,t)=>l?l-t:r("workflows.unlimited"),sa=l=>l||r("workflows.unlimited"),na=(l,t)=>l==="maximumAttempts"&&!t?r("workflows.unlimited"):t,la=(l,t)=>{if(aa.has(t)&&typeof l[t]=="object"){for(const[c,m]of Object.entries(l[t]))ta(m)&&(ia.has(c)?l[`${t}${Ae(c)}`]=na(c,m):l[`${t}${Ae(c)}`]=m);delete l[t]}},ki=l=>{const t={};if(l.attributes)for(const[c,m]of Object.entries(l.attributes))$e(c,m)&&(t[c]=m),la(t,c);return t},ca=({date:l,now:t=Date.now(),negativeDefault:c})=>{if(!l)return"";const m=String(l);try{const A=(Number(new Date(m))-t)/1e3;return c!==void 0&&A<0?c:isNaN(A)?"":`${A.toFixed(0)}s`}catch{return""}},te=()=>{var c;const l=(c=je(ze))==null?void 0:c.email;return l?`From the Web UI by ${l}`:"From the Web UI"},va=async({namespace:l,execution:t,id:c,reason:m,type:v})=>{const A=Xt("activity.pause",{namespace:l});return Zt(A,{options:{method:"POST",body:Jt({execution:t,reason:m,identity:te(),id:c,type:v})}})},da=async({namespace:l,execution:t,id:c,type:m})=>{const v=Xt("activity.unpause",{namespace:l});return Zt(v,{options:{method:"POST",body:Jt({execution:t,identity:te(),id:c,type:m})}})},ua=async({namespace:l,execution:t,id:c,type:m,resetHeartbeat:v})=>{const A=Xt("activity.reset",{namespace:l});return Zt(A,{options:{method:"POST",body:Jt({execution:t,identity:te(),id:c,type:m,resetHeartbeat:v})}})},ma=async({namespace:l,execution:t,id:c,type:m,activityOptions:v})=>{const A=Xt("activity.update-options",{namespace:l});return Zt(A,{options:{method:"POST",body:Jt({execution:t,identity:te(),id:c,type:m,activityOptions:v,updateMask:"taskQueue.name,scheduleToCloseTimeout,scheduleToStartTimeout,startToCloseTimeout,heartbeatTimeout,retryPolicy.initialInterval,retryPolicy.backoffCoefficient,retryPolicy.maximumInterval,retryPolicy.maximumAttempts"})}})};var fa=j(`<form class="flex flex-col gap-4"><div><!> <p class="mb-1 text-xs text-secondary">Maximum permitted time between successful Worker Heartbeats.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Coefficient used to calculate the next retry interval. The next retry
          interval is previous interval multiplied by the coefficient. Must be 1
          or larger.</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Interval of the first retry. If retryBackoffCoefficient is 1.0 then it
          is used for all retries.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum number of attempts. When exceeded the retries stop even if not
          expired yet. 1 disables retries. 0 means unlimited (up to the
          timeouts).</p> <!></div> <div><!> <p class="mb-1 text-xs text-secondary">Indicates how long the caller is willing to wait for an Activity
          completion. Limits how long retries will be attempted.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Limits time an Activity Task can stay in a task queue before a Worker
          picks it up. This timeout is always non retryable, as all a retry
          would achieve is to put it back into the same queue.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <p class="mb-1 text-xs text-secondary">Maximum time an Activity is allowed to execute after being picked up
          by a Worker. This Timeout is always retryable.</p> <div class="flex flex-wrap items-center gap-2"><!> <p class="text-nowrap text-secondary"> </p></div></div> <div><!> <!></div> <!> <div class="flex items-center justify-end gap-4"><!> <!></div></form>`);function ya(l,t){ht(t,!0);const[c,m]=Rt();var v,A,S,C,Q,g,y,N,Y,G,W,D,H,p;const h=J=>!J||!J.endsWith("s")?"":J==null?void 0:J.replace("s",""),O=J=>{if(J)return J+"s"};let V=Ft(t,"open",15),q=n(()=>t.activity.activityId),it=n(()=>t.activity.activityType),$=U(st((A=(v=t.activity.activityOptions)===null||v===void 0?void 0:v.taskQueue)===null||A===void 0?void 0:A.name)),E=U(st(h(String((S=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||S===void 0?void 0:S.scheduleToCloseTimeout)))),k=U(st(h(String((C=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||C===void 0?void 0:C.scheduleToStartTimeout)))),et=U(st(h(String((Q=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||Q===void 0?void 0:Q.startToCloseTimeout)))),X=U(st(h(String((g=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||g===void 0?void 0:g.heartbeatTimeout)))),rt=U(st((N=(y=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||y===void 0?void 0:y.retryPolicy)===null||N===void 0?void 0:N.maximumAttempts)),tt=U(st((G=(Y=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||Y===void 0?void 0:Y.retryPolicy)===null||G===void 0?void 0:G.backoffCoefficient)),Z=U(st(h(String((D=(W=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||W===void 0?void 0:W.retryPolicy)===null||D===void 0?void 0:D.initialInterval)))),ft=st(h(String((p=(H=t.activity===null||t.activity===void 0?void 0:t.activity.activityOptions)===null||H===void 0?void 0:H.retryPolicy)===null||p===void 0?void 0:p.maximumInterval))),yt=U(!1);const Wt=n(()=>({taskQueue:{name:e($)},scheduleToCloseTimeout:O(e(E)),scheduleToStartTimeout:O(e(k)),startToCloseTimeout:O(e(et)),heartbeatTimeout:O(e(X)),retryPolicy:{maximumAttempts:e(rt),initialInterval:O(e(Z)),backoffCoefficient:e(tt),maximumInterval:O(ft)}})),bt=()=>{V(!1)},Ut=async J=>{J.preventDefault();try{await ma({namespace:t.namespace,execution:t.execution,id:e(yt)?void 0:e(q),type:e(yt)?e(it):void 0,activityOptions:e(Wt)}),Gt($t,Date.now()),ue.push({variant:"success",message:`Options for Activity ${e(q)} have been updated.`})}catch(vt){console.error("Error updating activity options:",vt),ue.push({variant:"error",message:`Options for Activity ${e(q)} have been failed to update: ${vt==null?void 0:vt.message}`,duration:5e3})}finally{bt()}},ee=n(()=>r("common.close"));Be(l,{get open(){return V()},onClick:bt,position:"right",id:"activity-options-update-drawer",dark:!1,get closeButtonLabel(){return e(ee)},class:"w-[480px]",children:(J,vt)=>{Le(J,{get title(){return`Update Activity ${t.activity.activityId??""}`},children:(Bt,fe)=>{var dt=fa(),kt=o(dt),Tt=o(kt);ct(Tt,{for:"heartbeat-timeout",label:"Heartbeat Timeout Duration"});var Lt=a(Tt,4),It=o(Lt);const ae=n(()=>isNaN(Number(e(X))));mt(It,{id:"heartbeat-timeout",label:"Heartbeat Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(ae)},get value(){return e(X)},set value(M){x(X,M,!0)}});var jt=a(It,2),ie=o(jt,!0);s(jt),s(Lt),s(kt);var pt=a(kt,2),At=o(pt);ct(At,{for:"retry-backoff-coefficient",label:"Retry Backoff Coefficient"});var re=a(At,4);Te(re,{id:"retry-backoff-coefficient",label:"Retry Backoff Coefficient",labelHidden:!0,step:.01,min:1,class:"w-24",get value(){return e(tt)},set value(M){x(tt,M,!0)}}),s(pt);var Dt=a(pt,2),zt=o(Dt);ct(zt,{for:"retry-initial-interval",label:"Retry Initial Interval Duration"});var i=a(zt,4),d=o(i);const u=n(()=>isNaN(Number(e(Z))));mt(d,{id:"retry-initial-interval",label:"Retry Initial Interval Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(u)},get value(){return e(Z)},set value(M){x(Z,M,!0)}});var R=a(d,2),B=o(R,!0);s(R),s(i),s(Dt);var f=a(Dt,2),P=o(f);ct(P,{for:"maximum-attempts",label:"Retry Maximum Attempts"});var T=a(P,4);Te(T,{id:"maximum-attempts",label:"Retry Maximum Attempts",labelHidden:!0,class:"w-24",get value(){return e(rt)},set value(M){x(rt,M,!0)}}),s(f);var w=a(f,2),b=o(w);ct(b,{for:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration"});var z=a(b,4),lt=o(z);const ot=n(()=>isNaN(Number(e(E))));mt(lt,{id:"schedule-to-close-timeout",label:"Schedule to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(ot)},get value(){return e(E)},set value(M){x(E,M,!0)}});var _t=a(lt,2),Qt=o(_t,!0);s(_t),s(z),s(w);var Pt=a(w,2),qt=o(Pt);ct(qt,{for:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration"});var Et=a(qt,4),Kt=o(Et);const De=n(()=>isNaN(Number(e(k))));mt(Kt,{id:"schedule-to-start-timeout",label:"Schedule to Start Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(De)},get value(){return e(k)},set value(M){x(k,M,!0)}});var ye=a(Kt,2),Pe=o(ye,!0);s(ye),s(Et),s(Pt);var oe=a(Pt,2),pe=o(oe);ct(pe,{for:"start-to-close-timeout",label:"Start to Close Timeout Duration"});var _e=a(pe,4),xe=o(_e);const Ce=n(()=>isNaN(Number(e(et))));mt(xe,{id:"start-to-close-timeout",label:"Start to Close Timeout Duration",labelHidden:!0,suffix:"sec",class:"w-36",get error(){return e(Ce)},get value(){return e(et)},set value(M){x(et,M,!0)}});var ge=a(xe,2),Se=o(ge,!0);s(ge),s(_e),s(oe);var se=a(oe,2),he=o(se);ct(he,{for:"task-queue-name",label:"Task Queue Name"});var Ne=a(he,2);mt(Ne,{id:"task-queue-name",label:"Task Queue Name",labelHidden:!0,class:"w-full",get value(){return e($)},set value(M){x($,M,!0)}}),s(se);var we=a(se,2);const Oe=n(()=>r("activities.apply-to-all-activity-types",{type:e(it)}));Ht(we,{get label(){return e(Oe)},get checked(){return e(yt)},set checked(M){x(yt,M,!0)}});var be=a(we,2),ke=o(be);Mt(ke,{type:"button",variant:"ghost",size:"sm",$$events:{click:bt},children:(M,ne)=>{Ot();var ut=xt();F(Ct=>I(ut,Ct),[()=>r("common.cancel")]),_(M,ut)},$$slots:{default:!0}});var Me=a(ke,2);Mt(Me,{type:"submit",variant:"primary",size:"sm",children:(M,ne)=>{Ot();var ut=xt();F(Ct=>I(ut,Ct),[()=>r("common.save")]),_(M,ut)},$$slots:{default:!0}}),s(be),s(dt),F((M,ne,ut,Ct,He)=>{I(ie,M),I(B,ne),I(Qt,ut),I(Pe,Ct),I(Se,He)},[()=>St(e(X)),()=>St(e(Z)),()=>St(e(E)),()=>St(e(k)),()=>St(e(et))]),Fe("submit",dt,Ut),_(Bt,dt)},$$slots:{default:!0}})},$$slots:{default:!0}}),wt(),m()}var pa=j('<h3 slot="title"> </h3>'),_a=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function xa(l,t){ht(t,!0);const[c,m]=Rt();let v=Ft(t,"open",15),A=n(()=>t.activity.activityId),S=n(()=>t.activity.activityType),C=U(""),Q=!1,g=U(""),y=U(!1);const N=()=>{v(!1),x(g,""),x(y,!1)},Y=async()=>{await va({namespace:t.namespace,execution:t.execution,id:e(y)?void 0:e(A),reason:e(g),type:e(y)?e(S):void 0}),Gt($t,Date.now()),N()},G=n(()=>r("workflows.pause")),W=n(()=>r("common.cancel"));me(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return Q},get confirmText(){return e(G)},get cancelText(){return e(W)},confirmType:"destructive",get error(){return e(C)},set error(D){x(C,D,!0)},get open(){return v()},set open(D){v(D)},$$events:{cancelModal:N,confirmModal:Y},$$slots:{title:(D,H)=>{var p=pa(),h=o(p,!0);s(p),F(O=>I(h,O),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),_(D,p)},content:(D,H)=>{var p=_a(),h=o(p),O=o(h,!0);s(h);var V=a(h,2);const q=n(()=>r("common.reason-placeholder")),it=n(()=>r("common.reason"));mt(V,{id:"activity-pause-reason",class:"mt-4",get placeholder(){return e(q)},get label(){return e(it)},get value(){return e(g)},set value(k){x(g,k,!0)}});var $=a(V,2);const E=n(()=>r("activities.pause-all-activity-types",{type:e(S)}));Ht($,{get label(){return e(E)},get checked(){return e(y)},set checked(k){x(y,k,!0)}}),s(p),F(k=>I(O,k),[()=>r("activities.pause-modal-description")]),_(D,p)}}}),wt(),m()}var ga=j('<h3 slot="title"> </h3>'),ha=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!> <!></div>');function wa(l,t){ht(t,!0);const[c,m]=Rt();let v=Ft(t,"open",15),A=n(()=>t.activity.activityId),S=n(()=>t.activity.activityType),C=U(""),Q=!1,g=U(!1),y=U(!1);const N=()=>{v(!1),x(g,!1),x(y,!1)},Y=async()=>{await ua({namespace:t.namespace,execution:t.execution,id:e(g)?void 0:e(A),resetHeartbeat:e(y),type:e(g)?e(S):void 0}),Gt($t,Date.now()),ue.push({variant:"success",message:r("activities.reset-success",{activityId:e(A)})}),N()},G=n(()=>r("workflows.reset")),W=n(()=>r("common.cancel"));me(l,{id:"activity-pause-confirmation-modal","data-testid":"activity-pause-confirmation-modal",get loading(){return Q},get confirmText(){return e(G)},get cancelText(){return e(W)},confirmType:"destructive",get error(){return e(C)},set error(D){x(C,D,!0)},get open(){return v()},set open(D){v(D)},$$events:{cancelModal:N,confirmModal:Y},$$slots:{title:(D,H)=>{var p=ga(),h=o(p,!0);s(p),F(O=>I(h,O),[()=>r("activities.reset-modal-confirmation",{activityId:t.activity.id})]),_(D,p)},content:(D,H)=>{var p=ha(),h=o(p),O=o(h,!0);s(h);var V=a(h,2);const q=n(()=>r("activities.apply-to-all-activity-types",{type:e(S)}));Ht(V,{get label(){return e(q)},get checked(){return e(g)},set checked(E){x(g,E,!0)}});var it=a(V,2);const $=n(()=>r("activities.reset-heartbeat-details"));Ht(it,{get label(){return e($)},get checked(){return e(y)},set checked(E){x(y,E,!0)}}),s(p),F(E=>I(O,E),[()=>r("activities.reset-modal-description")]),_(D,p)}}}),wt(),m()}var ba=j('<h3 slot="title"> </h3>'),ka=j('<div slot="content" class="flex flex-col gap-4"><p> </p> <!></div>');function Ta(l,t){ht(t,!0);const[c,m]=Rt();let v=Ft(t,"open",15),A=n(()=>t.activity.activityId),S=n(()=>t.activity.activityType),C=U(""),Q=!1,g=U(!1);const y=()=>{v(!1),x(g,!1)},N=async()=>{await da({namespace:t.namespace,execution:t.execution,id:e(g)?void 0:e(A),type:e(g)?e(S):void 0}),Gt($t,Date.now()),y()},Y=n(()=>r("workflows.unpause")),G=n(()=>r("common.cancel"));me(l,{id:"activity-unpause-confirmation-modal","data-testid":"activity-unpause-confirmation-modal",get loading(){return Q},get confirmText(){return e(Y)},get cancelText(){return e(G)},confirmType:"destructive",get error(){return e(C)},set error(W){x(C,W,!0)},get open(){return v()},set open(W){v(W)},$$events:{cancelModal:y,confirmModal:N},$$slots:{title:(W,D)=>{var H=ba(),p=o(H,!0);s(H),F(h=>I(p,h),[()=>r("activities.pause-modal-confirmation",{activityId:t.activity.id})]),_(W,H)},content:(W,D)=>{var H=ka(),p=o(H),h=o(p,!0);s(p);var O=a(p,2);const V=n(()=>r("activities.unpause-all-activity-types",{type:e(S)}));Ht(O,{get label(){return e(V)},get checked(){return e(g)},set checked(q){x(g,q,!0)}}),s(H),F(q=>I(h,q),[()=>r("activities.unpause-modal-description")]),_(W,H)}}}),wt(),m()}var Ia=j("<div><!> <!> <!></div> <!> <!> <!> <!>",1);function Aa(l,t){ht(t,!0);let c=Ft(t,"class",3,"");const m=n(()=>de.params),v=n(()=>e(m).namespace),A=n(()=>e(m).workflow),S=n(()=>e(m).run),C=n(()=>({workflowId:e(A),runId:e(S)}));let Q=U(!1),g=U(!1),y=U(!1),N=U(!1);const Y=async()=>{t.activity.paused?x(g,!0):x(Q,!0)},G=()=>{x(y,!0)},W=()=>{x(N,!0)};var D=Ia(),H=nt(D),p=o(H);const h=n(()=>t.activity.paused?"Resume this Activity":"Pauses this Activity, starting before it retries or the next time it heartbeats. It won’t time out while it’s paused.");le(p,{bottomLeft:!0,width:200,get text(){return e(h)},children:(k,et)=>{const X=n(()=>t.activity.paused?"play":"pause");Mt(k,{variant:"secondary",size:"sm",get leadingIcon(){return e(X)},$$events:{click:Y},children:(rt,tt)=>{Ot();var Z=xt();F(ft=>I(Z,ft),[()=>t.activity.paused?r("workflows.unpause"):r("workflows.pause")]),_(rt,Z)},$$slots:{default:!0}})},$$slots:{default:!0}});var O=a(p,2);le(O,{bottomLeft:!0,width:200,text:"Update this Activity Options.",children:(k,et)=>{Mt(k,{variant:"secondary",size:"sm",leadingIcon:"pencil",$$events:{click:W},children:(X,rt)=>{Ot();var tt=xt();F(Z=>I(tt,Z),[()=>r("common.update")]),_(X,tt)},$$slots:{default:!0}})},$$slots:{default:!0}});var V=a(O,2);le(V,{bottom:!0,width:200,text:"Reset this Activity.",children:(k,et)=>{Mt(k,{variant:"secondary",size:"sm",leadingIcon:"retry",$$events:{click:G},children:(X,rt)=>{Ot();var tt=xt();F(Z=>I(tt,Z),[()=>r("workflows.reset")]),_(X,tt)},$$slots:{default:!0}})},$$slots:{default:!0}}),s(H);var q=a(H,2);xa(q,{get namespace(){return e(v)},get execution(){return e(C)},get activity(){return t.activity},get open(){return e(Q)},set open(k){x(Q,k,!0)}});var it=a(q,2);Ta(it,{get namespace(){return e(v)},get execution(){return e(C)},get activity(){return t.activity},get open(){return e(g)},set open(k){x(g,k,!0)}});var $=a(it,2);wa($,{get namespace(){return e(v)},get execution(){return e(C)},get activity(){return t.activity},get open(){return e(y)},set open(k){x(y,k,!0)}});var E=a($,2);ve(E,()=>e(N),k=>{ya(k,{get namespace(){return e(v)},get execution(){return e(C)},get activity(){return t.activity},get open(){return e(N)},set open(et){x(N,et,!0)}})}),F(()=>Ue(H,1,`flex items-center gap-2 ${c()??""}`)),_(l,D),wt()}const Da=(l,t,c)=>!l.disableWriteActions&&!t.namespaceWriteDisabled(c)&&!t.isActivityCommandsDisabled&&!l.activityCommandsDisabled,at=(l,t=gt,c=gt)=>{var m=Pa(),v=o(m),A=o(v,!0);s(v);var S=a(v,2),C=o(S);{var Q=y=>{var N=xt();F(()=>I(N,c())),_(y,N)},g=y=>{var N=Yt(),Y=nt(N);We(Y,()=>c()??gt),_(y,N)};L(C,y=>{typeof c()=="string"||typeof c()=="number"?y(Q):y(g,!1)})}s(S),s(m),F(()=>I(A,t())),_(l,m)};var Pa=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="w-full whitespace-pre-line"><!></p></div>'),Ca=j('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Sa=j('<p class="text-sm text-secondary/80"> </p> <!>',1),Na=j('<div><p class="text-sm text-secondary/80"> </p> <!></div>'),Oa=j('<div class="flex flex-col gap-2"><div class="flex flex-1 flex-col"><!></div> <!></div>'),Ma=j('<div class="flex items-start gap-4"><p class="min-w-56 text-sm text-secondary/80"> </p> <p class="flex w-full items-center gap-1 whitespace-pre-line"> <strong> </strong></p></div>'),Ha=j("<!> ",1),Ra=j('<p class="ml-1 text-sm text-secondary"> </p>'),Fa=j('<div class="flex flex-wrap items-center gap-1"><!> <!></div>'),Wa=j("<!> <!> <!>",1),Ua=j("<!> <!>",1),Ba=j('<div class="surface-primary flex flex-1 cursor-default flex-col gap-2 border-b border-subtle p-4"><div class="flex flex-1 flex-wrap justify-between gap-2"><div class="flex flex-wrap items-center space-x-3"><!> <h4> </h4></div> <!></div> <div class="flex flex-1 flex-col gap-4 xl:flex-row"><div class="flex w-full flex-col gap-1 xl:w-1/2"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="flex w-full flex-col gap-4 md:flex-1 xl:w-1/2"><!> <!></div></div></div>');function Ti(l,t){ht(t,!0);const[c,m]=Rt(),v=()=>Vt(Qe,"$workflowRun",c),A=()=>Vt(H,"$coreUser",c),S=()=>Vt(Ze,"$timeFormat",c),C=()=>Vt(Xe,"$relativeTime",c),Q=i=>{var d=Ca(),u=o(d),R=o(u,!0);s(u);var B=a(u,2);ve(B,()=>t.activity.attempt,f=>{Ie(f,{get value(){return t.activity.heartbeatDetails},key:"payloads",children:(T,w=gt)=>{const b=n(()=>r("common.copy-icon-title")),z=n(()=>r("common.copy-success-icon-title"));ce(T,{get content(){return w()},maxHeight:384,get copyIconTitle(){return e(b)},get copySuccessIconTitle(){return e(z)}})},$$slots:{default:!0}})}),s(d),F(f=>I(R,f),[()=>r("workflows.heartbeat-details")]),_(i,d)},g=i=>{var d=Oa(),u=o(d),R=o(u);{var B=T=>{var w=Sa(),b=nt(w),z=o(b,!0);s(b);var lt=a(b,2);ve(lt,()=>t.activity.attempt,ot=>{const _t=n(()=>ea(t.activity.lastFailure,"stackTrace"));Ie(ot,{get value(){return e(_t)},children:(Pt,qt=gt)=>{const Et=n(()=>r("common.copy-icon-title")),Kt=n(()=>r("common.copy-success-icon-title"));ce(Pt,{get content(){return qt()},maxHeight:384,get copyIconTitle(){return e(Et)},get copySuccessIconTitle(){return e(Kt)}})},$$slots:{default:!0}})}),F(ot=>I(z,ot),[()=>r("workflows.last-failure")]),_(T,w)};L(R,T=>{t.activity.lastFailure&&T(B)})}s(u);var f=a(u,2);{var P=T=>{var w=Na(),b=o(w),z=o(b,!0);s(b);var lt=a(b,2);const ot=n(()=>r("common.copy-icon-title")),_t=n(()=>r("common.copy-success-icon-title"));ce(lt,{language:"text",maxHeight:384,get content(){return t.activity.lastFailure.stackTrace},get copyIconTitle(){return e(ot)},get copySuccessIconTitle(){return e(_t)}}),s(w),F(Qt=>I(z,Qt),[()=>r("common.stack-trace")]),_(T,w)};L(f,T=>{var w;(w=t.activity.lastFailure)!=null&&w.stackTrace&&T(P)})}s(d),_(i,d)},y=i=>{const d=n(()=>{var u;return(u=t.activity.lastFailure)!=null&&u.stackTrace?r("workflows.last-failure-with-stack-trace"):r("workflows.last-failure")});Ve(i,{get title(){return e(d)},children:Re,$$slots:{default:(u,R)=>{const B=n(()=>R.open);var f=Yt(),P=nt(f);{var T=w=>{g(w)};L(P,w=>{e(B)&&w(T)})}_(u,f)}}})},N=(i,d=gt)=>{var u=Ma(),R=o(u),B=o(R,!0);s(R);var f=a(R,2),P=o(f),T=a(P),w=o(T);s(T),s(f),s(u),F((b,z)=>{I(B,b),I(P,`${z??""} `),I(w,`(${d()??""})`)},[()=>r("workflows.next-retry"),()=>Nt(t.activity.scheduledTime,S(),{relative:C(),relativeLabel:""})]),_(i,u)},Y=i=>{var d=Fa(),u=o(d);const R=n(()=>e(W)?"danger":"default");Ye(u,{get type(){return e(R)},children:(P,T)=>{var w=Ha(),b=nt(w);const z=n(()=>e(W)&&"font-bold text-red-400");Ge(b,{get class(){return`mr-1 ${e(z)??""}`},name:"retry"});var lt=a(b);F(ot=>I(lt,` ${t.activity.attempt??0} of ${ot??""}`),[()=>sa(t.activity.maximumAttempts)]),_(P,w)},$$slots:{default:!0}});var B=a(u,2);{var f=P=>{var T=Ra(),w=o(T);s(T),F(b=>I(w,`${b??""} remaining`),[()=>oa(t.activity.maximumAttempts,t.activity.attempt)]),_(P,T)};L(B,P=>{t.activity.maximumAttempts&&P(f)})}s(d),_(i,d)};var G;const W=n(()=>t.activity.attempt>1&&!!t.activity.lastFailure),D=n(()=>(G=v()===null||v()===void 0?void 0:v().workflow)===null||G===void 0?void 0:G.isRunning);let H=Je(),p=n(()=>Da(de.data.settings,A(),de.params.namespace)&&e(D));var h=Ba(),O=o(h),V=o(O),q=o(V);const it=n(()=>t.activity.paused?"Paused":t.activity.state);Ke(q,{get status(){return e(it)}});var $=a(q,2),E=o($,!0);s($),s(V);var k=a(V,2);{var et=i=>{Aa(i,{get activity(){return t.activity},class:"justify-end"})};L(k,i=>{e(p)&&i(et)})}s(O);var X=a(O,2),rt=o(X),tt=o(rt),Z=K(()=>r("workflows.activity-id"));at(tt,()=>e(Z),()=>t.activity.activityId);var ft=a(tt,2);{var yt=i=>{var d=Wa(),u=nt(d),R=K(()=>r("activities.paused-by"));at(u,()=>e(R),()=>{var b,z;return((z=(b=t.activity.pauseInfo)==null?void 0:b.manual)==null?void 0:z.identity)||""});var B=a(u,2),f=K(()=>r("activities.paused-since")),P=K(()=>{var b;return Nt((b=t.activity.pauseInfo)==null?void 0:b.pauseTime,S(),{relative:C()})});at(B,()=>e(f),()=>e(P));var T=a(B,2),w=K(()=>r("activities.pause-reason"));at(T,()=>e(w),()=>{var b,z;return((z=(b=t.activity.pauseInfo)==null?void 0:b.manual)==null?void 0:z.reason)||"-"}),_(i,d)};L(ft,i=>{t.activity.paused&&t.activity.pauseInfo&&i(yt)})}var Wt=a(ft,2),bt=K(()=>r("workflows.attempt"));at(Wt,()=>e(bt),()=>Y);var Ut=a(Wt,2);{var ee=i=>{var d=Yt();const u=n(()=>ca({date:t.activity.scheduledTime,negativeDefault:""}));var R=nt(d);{var B=f=>{N(f,()=>e(u))};L(R,f=>{e(u)&&f(B)})}_(i,d)};L(Ut,i=>{t.activity.scheduledTime&&i(ee)})}var J=a(Ut,2);{var vt=i=>{var d=K(()=>r("workflows.last-attempt-completed-time")),u=K(()=>Nt(t.activity.lastAttemptCompleteTime,S(),{relative:C()}));at(i,()=>e(d),()=>e(u))};L(J,i=>{t.activity.lastAttemptCompleteTime&&i(vt)})}var Bt=a(J,2);{var fe=i=>{var d=K(()=>r("workflows.retry-expiration")),u=K(()=>ra(t.activity.maximumAttempts,qe(Ee({start:Date.now(),end:t.activity.expirationTime}))));at(i,()=>e(d),()=>e(u))};L(Bt,i=>{t.activity.expirationTime&&i(fe)})}var dt=a(Bt,2);{var kt=i=>{var d=K(()=>r("workflows.last-heartbeat")),u=K(()=>Nt(t.activity.lastHeartbeatTime,S(),{relative:C(),relativeStrict:!0}));at(i,()=>e(d),()=>e(u))};L(dt,i=>{t.activity.lastHeartbeatTime&&i(kt)})}var Tt=a(dt,2);{var Lt=i=>{var d=K(()=>r("workflows.last-started-time")),u=K(()=>Nt(t.activity.lastStartedTime,S(),{relative:C()}));at(i,()=>e(d),()=>e(u))};L(Tt,i=>{t.activity.lastStartedTime&&i(Lt)})}var It=a(Tt,2);{var ae=i=>{var d=K(()=>r("workflows.last-worker-identity"));at(i,()=>e(d),()=>t.activity.lastWorkerIdentity)};L(It,i=>{t.activity.lastWorkerIdentity&&i(ae)})}var jt=a(It,2);{var ie=i=>{var d=Ua(),u=nt(d);{var R=P=>{var T=K(()=>r("workflows.priority"));at(P,()=>e(T),()=>t.activity.priority.priorityKey)};L(u,P=>{t.activity.priority.priorityKey&&P(R)})}var B=a(u,2);{var f=P=>{var T=K(()=>r("workflows.fairness"));at(P,()=>e(T),()=>t.activity.priority.fairnessKey)};L(B,P=>{t.activity.priority.fairnessKey&&P(f)})}_(i,d)};L(jt,i=>{t.activity.priority&&i(ie)})}s(rt);var pt=a(rt,2),At=o(pt);{var re=i=>{var d=Yt(),u=nt(d);{var R=f=>{y(f)},B=f=>{g(f)};L(u,f=>{t.totalPending>20?f(R):f(B,!1)})}_(i,d)};L(At,i=>{e(W)&&i(re)})}var Dt=a(At,2);{var zt=i=>{Q(i)};L(Dt,i=>{t.activity.heartbeatDetails&&i(zt)})}s(pt),s(X),s(h),F(()=>I(E,t.activity.activityType)),_(l,h),wt(),m()}export{Ti as P,ki as f,ca as t};
